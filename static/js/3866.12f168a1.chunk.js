/*! For license information please see 3866.12f168a1.chunk.js.LICENSE.txt */
(self.webpackChunkstephanie_solution=self.webpackChunkstephanie_solution||[]).push([[3866],{1694:(t,e)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)){if(n.length){var a=r.apply(null,n);a&&t.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var s in n)i.call(n,s)&&n[s]&&t.push(s)}}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},9138:(t,e,n)=>{"use strict";n.d(e,{fle:()=>cn});var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function s(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(e){o(e)}}function s(t){try{c(i.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))}function c(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(c){s=[6,c],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;function l(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function h(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}Object.create;var d=n(2791),u=n(1694),f=n.n(u);function m(t,e){var n,i;return t&&e?(n=""+t+e[0].toUpperCase()+e.slice(1),i=t+"-"+e):(n=t||e,i=t||e),{camelCase:n,snakeCase:i}}function p(t){return/^blob:/.test(t)}function v(t){return p(t)||function(t){return/^data:/.test(t)}(t)}function g(t){if(v(t))return!1;var e=window.location,n=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t)||[],i={protocol:n[1]||"",host:n[2]||"",port:n[3]||""},r=function(t){return t.port||("http"===(t.protocol||e.protocol)?80:433)};return!(!i.protocol&&!i.host&&!i.port||Boolean(i.protocol&&i.protocol==e.protocol&&i.host&&i.host==e.host&&i.host&&r(i)==r(e)))}function w(t){return"function"===typeof t}function b(t){return void 0===t}var A=function(t){return null!==t&&"object"===typeof t};function y(t,e,n){void 0===n&&(n={});var i={};return A(t)?(Object.keys(e).forEach((function(r){b(t[r])?i[r]=e[r]:A(e[r])?A(t[r])?i[r]=y(t[r],e[r],n[r]):i[r]=t[r]?e[r]:n[r]:!0===e[r]||!1===e[r]?i[r]=Boolean(t[r]):i[r]=t[r]})),i):t?e:n}function E(t){var e=Number(t);return Number.isNaN(e)?t:e}function x(t){return!0===t||!1===t}function C(t){return"number"===typeof t}function M(t){return t!==t}function S(t){return C(t)&&!M(t)||function(t){return"string"===typeof t}(t)&&!Number.isNaN(parseFloat(t))&&isFinite(parseFloat(t))}function R(t,e){return Math.sqrt(Math.pow(t.left-e.left,2)+Math.pow(t.top-e.top,2))}function z(t,e,n){return void 0===n&&(n=.001),Math.abs(e-t)<n}function P(t,e,n){return!z(t,e,n)&&t>e}function I(t,e,n){return!z(t,e,n)&&t<e}function N(t){return new Promise((function(e){setTimeout((function(){e()}),t)}))}function H(t){if(!A(t))return t;var e={};return Array.isArray(t)?e=t.map((function(t){return H(t)})):Object.keys(t).forEach((function(n){return e[n]=H(t[n])})),e}function U(t,e,n){if(void 0===n&&(n=.001),C(t)&&C(e)&&z(t,e,n))return!0;if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;var i,r=void 0;if(Array.isArray(t)){if((i=t.length)!=e.length)return!1;for(r=i;0!==r--;)if(!U(t[r],e[r],n))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var o=Object.keys(t);if((i=o.length)!==Object.keys(e).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;for(r=i;0!==r--;){var a=o[r];if(!U(t[a],e[a],n))return!1}return!0}return t!==t&&e!==e}function _(t){return"west"===t||"south"===t||"north"===t||"east"===t}function B(t,e){var n,i;function r(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=Date.now()-n,c=w(e)?e():e||0;s<c&&s>=0?i=setTimeout((function(){return r.apply(void 0,o)}),c-s):t.apply(void 0,o)}function o(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];n=Date.now(),i=setTimeout((function(){return r.apply(void 0,t)}),w(e)?e():e||0)}return o.clear=function(){clearTimeout(i)},o}var F,W,T,O=["left","right","top","bottom"],L=["left","right"],D=["top","bottom"];function Q(t,e){return{left:t.left-e.left,top:t.top-e.top}}function k(t){return{left:t.left+t.width/2,top:t.top+t.height/2}}function j(t,e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)}function X(t,e){return{left:t.left-e.left,top:t.top-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function Y(t){return{left:-t.left,top:-t.top}}function V(t,e){return o(o({},t),{left:t.left+e.left,top:t.top+e.top})}function q(t){return{left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height}}function Z(t,e,n,i){if(1!==e){if("left"in t||"top"in t){if(n){var r=k(t);return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2+(n.left-r.left)*(i||1-e),top:t.top+t.height*(1-e)/2+(n.top-r.top)*(i||1-e)}}return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2,top:t.top+t.height*(1-e)/2}}return{width:t.width*e,height:t.height*e}}return t}function G(t){return t.width/t.height}function K(t,e){return Math.min(e.maxWidth?e.maxWidth/t.width:1/0,e.maxHeight?e.maxHeight/t.height:1/0)}function $(t,e){var n;return e.minimum&&I(t,e.minimum)?n=e.minimum:e.maximum&&P(t,e.maximum)&&(n=e.maximum),n}function J(t,e){var n=G(t),i=1;return e.minWidth>0&&e.minHeight>0?n>e.minWidth/e.minHeight?t.height<e.minHeight&&(i=e.minHeight/t.height):t.width<e.minWidth&&(i=e.minWidth/t.width):e.minWidth>0?t.width<e.minWidth&&(i=e.minWidth/t.width):e.minHeight>0&&t.height<e.minHeight&&(i=e.minHeight/t.height),e.maxWidth<1/0&&e.maxHeight<1/0?n>e.maxWidth/e.maxHeight?t.width>e.maxWidth&&(i=e.maxWidth/t.width):t.height>e.maxHeight&&(i=e.maxHeight/t.height):e.maxWidth<1/0?t.width>e.maxWidth&&(i=e.maxWidth/t.width):e.maxHeight<1/0&&t.height>e.maxHeight&&(i=e.maxHeight/t.height),i}function tt(t,e){var n={left:0,top:0,right:0,bottom:0};return O.forEach((function(i){var r=e[i],o=q(t)[i];n[i]=void 0!==r&&void 0!==o?"left"===i||"top"===i?Math.max(0,r-o):Math.max(0,o-r):0})),n}function et(t,e){return Z(t,J(t,e))}function nt(t,e){var n=e*Math.PI/180;return{width:Math.abs(t.width*Math.cos(n))+Math.abs(t.height*Math.sin(n)),height:Math.abs(t.width*Math.sin(n))+Math.abs(t.height*Math.cos(n))}}function it(t,e,n){var i=e*Math.PI/180;return n?{left:(t.left-n.left)*Math.cos(i)-(t.top-n.top)*Math.sin(i)+n.left,top:(t.left-n.left)*Math.sin(i)+(t.top-n.top)*Math.cos(i)+n.top}:{left:t.left*Math.cos(i)-t.top*Math.sin(i),top:t.left*Math.sin(i)+t.top*Math.cos(i)}}function rt(t){return{minWidth:0,minHeight:0,maxWidth:void 0!==t.right&&void 0!==t.left?t.right-t.left:1/0,maxHeight:void 0!==t.bottom&&void 0!==t.top?t.bottom-t.top:1/0}}function ot(t,e){var n={};return O.forEach((function(i){var r=t[i],o=e[i];void 0!==r&&void 0!==o?n[i]="left"===i||"top"===i?Math.max(r,o):Math.min(r,o):void 0!==o?n[i]=o:void 0!==r&&(n[i]=r)})),n}function at(t,e){var n={left:0,top:0},i=tt(t,e);return i.left&&i.left>0?n.left=i.left:i.right&&i.right>0&&(n.left=-i.right),i.top&&i.top>0?n.top=i.top:i.bottom&&i.bottom>0&&(n.top=-i.bottom),n}function st(t,e){return V(t,at(t,e))}function ct(t){return void 0===t&&(t={}),C(t)?{minimum:t,maximum:t}:{minimum:S(t.minimum)?t.minimum:0,maximum:S(t.maximum)?t.maximum:1/0}}function lt(t,e){return(b(e.maxWidth)||!P(t.width,e.maxWidth))&&(b(e.maxHeight)||!P(t.height,e.maxHeight))&&(b(e.minHeight)||!I(t.height,e.minHeight))&&(b(e.minWidth)||!I(t.width,e.minWidth))}function ht(t,e){return(b(e.left)||!I(t.left,e.left))&&(b(e.top)||!I(t.top,e.top))&&(b(e.right)||!P(t.left+t.width,e.right))&&(b(e.bottom)||!P(t.top+t.height,e.bottom))}function dt(t){return Boolean(t&&t.visibleArea&&t.coordinates)}function ut(t,e){return function(t,e){var n=w(e.areaSizeRestrictions)?e.areaSizeRestrictions(t,e):e.areaSizeRestrictions;n.maxWidth<1/0&&n.maxHeight<1/0&&(G(t.boundary)>n.maxWidth/n.maxHeight?n.maxHeight=n.maxWidth/G(t.boundary):n.maxWidth=n.maxHeight*G(t.boundary));return xt(n)}(t,e)}function ft(t,e){return w(e.areaPositionRestrictions)?e.areaPositionRestrictions(t,e):e.areaPositionRestrictions}function mt(t,e){return function(t,e){var n=w(e.sizeRestrictions)?e.sizeRestrictions(t,e):e.sizeRestrictions,i=pt(t,e),r={minWidth:S(n.minWidth)?E(n.minWidth):0,minHeight:S(n.minHeight)?E(n.minHeight):0,maxWidth:S(n.maxWidth)?E(n.maxWidth):1/0,maxHeight:S(n.maxHeight)?E(n.maxHeight):1/0};void 0!==i.left&&void 0!==i.right&&(r.maxWidth=Math.min(r.maxWidth,i.right-i.left));void 0!==i.bottom&&void 0!==i.top&&(r.maxHeight=Math.min(r.maxHeight,i.bottom-i.top));return xt(r)}(t,e)}function pt(t,e){return w(e.positionRestrictions)?e.positionRestrictions(t,e):e.positionRestrictions}function vt(t){return t.visibleArea?t.visibleArea.width/t.boundary.width:0}function gt(t){if(dt(t)){var e=t.coordinates,n=e.width,i=e.height,r=e.left,o=e.top,a=vt(t);return{width:n/a,height:i/a,left:(r-t.visibleArea.left)/a,top:(o-t.visibleArea.top)/a}}return{left:0,top:0,width:0,height:0}}function wt(t,e){return ct(w(e.aspectRatio)?e.aspectRatio(t,e):e.aspectRatio)}function bt(t,e){return w(e.defaultCoordinates)?e.defaultCoordinates(t,e):e.defaultCoordinates}function At(t,e){return w(e.defaultVisibleArea)?e.defaultVisibleArea(t,e):e.defaultVisibleArea}function yt(t){return t.imageSize&&t.imageSize.width&&t.imageSize.height?nt(t.imageSize,t.transforms.rotate):{width:0,height:0}}function Et(t,e){return!dt(t)||!$(G(t.coordinates),wt(t,e))&&lt(t.visibleArea,ut(t,e))&&lt(t.coordinates,mt(t,e))&&ht(t.visibleArea,ft(t,e))&&ht(t.coordinates,pt(t,e))}function xt(t){var e=o({},t);return e.minWidth>e.maxWidth&&(e.minWidth=e.maxWidth),e.minHeight>e.maxHeight&&(e.minHeight=e.maxHeight),e}function Ct(t,e){var n=t,i=o({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},e);return xt({maxHeight:Math.min(n.maxHeight,i.maxHeight),minHeight:Math.max(n.minHeight,i.minHeight),maxWidth:Math.min(n.maxWidth,i.maxWidth),minWidth:Math.max(n.minWidth,i.minWidth)})}function Mt(t){return H(t)}function St(t){var e=t.width,n=t.height,i=t.sizeRestrictions||{minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},r=ct(t.aspectRatio),o={width:Math.max(i.minWidth,Math.min(i.maxWidth,e)),height:Math.max(i.minHeight,Math.min(i.maxHeight,n))},a=[o];return r&&[r.minimum,r.maximum].forEach((function(t){t&&a.push({width:o.width,height:o.width/t},{width:o.height*t,height:o.height})})),function(t,e,n,i){var r=function(r){return t.reduce((function(t,o){var a=w(n)?n(o):n,s=a.maxHeight,c=a.maxWidth,l=a.minWidth,h=a.minHeight,d=ct(w(i)?i(o):i);return lt(o,r?{maxWidth:c,maxHeight:s}:{maxWidth:c,maxHeight:s,minWidth:l,minHeight:h})&&!$(G(o),d)&&o.width&&o.height&&(!t||I(j(o,e),j(t,e)))?o:t}),null)};return r()||r(!0)}(a=a.map((function(t){return et(t,i)})),{width:e,height:n},i,r)}function Rt(t,e){var n=Mt(t);if(t.visibleArea){var i=ut(t,e);n.visibleArea=o(o({},t.visibleArea),St({width:t.visibleArea.width,height:t.visibleArea.height,aspectRatio:{minimum:G(n.boundary),maximum:G(n.boundary)},sizeRestrictions:i})),n.visibleArea=V(n.visibleArea,Q(k(t.visibleArea),k(n.visibleArea))),n.visibleArea=st(n.visibleArea,ft(n,e))}return n}function zt(t,e,n){var i=V(t,e);return n?st(i,n):i}function Pt(t,e,n,i){void 0===i&&(i=!0);var r=!1===i?T.unsafe:!0===i?T.zoom:i,a=wt(t,e),s=mt(t,e);t.visibleArea&&r===T.limit&&(s=o(o({},s),{minWidth:Math.min(t.visibleArea.width,s.minWidth),minHeight:Math.min(t.visibleArea.height,s.minHeight),maxWidth:Math.min(t.visibleArea.width,s.maxWidth),maxHeight:Math.min(t.visibleArea.height,s.maxHeight)}));var c=pt(t,e);t.visibleArea&&r===T.limit&&(c=ot(c,q(t.visibleArea)));var l=function(t,e){return zt(t,{left:e.left-(t.left||0),top:e.top-(t.top||0)},c)},h=t.coordinates?o({},t.coordinates):{left:0,top:0,width:0,height:0};(Array.isArray(n)?n:[n]).forEach((function(n){var i;(i="function"===typeof n?n(o(o({},t),{coordinates:h}),e):n)&&(b(i.width)&&b(i.height)||(h=function(t,e){var n=o(o(o({},t),St({width:e.width,height:e.height,sizeRestrictions:s,aspectRatio:a})),{left:0,top:0});return l(n,{left:t.left||0,top:t.top||0})}(h,o(o({},h),i))),b(i.left)&&b(i.top)||(h=l(h,o(o({},h),i))))}));var d=o(o({},Mt(t)),{coordinates:h});if(d.visibleArea&&r===T.zoom){var u=Math.max(0,d.coordinates.width-d.visibleArea.width),f=Math.max(0,d.coordinates.height-d.visibleArea.height),m=ut(t,e),p=u>f?d.coordinates.width/d.visibleArea.width:d.coordinates.height/d.visibleArea.height;return p>1&&(d.visibleArea=Z(d.visibleArea,Math.min(p,K(d.visibleArea,m)))),d.visibleArea=V(d.visibleArea,Y(at(d.coordinates,q(d.visibleArea)))),Rt(d,e)}return d}function It(t,e){if(t.coordinates){var n=Mt(t),i=wt(t,e),r=mt(t,e);return n.coordinates=o(o({},t.coordinates),St({width:t.coordinates.width,height:t.coordinates.height,aspectRatio:i,sizeRestrictions:t.visibleArea?{maxWidth:Math.min(t.visibleArea.width,r.maxWidth),maxHeight:Math.min(t.visibleArea.height,r.maxHeight),minHeight:Math.min(t.visibleArea.height,r.minHeight),minWidth:Math.min(t.visibleArea.width,r.minWidth)}:r})),n.coordinates=V(n.coordinates,Q(k(t.coordinates),k(n.coordinates))),n.coordinates=st(n.coordinates,t.visibleArea?ot(q(t.visibleArea),pt(n,e)):pt(n,e)),n}return t}function Nt(t,e,n,i){void 0===i&&(i=!0);var r=o(o({},Mt(t)),{visibleArea:n});return r=Rt(r,e),i&&(r=It(r,e)),r}function Ht(t,e){var n,i,r,a,s,c=t.boundary,l=t.image,h={boundary:{width:c.width,height:c.height},imageSize:{width:l.width,height:l.height},transforms:{rotate:(null===(n=l.transforms)||void 0===n?void 0:n.rotate)||0,flip:{horizontal:(null===(r=null===(i=l.transforms)||void 0===i?void 0:i.flip)||void 0===r?void 0:r.horizontal)||!1,vertical:(null===(s=null===(a=l.transforms)||void 0===a?void 0:a.flip)||void 0===s?void 0:s.vertical)||!1}},visibleArea:null,coordinates:null};return e.defaultTransforms&&(h.transforms=function(t,e){var n=o(o({},t.transforms),{flip:o({},t.transforms.flip)});if(e.defaultTransforms){var i=w(e.defaultTransforms)?e.defaultTransforms(t,e):e.defaultTransforms;C(i.rotate)&&(n.rotate=i.rotate),i.flip&&(x(i.flip.horizontal)&&(n.flip.horizontal=i.flip.horizontal),x(i.flip.vertical)&&(n.flip.vertical=i.flip.vertical))}return n}(h,e)),h=e.priority===W.visibleArea?Pt(h=Nt(h,e,At(h,e),!1),e,bt(h,e),T.limit):Nt(h=Pt(h,e,bt(h,e),T.unsafe),e,At(h,e),!0)}function Ut(t,e,n){if(dt(t)){var i=Mt(t);return i.coordinates=V(i.coordinates,n),i.coordinates=st(i.coordinates,ot(q(i.visibleArea),pt(i,e))),i}return t}function _t(t){var e=t.coordinates,n=t.directions,i=t.positionRestrictions,r=t.sizeRestrictions,a=t.preserveRatio,s=t.allowedDirections,c=t.compensate,l=void 0===c||c,h=o({},n),d=X(e,h).width,u=X(e,h).height;d<0&&(h.left<0&&h.right<0?(h.left=-(e.width-r.minWidth)/(h.left/h.right),h.right=-(e.width-r.minWidth)/(h.right/h.left)):h.left<0?h.left=-(e.width-r.minWidth):h.right<0&&(h.right=-(e.width-r.minWidth))),u<0&&(h.top<0&&h.bottom<0?(h.top=-(e.height-r.minHeight)/(h.top/h.bottom),h.bottom=-(e.height-r.minHeight)/(h.bottom/h.top)):h.top<0?h.top=-(e.height-r.minHeight):h.bottom<0&&(h.bottom=-(e.height-r.minHeight)));var f=tt(X(e,h),i),m=O.every((function(t){return!P(f[(e=t,{left:"right",top:"bottom",right:"left",bottom:"top"}[e])],0)||s[t];var e}));l&&m&&(f.left&&f.left>0&&0===f.right?(h.right+=f.left,h.left-=f.left):f.right&&f.right>0&&0===f.left&&(h.left+=f.right,h.right-=f.right),f.top&&f.top>0&&0===f.bottom?(h.bottom+=f.top,h.top-=f.top):f.bottom&&f.bottom>0&&0===f.top&&(h.top+=f.bottom,h.bottom-=f.bottom),f=tt(X(e,h),i));var p={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(O.forEach((function(t){var e=f[t];e&&h[t]&&(p[t]=Math.max(0,1-e/h[t]))})),a){var v=Math.min.apply(Math,O.map((function(t){return p[t]})));v!==1/0&&O.forEach((function(t){h[t]*=v}))}else O.forEach((function(t){p[t]!==1/0&&(h[t]*=p[t])}));if(d=X(e,h).width,u=X(e,h).height,h.right+h.left&&(d>r.maxWidth?p.width=(r.maxWidth-e.width)/(h.right+h.left):d<r.minWidth&&(p.width=(r.minWidth-e.width)/(h.right+h.left))),h.bottom+h.top&&(u>r.maxHeight?p.height=(r.maxHeight-e.height)/(h.bottom+h.top):u<r.minHeight&&(p.height=(r.minHeight-e.height)/(h.bottom+h.top))),a){var g=Math.min(p.width,p.height);g!==1/0&&O.forEach((function(t){h[t]*=g}))}else p.width!==1/0&&L.forEach((function(t){h[t]*=p.width})),p.height!==1/0&&D.forEach((function(t){h[t]*=p.height}));return h}function Bt(t,e,n){return z(e+n,0)?t/2:z(e,0)?0:z(n,0)?t:t*Math.abs(e/(e+n))}function Ft(t,e){var n=e.toLowerCase();return{left:t.left+t.width*(-1!==n.indexOf("west")?1:-1!==n.indexOf("east")?0:.5),top:t.top+t.height*(-1!==n.indexOf("north")?1:-1!==n.indexOf("south")?0:.5)}}function Wt(t){var e=t.toLowerCase();return{left:-1===e.indexOf("east"),top:-1===e.indexOf("south"),right:-1===e.indexOf("west"),bottom:-1===e.indexOf("north")}}function Tt(t,e,n,i,r){var a=i.reference,s=function(t,e){var n=t.toLowerCase(),i={left:-1===n.indexOf("west")?e.left:-e.left,top:-e.top,right:e.left,bottom:e.top};["north","south","center"].every((function(t){return-1===n.indexOf(t)}))&&(i.top=0,i.bottom=0),["west","east","center"].every((function(t){return-1===n.indexOf(t)}))&&(i.left=0,i.right=0);var r=Wt(t);return O.forEach((function(t){r[t]||(i[t]=0)})),i}(e,n),c=Wt(e),l=function(t,e,n,i){var r=i.aspectRatio,a=i.positionRestrictions,s=i.sizeRestrictions,c=o({},t);e=o({},e);var l=n.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};t.width<s.minWidth&&(e.left=0,e.right=0),t.height<s.minHeight&&(e.top=0,e.bottom=0),O.forEach((function(t){l[t]||(e[t]=0)}));var h=X(c,e=_t({coordinates:c,directions:e,sizeRestrictions:s,positionRestrictions:a,allowedDirections:l})).width,d=X(c,e).height,u=n.preserveAspectRatio?G(c):$(h/d,r);if(u){var f=n.respectDirection;if("width"!==f&&"height"!==f&&(f=c.width>=c.height||1===u?"width":"height"),"width"===f){var m=h/u-c.height;if(l.top&&l.bottom){var p=e.top,v=e.bottom;e.bottom=Bt(m,v,p),e.top=Bt(m,p,v)}else l.bottom?e.bottom=m:l.top?e.top=m:l.right?e.right=0:l.left&&(e.left=0)}else if("height"===f){var g=c.width-d*u;if(l.left&&l.right){var w=e.left,b=e.right;e.left=-Bt(g,w,b),e.right=-Bt(g,b,w)}else l.left?e.left=-g:l.right?e.right=-g:l.top?e.top=0:l.bottom&&(e.bottom=0)}e=_t({directions:e,coordinates:c,sizeRestrictions:s,positionRestrictions:a,preserveRatio:!0,compensate:n.compensate,allowedDirections:l})}return h=X(c,e).width,d=X(c,e).height,(u=n.preserveAspectRatio?G(c):$(h/d,r))&&P(Math.abs(u-h/d),0)&&O.forEach((function(t){e[t]=0})),zt({width:t.width+e.right+e.left,height:t.height+e.top+e.bottom,left:t.left,top:t.top},{left:-e.left,top:-e.top},a)}(t,s,o(o({},i),{allowedDirections:c}),r);return a&&(l=V(l,Q(Ft(a,e),Ft(l,e)))),st(l,r.positionRestrictions)}function Ot(t,e,n,i,r){var a=function(t){return t.coordinates?Math.min(t.coordinates.width,t.coordinates.height,20*vt(t)):1}(t),s=mt(t,e);return dt(t)?o(o({},Mt(t)),{coordinates:Tt(t.coordinates,n,i,r,{positionRestrictions:ot(pt(t,e),q(t.visibleArea)),sizeRestrictions:{maxWidth:Math.min(s.maxWidth,t.visibleArea.width),maxHeight:Math.min(s.maxHeight,t.visibleArea.height),minWidth:Math.max(Math.min(s.minWidth,t.visibleArea.width),a),minHeight:Math.max(Math.min(s.minHeight,t.visibleArea.height),a)},aspectRatio:wt(t,e)})}):t}function Lt(t,e,n){var i=o(o({},Mt(t)),{boundary:n});if(i.visibleArea&&i.coordinates&&t.visibleArea){i.visibleArea.height=i.visibleArea.width/G(n),i.visibleArea.top+=(t.visibleArea.height-i.visibleArea.height)/2;var r=mt(i,e);(Math.max(r.minHeight,i.coordinates.height)-i.visibleArea.height>0||Math.max(r.minWidth,i.coordinates.width)-i.visibleArea.width>0)&&(i.visibleArea=Z(i.visibleArea,Math.max(Math.max(r.minHeight,i.coordinates.height)/i.visibleArea.height,Math.max(r.minWidth,i.coordinates.width)/i.visibleArea.width))),i.visibleArea=et(i.visibleArea,ut(i,e));var a=Y(at(i.coordinates,q(i.visibleArea)));i.visibleArea.width<i.coordinates.width&&(a.left=0),i.visibleArea.height<i.coordinates.height&&(a.top=0),i.visibleArea=V(i.visibleArea,a),i.visibleArea=st(i.visibleArea,ft(i,e)),i=It(i,e)}return i}function Dt(t,e,n){return n.rotate&&(t=function(t,e,n){if(dt(t)){var i=Mt(t),r=C(n)?n:n.angle,a=it(k(o({left:0,top:0},yt(t))),r);i.transforms.rotate+=r,i.coordinates=o(o({},St({sizeRestrictions:mt(i,e),aspectRatio:wt(i,e),width:i.coordinates.width,height:i.coordinates.height})),it(k(i.coordinates),r));var s=!C(n)&&n.center?n.center:k(t.coordinates),c=Q(k(t.coordinates),it(k(t.coordinates),r,s)),l=yt(i);return i.coordinates.left-=a.left-l.width/2+i.coordinates.width/2-c.left,i.coordinates.top-=a.top-l.height/2+i.coordinates.height/2-c.top,i.visibleArea=et(i.visibleArea,Ct(ut(i,e),{minWidth:i.coordinates.width,minHeight:i.coordinates.height})),i.coordinates=st(i.coordinates,pt(i,e)),i.visibleArea=V(i.visibleArea,Q(k(i.coordinates),k(t.coordinates))),i.visibleArea=st(i.visibleArea,ft(i,e)),i}return t}(t,e,n.rotate)),n.flip&&(t=function(t,e,n,i){if(dt(t)){var r=Mt(t),o=t.transforms.rotate,a=yt(t),s={horizontal:n,vertical:i};if(s.horizontal||s.vertical){var c=it({left:a.width/2,top:a.height/2},-o),l=it(k(r.coordinates),-o),h=it({left:s.horizontal?c.left-(l.left-c.left):l.left,top:s.vertical?c.top-(l.top-c.top):l.top},o);r.coordinates=V(r.coordinates,Q(h,k(r.coordinates))),l=it(k(r.visibleArea),-o),h=it({left:s.horizontal?c.left-(l.left-c.left):l.left,top:s.vertical?c.top-(l.top-c.top):l.top},o),r.visibleArea=V(r.visibleArea,Q(h,k(r.visibleArea))),r.visibleArea=st(r.visibleArea,ft(r,e))}return s.horizontal&&(r.transforms.flip.horizontal=!t.transforms.flip.horizontal),s.vertical&&(r.transforms.flip.vertical=!t.transforms.flip.vertical),r}return t}(t,e,n.flip.horizontal,n.flip.vertical)),(n.move||n.scale)&&(t=function(t,e,n){var i,r,o,a=n.scale,s=void 0===a?1:a,c=n.move,l=void 0===c?{}:c;if(dt(t)){var h=Mt(t),d=1/(C(s)?s:s.factor),u=C(s)?void 0:s.center,f=!z(d,1),m=1,p=1;h.visibleArea=V(h.visibleArea,{left:l.left||0,top:l.top||0});var v=mt(h,e),g=pt(h,e),w=ut(h,e),b={stencil:{minimum:Math.max(v.minWidth?v.minWidth/h.coordinates.width:0,v.minHeight?v.minHeight/h.coordinates.height:0),maximum:Math.min(v.maxWidth?v.maxWidth/h.coordinates.width:1/0,v.maxHeight?v.maxHeight/h.coordinates.height:1/0,K(h.coordinates,rt(g)))},area:{maximum:K(h.visibleArea,w),minimum:(r=h.visibleArea,o=w,Math.max(o.minWidth?o.minWidth/r.width:0,o.minHeight?o.minHeight/r.height:0))}};d&&f&&(d<1?(p=Math.max(d,Math.max(b.area.minimum,b.stencil.minimum)))>1&&(p=1):d>1&&(p=Math.min(d,Math.min(b.area.maximum,b.stencil.maximum)))<1&&(p=1)),p&&(h.visibleArea=Z(h.visibleArea,p,u));var A={left:t.coordinates.left-t.visibleArea.left,right:t.visibleArea.width+t.visibleArea.left-(t.coordinates.width+t.coordinates.left),top:t.coordinates.top-t.visibleArea.top,bottom:t.visibleArea.height+t.visibleArea.top-(t.coordinates.height+t.coordinates.top)};return h.visibleArea=st(h.visibleArea,{left:void 0!==g.left?g.left-A.left*p:void 0,top:void 0!==g.top?g.top-A.top*p:void 0,bottom:void 0!==g.bottom?g.bottom+A.bottom*p:void 0,right:void 0!==g.right?g.right+A.right*p:void 0}),h.visibleArea=st(h.visibleArea,ft(h,e)),h.coordinates.width=h.coordinates.width*p,h.coordinates.height=h.coordinates.height*p,h.coordinates.left=h.visibleArea.left+A.left*p,h.coordinates.top=h.visibleArea.top+A.top*p,h.coordinates=st(h.coordinates,ot(q(h.visibleArea),g)),f&&d&&(null===(i=e.transformImage)||void 0===i?void 0:i.adjustStencil)&&(d>1?m=Math.min(b.area.maximum,d)/p:d<1&&(m=Math.max(h.coordinates.height/h.visibleArea.height,h.coordinates.width/h.visibleArea.width,d/p)),1!==m&&(h.visibleArea=Z(h.visibleArea,m,d>1?u:k(h.coordinates)),h.visibleArea=st(h.visibleArea,ft(h,e)),h.visibleArea=V(h.visibleArea,Y(at(h.coordinates,q(h.visibleArea)))))),h}return t}(t,e,n)),t}function Qt(t,e){if(dt(t)){var n=Mt(t),i=wt(t,e),r=mt(t,e),a=ut(t,e),s=$(G(t.coordinates),i),c=s?{height:t.coordinates.height,width:t.coordinates.height*s}:t.coordinates;n.coordinates=o(o({},n.coordinates),St({width:c.width,height:c.height,aspectRatio:i,sizeRestrictions:Ct(a,r)})),n.coordinates=V(n.coordinates,Q(k(t.coordinates),k(n.coordinates)));var l=Math.max(n.coordinates.width/n.visibleArea.width,n.coordinates.height/n.visibleArea.height,1);return n.visibleArea=o(o({},t.visibleArea),St({width:t.visibleArea.width*l,height:t.visibleArea.height*l,aspectRatio:{minimum:G(n.boundary),maximum:G(n.boundary)},sizeRestrictions:a})),n.visibleArea=V(n.visibleArea,Q(k(t.visibleArea),k(n.visibleArea))),n.visibleArea=st(n.visibleArea,ft(n,e)),n.coordinates=st(n.coordinates,ot(q(n.visibleArea),pt(n,e))),n}return t}function kt(t,e){var n=vt(t);return t.visibleArea?{left:e.left*n+t.visibleArea.left,top:e.top*n+t.visibleArea.top}:e}function jt(t,e){if(t){var n=Math.abs(t.transforms.rotate%180);return n<=45||n>=135?e:{horizontal:e.vertical,vertical:e.horizontal}}return e}function Xt(t,e){var n=vt(t);return{left:C(e.left)?e.left*n:0,top:C(e.top)?e.top*n:0}}function Yt(t,e){var n=e.getBoundingClientRect(),i=n.left,r=n.top,o={left:0,top:0},a=0;return t.forEach((function(e){o.left+=(e.clientX-i)/t.length,o.top+=(e.clientY-r)/t.length})),t.forEach((function(t){a+=R({left:o.left,top:o.top},{left:t.clientX-i,top:t.clientY-r})})),{centerMass:o,spread:a,count:t.length}}function Vt(t,e,n){void 0===n&&(n=.1);var i=e.getBoundingClientRect(),r=i.left,o=i.top;return{scale:{factor:1-n*function(t){var e=+t;return 0===e||M(e)?e:e>0?1:-1}(t.deltaY||t.detail||t.wheelDelta),center:{left:t.clientX-r,top:t.clientY-o}}}}function qt(t){return t.moveCoordinates||t.resizeCoordinates||t.transformImage.move||t.transformImage.rotate||t.transformImage.flip||t.transformImage.scale}function Zt(t,e){var n=yt(t),i={};return e.imageRestriction&&"none"!==e.imageRestriction&&(i={left:0,top:0,right:n.width,bottom:n.height}),i}function Gt(t,e){var n,i=t.imageSize,r=t.visibleArea,a=mt(t,e),s=wt(t,e);if(r)n=r;else{var c=rt(pt(t,e));n={width:Math.max(c.minWidth,Math.min(c.maxWidth,i.width)),height:Math.max(c.minHeight,Math.min(c.maxHeight,i.height))}}var l=Math.min(s.maximum||1/0,Math.max(s.minimum||0,G(n))),h=n.width<n.height?{width:.8*n.width,height:.8*n.width/l}:{height:.8*n.height,width:.8*n.height*l};return St(o(o({},h),{aspectRatio:s,sizeRestrictions:a}))}function Kt(t,e){return function(t){return{minWidth:S(t.minWidth)?E(t.minWidth):0,minHeight:S(t.minHeight)?E(t.minHeight):0,maxWidth:S(t.maxWidth)?E(t.maxWidth):1/0,maxHeight:S(t.maxHeight)?E(t.maxHeight):1/0}}(e)}function $t(t){var e=t.visibleArea,n=t.coordinates,i=e||yt(t);return{left:(e?e.left:0)+i.width/2-(n?n.width/2:0),top:(e?e.top:0)+i.height/2-(n?n.height/2:0)}}function Jt(t,e){var n=t.visibleArea,i=t.boundary,r=e.imageRestriction,o=yt(t),a={};return r===F.fillArea?a={left:0,top:0,right:o.width,bottom:o.height}:r===F.fitArea&&(G(i)>G(o)?(a={top:0,bottom:o.height},n&&(n.width>o.width?(a.left=-(n.width-o.width)/2,a.right=o.width-a.left):(a.left=0,a.right=o.width))):(a={left:0,right:o.width},n&&(n.height>o.height?(a.top=-(n.height-o.height)/2,a.bottom=o.height-a.top):(a.top=0,a.bottom=o.height)))),a}function te(t,e){var n=t.boundary,i=e.imageRestriction,r=yt(t),o={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0};return i===F.fillArea?(o.maxWidth=r.width,o.maxHeight=r.height):i===F.fitArea&&(G(n)>G(r)?(o.maxHeight=r.height,o.maxWidth=r.height*G(n)):(o.maxWidth=r.width,o.maxHeight=r.width/G(n))),o}function ee(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}function ne(t,e){return t.aspectRatio?{}:{aspectRatio:ct(w(e.aspectRatio)?e.aspectRatio():e.aspectRatio)}}function ie(t){return function(e,n){var i=w(t)?t(e,n):t;return Ct(Kt(0,n),i)}}function re(t){return o(o({},t),{sizeRestrictions:function(e,n){return t.sizeRestrictions?w(t.sizeRestrictions)?t.sizeRestrictions(e,n):t.sizeRestrictions:Kt(0,n)},areaPositionRestrictions:function(e,n){return t.areaPositionRestrictions?w(t.areaPositionRestrictions)?t.areaPositionRestrictions(e,n):t.areaPositionRestrictions:Jt(e,n)},areaSizeRestrictions:function(e,n){return t.areaSizeRestrictions?w(t.areaSizeRestrictions)?t.areaSizeRestrictions(e,n):t.areaSizeRestrictions:te(e,n)},positionRestrictions:function(e,n){return t.positionRestrictions?w(t.positionRestrictions)?t.positionRestrictions(e,n):t.positionRestrictions:Zt(e,n)},defaultCoordinates:function(e,n){if(t.defaultCoordinates)return w(t.defaultCoordinates)?t.defaultCoordinates(e,n):t.defaultCoordinates;var i=t.defaultSize;i||(i=Gt);var r=w(i)?i(e,n):i,a=t.defaultPosition||$t;return[r,function(t){return o({},w(a)?a(t,n):a)}]},defaultVisibleArea:function(e,n){return t.defaultVisibleArea?w(t.defaultVisibleArea)?t.defaultVisibleArea(e,n):t.defaultVisibleArea:function(t,e){var n=t.coordinates,i=t.boundary,r=yt(t),a=G(i);if(n){var s={height:Math.max(n.height,r.height),width:Math.max(n.width,r.width)},c={left:0,top:0,width:G(s)>a?s.width:s.height*a,height:G(s)>a?s.width/a:s.height};(c=et(c,ut(t,e))).left=n.left+n.width/2-c.width/2,c.top=n.top+n.height/2-c.height/2;var l=tt(n,q(o({left:0,top:0},r))),h={};return!l.left&&!l.right&&c.width<=r.width&&(h.left=0,h.right=r.width),!l.top&&!l.bottom&&c.height<=r.height&&(h.top=0,h.bottom=r.height),st(c,h)}var d=G(r),u={height:d<a?r.height:r.width/a,width:d<a?r.height*a:r.width};return{left:r.width/2-u.width/2,top:r.height/2-u.height/2,width:u.width,height:u.height}}(e,n)},aspectRatio:function(e,n){return ct(w(t.aspectRatio)?t.aspectRatio(e,n):t.aspectRatio)}})}function oe(t,e){if(t&&e){var n=e();n&&t(n)}}function ae(t,e){t.forEach((function(t){oe(t,e)}))}!function(t){t.fillArea="fillArea",t.fitArea="fitArea",t.stencil="stencil",t.none="none"}(F||(F={})),function(t){t.coordinates="coordinates",t.visibleArea="visibleArea"}(W||(W={})),function(t){t.limit="limit",t.zoom="zoom",t.unsafe="unsafe"}(T||(T={}));var se=function(){var t=this;this.getTransitions=function(){var e=t.getData(),n=t.getProps().transitions;return o(o({},y(n,{timingFunction:"ease-in-out",duration:350})),{active:e.transitions})},this.getInteractions=function(){return H(t.getData().interactions)},this.hasInteractions=function(){return qt(t.getData().interactions)},this.startTransitions=function(){var e=t.getProps(),n=e.onTransitionsStart,i=e.onUpdate,r=e.getInstance,s=t.getData(),c=s.transitions,l=a(s,["transitions"]);t.setData(o(o({},l),{transitions:!0})),c||ae([n,i],r),t.endTransitions()},this.endTransitions=B((function(){var e=t.getProps(),n=e.onTransitionsEnd,i=e.onUpdate,r=e.getInstance;t.setData(o(o({},t.getData()),{transitions:!1})),ae([n,i],r)}),(function(){return t.getTransitions().duration})),this.applyPostProcess=function(e,n){var i,r=t.getProps(),o=r.settings,a=r.postProcess,s=e.name,c=e.interaction,l=void 0!==c&&c,h=e.transitions,d=void 0!==h&&h,u=e.immediately,f={name:s,interaction:l,transitions:d,immediately:void 0!==u&&u};return i=a,Array.isArray(i)?a.reduce((function(t,e){return e(t,o,f)}),n):w(a)?a(n,o,f):n},this.updateState=function(e,n,i){void 0===n&&(n={}),void 0===i&&(i=[]);var r=n.transitions,a=void 0!==r&&r,s=t.getProps(),c=s.onTransitionsStart,l=s.getInstance,h=s.onChange,d=s.onUpdate,u=s.settings,f=t.getData(),m=w(e)?e(f.state,u):e,p=m?.001*vt(m):.001,v=!U(f.state,m,p),g=["coordinates","boundary","visibleArea","imageSize","transforms"].some((function(t){var e;return!U(null===(e=f.state)||void 0===e?void 0:e[t],null===m||void 0===m?void 0:m[t],p)})),b=f;v&&(a&&g&&t.endTransitions(),b=o(o({},b),{state:Mt(m),transitions:a&&g}),t.setData(b),oe(h,l)),b.transitions&&!f.transitions&&oe(c,l),ae(function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(i,[d]),l)},this.setInteractions=function(e){var n=t.getProps(),i=n.onInteractionStart,r=n.onInteractionEnd,a=n.getInstance,s=t.getInteractions(),c=o(o({},s),e);if(U(s,c)||t.setData(o(o({},t.getData()),{interactions:c})),qt(s)!==qt(c))if(qt(s)){var l=t.getData().state;t.updateState((function(){return l&&t.applyPostProcess({name:"interactionEnd",immediately:!0,transitions:!0},l)}),{transitions:!0},[r])}else oe(i,a)},this.resetState=function(e,n){t.updateState(t.createDefaultState(e,n))},this.clear=function(){t.updateState(null)},this.reconcileState=function(e){void 0===e&&(e={});var n=t.getProps(),i=n.reconcileStateAlgorithm,r=n.settings,o=t.getData().state,a=e.transitions,s=void 0!==a&&a;if(o&&!Et(o,r)){var c=(i||Qt)(o,r);c=t.applyPostProcess({name:"reconcileState",immediately:!0,transitions:s},c),t.updateState(c,{transitions:s})}},this.transformImage=function(e,n){void 0===n&&(n={});var i=n.transitions,r=void 0===i||i,o=n.interaction,a=void 0===o||o,s=n.immediately,c=void 0!==s&&s,l=n.normalize,h=void 0===l||l,d=t.getProps(),u=d.transformImageAlgorithm,f=d.onTransformImage,m=d.onTransformImageEnd,p=d.settings,v=t.getData().state,g=[];if(v){h&&(e=function(t,e){return e.scale&&(e.scale={factor:C(e.scale)?e.scale:e.scale.factor,center:!C(e.scale)&&e.scale.center?kt(t,e.scale.center):void 0}),e.rotate&&(e.rotate={angle:C(e.rotate)?e.rotate:e.rotate.angle,center:!C(e.rotate)&&e.rotate.center?kt(t,e.rotate.center):void 0}),e.move&&(e.move=Xt(t,e.move)),e}(v,e));var w=t.applyPostProcess({name:"transformImage",transitions:r,immediately:c},(u||Dt)(v,p,e));g.push(f),a?t.setInteractions({transformImage:{rotate:!b(e.rotate),flip:!b(e.flip),scale:!b(e.scale),move:!b(e.move)}}):(w=t.applyPostProcess({name:"transformImageEnd",transitions:r,immediately:!0},w),g.push(m)),t.updateState(w,{transitions:c&&r},g)}},this.transformImageEnd=function(e){void 0===e&&(e={});var n=e.immediately,i=void 0===n||n,r=e.transitions,o=void 0===r||r,a=t.getData().state,s=t.getProps().onTransformImageEnd;t.updateState((function(){return a&&t.applyPostProcess({name:"transformImageEnd",immediately:i,transitions:o},a)}),{transitions:o},[s]),t.setInteractions({transformImage:{rotate:!1,flip:!1,scale:!1,move:!1}})},this.zoomImage=function(e,n){void 0===n&&(n={});var i=n.interaction,r=void 0!==i&&i,o=n.immediately,a=void 0===o||o,s=n.transitions,c=void 0===s||s,l=n.normalize,h=void 0!==l&&l;t.transformImage({scale:e},{interaction:r,immediately:a,transitions:c,normalize:h})},this.moveImage=function(e,n,i){void 0===i&&(i={});var r=i.interaction,o=void 0!==r&&r,a=i.immediately,s=void 0===a||a,c=i.transitions,l=void 0===c||c,h=i.normalize,d=void 0!==h&&h;t.transformImage({move:{left:e,top:n}},{interaction:o,immediately:s,transitions:l,normalize:d})},this.flipImage=function(e,n,i){void 0===i&&(i={});var r=i.interaction,o=void 0!==r&&r,a=i.immediately,s=void 0===a||a,c=i.transitions,l=void 0===c||c,h=i.normalize,d=void 0===h||h,u=t.getState(),f={horizontal:e,vertical:n};t.transformImage({flip:u&&d?jt(u,f):f},{interaction:o,immediately:s,transitions:l})},this.rotateImage=function(e,n){void 0===n&&(n={});var i=n.interaction,r=void 0!==i&&i,o=n.immediately,a=void 0===o||o,s=n.transitions,c=void 0===s||s,l=n.normalize,h=void 0!==l&&l;t.transformImage({rotate:e},{interaction:r,immediately:a,transitions:c,normalize:h})},this.reset=function(e,n){t.resetState(e,n)},this.setState=function(e,n){void 0===n&&(n={});var i=t.getSettings(),r=t.getData().state,a=n.transitions,s=void 0===a||a,c=n.immediately,l=void 0!==c&&c,h=n.interaction,d=void 0!==h&&h,u=n.postprocess,f=void 0!==u&&u,m=e&&(w(e)?e(r,i):o(o({},r),e));t.updateState((function(){return f?m&&t.applyPostProcess({name:"setState",immediately:l,transitions:s,interaction:d},m):m}),{transitions:s})},this.setCoordinates=function(e,n){void 0===n&&(n={});var i=t.getData().state,r=t.getProps(),o=r.setCoordinatesAlgorithm,a=r.settings,s=n.transitions,c=void 0===s||s,l=n.immediately,h=void 0===l||l;t.updateState((function(){return i&&t.applyPostProcess({name:"setCoordinates",immediately:h,transitions:c},(o||Pt)(i,a,e,T.zoom))}),{transitions:c})},this.setVisibleArea=function(e,n){void 0===n&&(n={});var i=n.transitions,r=void 0===i||i,o=n.immediately,a=void 0===o||o,s=t.getData().state,c=t.getProps(),l=c.setVisibleAreaAlgorithm,h=c.settings;t.updateState((function(){return s&&t.applyPostProcess({name:"setVisibleArea",immediately:a,transitions:r},(l||Nt)(s,h,e))}),{transitions:r})},this.setBoundary=function(e,n){void 0===n&&(n={});var i=t.getData().state,r=t.getProps(),o=r.setBoundaryAlgorithm,a=r.settings,s=n.transitions,c=void 0!==s&&s,l=n.immediately,h=void 0===l||l;e?t.updateState((function(){return i&&t.applyPostProcess({name:"setBoundary",immediately:h,transitions:c},(o||Lt)(i,a,e))})):t.updateState(null)},this.moveCoordinates=function(e,n){void 0===n&&(n={});var i=t.getData(),r=t.getProps(),o=r.moveCoordinatesAlgorithm,a=r.onMove,s=r.onMoveEnd,c=r.settings,l=n.interaction,h=void 0===l||l,d=n.transitions,u=void 0!==d&&d,f=n.immediately,m=void 0!==f&&f,p=n.normalize,v=void 0===p||p,g=[];if(!i.transitions&&i.state){var w=v?Xt(i.state,e):function(t){return{left:C(t.left)?t.left:0,top:C(t.top)?t.top:0}}(e),b=t.applyPostProcess({name:"moveCoordinates",interaction:h,immediately:m,transitions:u},(o||Ut)(i.state,c,w));g.push(a),h?t.setInteractions({moveCoordinates:!0}):(b=t.applyPostProcess({name:"moveCoordinatesEnd",interaction:h,immediately:m,transitions:u},b),g.push(s)),t.updateState(b,{transitions:m&&u},g)}},this.moveCoordinatesEnd=function(e){void 0===e&&(e={});var n=t.getData().state,i=t.getProps().onMoveEnd,r=e.transitions,o=void 0===r||r,a=e.immediately,s=void 0!==a&&a;t.updateState((function(){return n&&t.applyPostProcess({name:"moveCoordinatesEnd",transitions:o,immediately:s},n)}),{transitions:o},[i]),t.setInteractions({moveCoordinates:!1})},this.resizeCoordinates=function(e,n,i,r){void 0===r&&(r={});var o=t.getData().state,a=t.getProps(),s=a.resizeCoordinatesAlgorithm,c=a.onResize,l=a.onResizeEnd,h=a.settings,d=r.interaction,u=void 0===d||d,f=r.transitions,m=void 0!==f&&f,p=r.immediately,v=void 0!==p&&p,g=r.normalize,w=void 0===g||g;if(!t.getTransitions().active&&o){var b=[],y=w?function(t,e){var n=vt(t);return{left:C(e.left)?e.left*n:0,top:C(e.top)?e.top*n:0,right:C(e.right)?e.right*n:0,bottom:C(e.bottom)?e.bottom*n:0}}(o,n):function(t){return{left:C(t.left)?t.left:0,top:C(t.top)?t.top:0,right:C(t.right)?t.right:0,bottom:C(t.bottom)?t.bottom:0}}(n),E=t.applyPostProcess({name:"resizeCoordinates",interaction:u,immediately:v,transitions:m},(s||Ot)(o,h,e,y,A(i)?i:{}));b.push(c),u?t.setInteractions({resizeCoordinates:!0}):(E=t.applyPostProcess({name:"resizeCoordinatesEnd",interaction:u,immediately:v,transitions:m},E),b.push(l)),t.updateState(E,{transitions:v&&m},b)}},this.resizeCoordinatesEnd=function(e){void 0===e&&(e={});var n=t.getProps().onResizeEnd,i=t.getData().state,r=e.transitions,o=void 0===r||r,a=e.immediately,s=void 0!==a&&a;t.updateState((function(){return i&&t.applyPostProcess({name:"resizeCoordinatesEnd",transitions:o,immediately:s},i)}),{transitions:o},[n]),t.setInteractions({resizeCoordinates:!1})},this.getStencilCoordinates=function(){return gt(t.getData().state)},this.getCoordinates=function(e){void 0===e&&(e={});var n=t.getData().state,i=t.getProps().settings;if(n&&n.coordinates){var r=e.round;return void 0===r||r?function(t,e){if(dt(t)){var n=mt(t,e),i=pt(t,e),r={width:Math.round(t.coordinates.width),height:Math.round(t.coordinates.height),left:Math.round(t.coordinates.left),top:Math.round(t.coordinates.top)};return r.width>n.maxWidth?r.width=Math.floor(t.coordinates.width):r.width<n.minWidth&&(r.width=Math.ceil(t.coordinates.width)),r.height>n.maxHeight?r.height=Math.floor(t.coordinates.height):r.height<n.minHeight&&(r.height=Math.ceil(t.coordinates.height)),st(r,i)}return null}(n,i):o({},n.coordinates)}return null},this.getVisibleArea=function(){var e=t.getData().state;return(null===e||void 0===e?void 0:e.visibleArea)?o({},e.visibleArea):null},this.getSettings=function(){var e=t.getProps().settings;return o({},e)},this.getState=function(){return Mt(t.getData().state)},this.getTransforms=function(){var e=t.getData().state;return e?H(e.transforms):{rotate:0,flip:{horizontal:!1,vertical:!1}}},this.createDefaultState=function(e,n){var i=t.getProps(),r=i.createStateAlgorithm,o=i.settings;return t.applyPostProcess({name:"createState",immediately:!0,transitions:!1},(r||Ht)({image:n,boundary:e},o))},this.isConsistent=function(){var e=t.getData().state,n=t.getProps().settings;return!e||Et(e,n)}},ce={linear:function(t){return t},"ease-in":function(t){return Math.pow(t,1.675)},"ease-out":function(t){return 1-Math.pow(1-t,1.675)},"ease-in-out":function(t){return.5*(Math.sin((t-.5)*Math.PI)+1)}},le=function(){function t(){this.active=!1}return t.prototype.start=function(t){var e;this.onStart=t.onStart,this.onProgress=t.onProgress,this.onStop=t.onStop,this.active||null===(e=this.onStart)||void 0===e||e.call(this),this.id&&window.cancelAnimationFrame(this.id),this.startTime=performance.now(),this.timingFunction=t.timingFunction,this.endTime=this.startTime+t.duration,this.active=!0,this.animate()},t.prototype.animate=function(){var t=this;if(this.startTime&&this.endTime){var e=ce[this.timingFunction];e||(e=ce["ease-out"]);var n=1-(this.endTime-performance.now())/(this.endTime-this.startTime),i=Math.min(1,e(n));this.onProgress&&this.onProgress(i),n<1?this.id=window.requestAnimationFrame((function(){return t.animate()})):this.stop()}else this.stop()},t.prototype.stop=function(){this.active=!1,this.id&&window.cancelAnimationFrame(this.id),this.onStop&&this.onStop()},t}();function he(t,e,n,i,r){if(dt(t)){var a=t.transforms,s=t.coordinates,c=0!==a.rotate||a.flip.horizontal||a.flip.vertical?function(t,e,n){var i=n.rotate,r=n.flip,a={width:"naturalWidth"in e?e.naturalWidth:e.width,height:"naturalHeight"in e?e.naturalHeight:e.height},s=nt(a,i),c=t.getContext("2d");if(t.height=s.height,t.width=s.width,c){c.save();var l=it(k(o({left:0,top:0},a)),i);c.translate(-(l.left-s.width/2),-(l.top-s.height/2)),c.rotate(i*Math.PI/180),c.translate(r.horizontal?a.width:0,r.vertical?a.height:0),c.scale(r.horizontal?-1:1,r.vertical?-1:1),c.drawImage(e,0,0,a.width,a.height),c.restore()}return t}(i,e,a):e,l=o({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:1/0,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},r),h=function(t){return t.find((function(t){return S(t)}))},d=St({sizeRestrictions:{minWidth:h([l.width,l.minWidth])||0,minHeight:h([l.height,l.minHeight])||0,maxWidth:h([l.width,l.maxWidth])||1/0,maxHeight:h([l.height,l.maxHeight])||1/0},width:s.width,height:s.height,aspectRatio:{minimum:s.width/s.height,maximum:s.width/s.height}});if(l.maxArea&&d.width*d.height>l.maxArea){var u=Math.sqrt(l.maxArea/(d.width*d.height));d={width:Math.round(u*d.width),height:Math.round(u*d.height)}}return function(t,e,n,i,r){t.width=i?i.width:n.width,t.height=i?i.height:n.height;var o=t.getContext("2d");if(o){o.clearRect(0,0,t.width,t.height),r&&(r.imageSmoothingEnabled&&(o.imageSmoothingEnabled=r.imageSmoothingEnabled),r.imageSmoothingQuality&&(o.imageSmoothingQuality=r.imageSmoothingQuality),r.fillColor&&(o.fillStyle=r.fillColor,o.fillRect(0,0,t.width,t.height),o.save()));var a=n.left<0?-n.left:0,s=n.top<0?-n.top:0;o.drawImage(e,n.left+a,n.top+s,n.width,n.height,a,s,t.width,t.height)}return t}(n,c,s,d,l)}return null}function de(t,e,n){e.style.width="0px",e.style.height="0px",e.style.width=Math.max(t.clientWidth,n.width)+"px";var i=n.width/n.height;e.style.height=Math.max(t.clientHeight,e.clientWidth/i)+"px",e.style.width=e.clientHeight*i+"px"}function ue(t,e,n){e.style.width="0px",e.style.height="0px",e.style.width=Math.max(t.getBoundingClientRect().width,n.width)+"px";var i=n.width/n.height;e.style.height=Math.max(t.getBoundingClientRect().height,e.getBoundingClientRect().width/i)+"px",e.style.width=e.getBoundingClientRect().height*i+"px",e.clientWidth/e.clientHeight>t.clientWidth/t.clientHeight?e.clientWidth>t.clientWidth&&(e.style.width=t.clientWidth+"px",e.style.height=t.clientWidth/i+"px"):e.clientHeight>t.clientHeight&&(e.style.height=t.clientHeight+"px",e.style.width=t.clientHeight*i+"px")}var fe=4;function me(t){return new Promise((function(e,n){try{if(t)if(/^data:/i.test(t))e(function(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),n=e.length,i=new ArrayBuffer(n),r=new Uint8Array(i),o=0;o<n;o++)r[o]=e.charCodeAt(o);return i}(t));else if(/^blob:/i.test(t)){var i=new FileReader;i.onload=function(t){var n;e(null===(n=t.target)||void 0===n?void 0:n.result)},function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200!=this.status&&0!==this.status||e(this.response)},n.send()}(t,(function(t){i.readAsArrayBuffer(t)}))}else{var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===fe&&(200===r.status||0===r.status?e(r.response):n("Warning: could not load an image to parse its orientation"))},r.onprogress=function(){"image/jpeg"!==r.getResponseHeader("content-type")&&r.abort()},r.withCredentials=!1,r.open("GET",t,!0),r.responseType="arraybuffer",r.send(null)}else n("Error: the image is empty")}catch(o){n(o)}}))}function pe(t){var e=t.rotate,n=void 0===e?0:e,i=t.flip,r=void 0===i?{horizontal:!1,vertical:!1}:i,o=t.scale,a=void 0===o?1:o;return" rotate("+n+"deg) scaleX("+a*(r.horizontal?-1:1)+") scaleY("+a*(r.vertical?-1:1)+")"}function ve(t){try{var e,n=new DataView(t),i=void 0,r=void 0,o=void 0,a=void 0;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var s=n.byteLength,c=2;c+1<s;){if(255===n.getUint8(c)&&225===n.getUint8(c+1)){o=c;break}c++}if(o&&(i=o+10,"Exif"===function(t,e,n){var i,r="";for(i=e,n+=e;i<n;i++)r+=String.fromCharCode(t.getUint8(i));return r}(n,o+4,4))){var l=n.getUint16(i);if(((r=18761===l)||19789===l)&&42===n.getUint16(i+2,r)){var h=n.getUint32(i+4,r);h>=8&&(a=i+h)}}if(a)for(var d=n.getUint16(a,r),u=0;u<d;u++){c=a+12*u+2;if(274===n.getUint16(c,r)){c+=8,e=n.getUint16(c,r),n.setUint16(c,1,r);break}}return e}catch(f){return null}}function ge(t){var e=t.src,n=t.arrayBuffer,i=void 0===n?null:n,r=t.orientation,o=void 0===r?null:r,a={src:e,arrayBuffer:i,revoke:!1,transforms:{flip:{horizontal:!1,vertical:!1},rotate:0}};return i&&o&&o>1?p(e)||!v(e)?(a.src=URL.createObjectURL(new Blob([i])),a.revoke=!0):a.src=function(t){for(var e=[],n=new Uint8Array(t);n.length>0;){var i=n.subarray(0,8192);e.push(String.fromCharCode.apply(null,Array.from?Array.from(i):i.slice())),n=n.subarray(8192)}return"data:image/jpeg;base64,"+btoa(e.join(""))}(i):a.src=e,o&&(a.transforms=function(t){var e={flip:{horizontal:!1,vertical:!1},rotate:0};if(t)switch(t){case 2:e.flip.horizontal=!0;break;case 3:e.rotate=-180;break;case 4:e.flip.vertical=!0;break;case 5:e.rotate=90,e.flip.vertical=!0;break;case 6:e.rotate=90;break;case 7:e.rotate=90,e.flip.horizontal=!0;break;case 8:e.rotate=-90}return e}(o)),a}function we(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});var n=e.checkOrientation,i=e.parse;return new Promise((function(e){n||i?me(t).then((function(n){var i=ve(n);e(ge(n?{src:t,arrayBuffer:n,orientation:i}:{src:t,arrayBuffer:null,orientation:null}))})).catch((function(n){console.warn(n),e(ge({src:t}))})):e(ge({src:t}))}))}(t,o(o({},e),{crossOrigin:g(t)&&e.crossOrigin})).then((function(t){return new Promise((function(n,i){(function(t,e){return void 0===e&&(e={}),new Promise((function(n,i){var r=document.createElement("img");e.crossOrigin&&(r.crossOrigin=!0!==e.crossOrigin?e.crossOrigin:"anonymous"),r.src=t,r.style.visibility="hidden",r.style.position="fixed",document.body.appendChild(r),r.complete?(n(r),document.body.removeChild(r)):(r.addEventListener("load",(function(){n(r),document.body.removeChild(r)})),r.addEventListener("error",(function(){i(null),document.body.removeChild(r)})))}))})(t.src,e).then((function(e){n(o(o({},t),{width:e.naturalWidth,height:e.naturalHeight}))})).catch((function(){i(null)}))}))}))}function be(t,e,n,i,r){void 0===r&&(r=null);var a=t.width>t.height?{width:Math.min(512,t.width),height:Math.min(512,t.width)/(t.width/t.height)}:{height:Math.min(512,t.height),width:Math.min(512,t.height)*(t.width/t.height)},s=yt(e),c={rotate:e.transforms.rotate,flip:{horizontal:e.transforms.flip.horizontal,vertical:e.transforms.flip.vertical},translateX:n.left/i,translateY:n.top/i,scale:1/i},l={left:(a.width-s.width)/(2*i),top:(a.height-s.height)/(2*i)},h={left:(1-1/i)*a.width/2,top:(1-1/i)*a.height/2},d=o(o({},c),{scale:c.scale*(t.width/a.width)}),u={width:a.width+"px",height:a.height+"px",left:"0px",top:"0px",transition:"none",transform:"translate3d("+(-l.left-h.left-c.translateX)+"px, "+(-l.top-h.top-c.translateY)+"px, 0px)"+pe(d),willChange:"none"};return r&&r.active&&(u.willChange="transform",u.transition=r.duration+"ms "+r.timingFunction),u}function Ae(t,e,n){return n.immediately?function(t,e){if(dt(t)){var n=Mt(t),i={width:0,height:0};G(n.boundary)>G(n.coordinates)?(i.height=.8*n.boundary.height,i.width=i.height*G(n.coordinates)):(i.width=.8*n.boundary.width,i.height=i.width*G(n.coordinates)),n.visibleArea=Z(n.visibleArea,n.coordinates.width*n.boundary.width/(n.visibleArea.width*i.width));var r=J(n.visibleArea,ut(n,e));return n.visibleArea=Z(n.visibleArea,r),1!==r&&(i.height/=r,i.width/=r),n.visibleArea=V(n.visibleArea,Q(k(n.coordinates),k(n.visibleArea))),n.visibleArea=st(n.visibleArea,ft(n,e)),n.coordinates=st(n.coordinates,ot(q(n.visibleArea),pt(n,e))),n}return t}(t,e):t}function ye(){var t=(0,d.useRef)([]);return function(e){-1===t.current.indexOf(e)&&t.current.push(e)}}var Ee=function(t,e){var n=function(){var t=(0,d.useRef)(!0);return t.current?(t.current=!1,!0):t.current}();(0,d.useEffect)((function(){if(!n)return t()}),e)};var xe=function(t){function e(e,n){var i=t.call(this)||this;return i.props=e,i.notify=n,i.data={state:null,transitions:!1,interactions:{moveCoordinates:!1,resizeCoordinates:!1,transformImage:{rotate:!1,move:!1,scale:!1,flip:!1}}},i}return r(e,t),e.prototype.getProps=function(){return this.props()},e.prototype.setData=function(t){this.data=t,this.notify()},e.prototype.getData=function(){return this.data},e}(se);function Ce(){var t=l((0,d.useState)({}),2);t[0];var e=t[1];return function(){e({})}}function Me(t){var e=Ce(),n=function(t){var e=(0,d.useRef)(t);return e.current=t,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.current.apply(e,h([],l(t),!1))}}((function(){var e=t(),n=e.settings,i=a(e,["settings"]),r=o({imageRestriction:F.fitArea,transformImage:{adjustStencil:!0}},n),s=o({transitions:!0},i);return o({settings:o(o({},r),re(r))},s)}));return(0,d.useRef)(new xe(n,e)).current}var Se=function(t){var e=(0,d.useRef)(t),n=function(){e.current&&e.current()};(0,d.useEffect)((function(){e.current=t}),[t]),(0,d.useEffect)((function(){return window.addEventListener("resize",n),window.addEventListener("orientationchange",n),function(){window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}}),[])};function Re(t){var e=this,n=t(),i=n.src,r=n.onReady,a=n.onError,h=n.onUpdate,u=n.canvas,f=void 0===u||u,m=n.unloadTime,p=void 0===m?500:m,v=n.crossOrigin,g=void 0===v||v,w=n.checkOrientation,A=void 0===w||w,y=n.autoReconcileState,E=void 0===y||y,x=(0,d.useRef)(null),C=(0,d.useRef)(null),M=(0,d.useRef)(null),S=(0,d.useRef)(null),R=l(function(t){var e=l((0,d.useState)(t),2),n=e[0],i=e[1],r=l((0,d.useState)(null),2),o=r[0],a=r[1],s=(0,d.useRef)(t);return Ee((function(){o&&o(n,s.current)}),[o]),[n,function(t,e){s.current=n,i(t),a((function(){return e}))}]}(null),2),z=R[0],P=R[1],I=Me((function(){return o(o({},t()),{getInstance:function(){return S.current}})})),H=function(t){var e=t.src,n=t.onLoadingStart,i=t.onLoadingEnd,r=t.onError,o=t.onLoad,a=t.crossOrigin,s=t.checkOrientation,c=t.canvas,h=t.unloadTime,u=l((0,d.useState)(!1),2),f=u[0],m=u[1],p=l((0,d.useState)(!1),2),v=p[0],g=p[1],w=l((0,d.useState)(null),2),A=w[0],y=w[1],E=(0,d.useRef)(null);return(0,d.useEffect)((function(){if(E.current!==e)if(E.current=e||null,g(!1),e){m(!0),null===n||void 0===n||n();var t=[we(e,{crossOrigin:b(a)?c:a,checkOrientation:s})];v&&h&&t.push(N(h)),Promise.all(t).then((function(t){var n=l(t,1)[0];E.current===e&&(y(n),null===o||void 0===o||o(n))})).catch((function(){E.current===e&&(null===r||void 0===r||r())})).finally((function(){E.current===e&&(null===i||void 0===i||i(),m(!1))}))}else h?N(h).then((function(){y(null)})):y(null)}),[e]),(0,d.useEffect)((function(){A&&g(!0)}),[A]),{isLoading:function(){return f},isLoaded:function(){return v},getImage:function(){return A},setImage:y}}({src:i,crossOrigin:g,checkOrientation:A,unloadTime:p,canvas:f,onLoad:function(){S.current&&(null===r||void 0===r||r(S.current))},onError:function(){S.current&&(null===a||void 0===a||a(S.current))}}),U=function(t,e){void 0===e&&(e=!0);var n=l((0,d.useState)(e),2),i=n[0],r=n[1];return(0,d.useLayoutEffect)((function(){i&&!t.hasInteractions()&&t.reconcileState()})),{pause:function(){r(!1)},resume:function(){r(!0)}}}(I,E),_=function(){return s(e,void 0,void 0,(function(){var t,e,n;return c(this,(function(i){switch(i.label){case 0:return C.current?(U.pause(),t=H.getImage(),[4,null===(n=C.current)||void 0===n?void 0:n.stretchTo(t)]):[3,2];case 1:e=i.sent(),P(t,(function(){e&&t?I.reset(e,t):I.clear()})),U.resume(),i.label=2;case 2:return[2]}}))}))},B=function(){return s(e,void 0,void 0,(function(){var t,e,n,i;return c(this,(function(r){switch(r.label){case 0:return C.current?(U.pause(),t=H.getImage(),[4,null===(i=C.current)||void 0===i?void 0:i.stretchTo(t)]):[3,2];case 1:(e=r.sent())&&t?(n=I.getState())?e.width===n.boundary.width&&e.height===n.boundary.height||(I.setBoundary(e),I.reconcileState()):I.reset(e,t):I.clear(),U.resume(),r.label=2;case 2:return[2]}}))}))},F={reset:function(){return _()},refresh:function(){return B()},setImage:function(t){return P(t)},reconcileState:I.reconcileState,moveCoordinates:I.moveCoordinates,moveCoordinatesEnd:I.moveCoordinatesEnd,resizeCoordinates:I.resizeCoordinates,clear:I.clear,resizeCoordinatesEnd:I.resizeCoordinatesEnd,moveImage:I.moveImage,flipImage:I.flipImage,zoomImage:I.zoomImage,rotateImage:I.rotateImage,transformImage:I.transformImage,transformImageEnd:I.transformImageEnd,setCoordinates:I.setCoordinates,setVisibleArea:I.setVisibleArea,startTransitions:I.startTransitions,setState:I.setState,hasInteractions:I.hasInteractions,getStencilCoordinates:I.getStencilCoordinates,getCoordinates:I.getCoordinates,getVisibleArea:I.getVisibleArea,getTransforms:I.getTransforms,getTransitions:I.getTransitions,getInteractions:I.getInteractions,getSettings:I.getSettings,getState:I.getState,getDefaultState:function(){var t=I.getState(),e=H.getImage();return t&&e?I.createDefaultState(t.boundary,e):null},getCanvas:function(t){var e=I.getState();return x.current&&M.current&&e?M.current.draw(e,x.current,t):null},getImage:function(){return z?o({},z):null},isLoading:H.isLoading,isLoaded:H.isLoaded};return Se((function(){B()})),Ee((function(){_()}),[H.getImage()]),Ee((function(){S.current&&(null===h||void 0===h||h(S.current))}),[H.isLoaded(),H.isLoading()]),(0,d.useImperativeHandle)(S,(function(){return F})),{cropper:F,refs:{image:x,boundary:C,canvas:M},image:z}}var ze=(0,d.forwardRef)((function(t,e){var n=t.className,i=t.style,r=t.stretcherClassName,o=t.contentClassName,a=t.stretchAlgorithm,s=void 0===a?de:a,c=t.sizeAlgorithm,l=void 0===c?ee:c,h=t.children,u=(0,d.useRef)(null),m=(0,d.useRef)(null);return(0,d.useImperativeHandle)(e,(function(){return{reset:function(){var t=u.current;t&&(t.style.height="",t.style.width="")},stretchTo:function(t){var e=u.current,n=m.current;if((null===t||void 0===t?void 0:t.width)&&(null===t||void 0===t?void 0:t.height)&&e&&n){s(n,e,t);var i=l(n,t);return Promise.resolve(i.width&&i.height?i:null)}return e&&(e.style.height="",e.style.width=""),Promise.resolve(null)}}})),d.createElement("div",{ref:m,style:i,className:f()("advanced-cropper-boundary",n)},d.createElement("div",{ref:u,className:f()(["advanced-cropper-boundary__stretcher",r])}),d.createElement("div",{className:f()(["advanced-cropper-boundary__content",o])},h))}));ze.displayName="StretchableBoundary";var Pe=function(t){var e=t.visible,n=t.className,i=t.style,r=t.children;return d.createElement("div",{style:i,className:f()(n,"advanced-cropper-fade",Boolean(e)&&"advanced-cropper-fade--visible")},r)},Ie=function(t){var e=t.cropper,n=t.children,i=t.className,r=t.style,o=e?e.getState():null,a=!!e&&e.isLoaded();return d.createElement("div",{className:f()(i,"advanced-cropper-wrapper"),style:r},d.createElement(Pe,{visible:o&&a,className:"advanced-cropper-wrapper__fade"},n))};function Ne(t){t.preventDefault()}var He=(0,d.forwardRef)((function(t,e){var n=t.className,i=t.style,r=t.cropper,a=t.crossOrigin,s=void 0===a||a,c=r.getState(),l=r.getTransitions(),h=r.getImage(),u=h&&c?function(t,e,n){return void 0===n&&(n=null),t&&e&&e.visibleArea?be(t,e,e.visibleArea,vt(e),n):{}}(h,c,l):{},m=h?h.src:void 0;return m?d.createElement("img",{key:m,ref:e,className:f()("advanced-cropper-background-image",n),src:m,crossOrigin:!0===s?"anonymous":s||void 0,style:o(o({},u),i),onMouseDown:Ne}):null}));He.displayName="CropperBackgroundImage";var Ue=(0,d.forwardRef)((function(t,e){var n=(0,d.useRef)(null),i=(0,d.useRef)(null);return(0,d.useImperativeHandle)(e,(function(){return{draw:function(t,e,r){return void 0===r&&(r={}),e&&n.current&&i.current?he(t,e,n.current,i.current,r):null}}})),d.createElement(d.Fragment,null,d.createElement("canvas",{className:"advanced-cropper-canvas",ref:n}),d.createElement("canvas",{className:"advanced-cropper-canvas",ref:i}))}));Ue.displayName="CropperCanvas";var _e=function(t){function e(e){var n=t.call(this,e)||this;return n.processMove=function(t,e){var i,r=n.container.current;if(r&&n.touches.length){var o=r.getBoundingClientRect(),a=o.left,s=o.top;if(1===n.touches.length&&1===e.length&&n.props.onMove){var c={left:Math.abs(e[0].clientX-n.anchor.left-a)<Math.abs(n.touches[0].clientX-n.anchor.left-a),top:Math.abs(e[0].clientY-n.anchor.top-s)<Math.abs(n.touches[0].clientY-n.anchor.top-s)},d={left:0,top:0};n.props.useAnchor&&c.left||(d.left=e[0].clientX-n.touches[0].clientX),n.props.useAnchor&&c.top||(d.top=e[0].clientY-n.touches[0].clientY),null===(i=n.props)||void 0===i||i.onMove(d,t),n.touches=h([],l(e),!1)}}},n.processEnd=function(){var t=n.props,e=t.onMoveEnd,i=t.onLeave;!n.props.disabled&&n.touches.length&&(null===e||void 0===e||e()),n.hovered&&(null===i||void 0===i||i(),n.hovered=!1),n.touches=[]},n.initAnchor=function(t){var e=n.container.current;if(e){var i=e.getBoundingClientRect(),r=i.left,o=i.top;n.anchor={left:t.clientX-r,top:t.clientY-o}}},n.onMouseOver=function(){var t=n.props,e=t.onEnter,i=t.disabled;n.hovered||i||(n.hovered=!0,null===e||void 0===e||e())},n.onMouseLeave=function(){var t=n.props.onLeave;n.hovered&&!n.touches.length&&(n.hovered=!1,null===t||void 0===t||t())},n.onTouchStart=function(t){var e=n.props,i=e.onEnter,r=e.onMoveStart,o=e.disabled;if(t.cancelable){n.touches=Array.from(t.touches);var a=!o&&1===t.touches.length;a&&(n.touches=Array.from(t.touches),null===r||void 0===r||r()),n.hovered||o||(n.hovered=!0,null===i||void 0===i||i()),(n.started||a)&&(t.preventDefault(),t.stopPropagation())}},n.onTouchEnd=function(){n.started=!1,n.processEnd()},n.onTouchMove=function(t){n.touches.length>=1&&(n.started?(n.processMove(t,Array.from(t.touches)),t.preventDefault(),t.stopPropagation()):R({left:n.touches[0].clientX,top:n.touches[0].clientY},{left:t.touches[0].clientX,top:t.touches[0].clientY})>(n.props.activationDistance||0)&&(n.initAnchor({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),n.started=!0))},n.onMouseDown=function(t){var e=n.props,i=e.onMoveStart;if(!e.disabled&&0===t.button){var r={clientX:t.clientX,clientY:t.clientY};n.touches=[r],n.initAnchor(r),t.stopPropagation(),null===i||void 0===i||i()}},n.onMouseMove=function(t){!n.props.disabled&&n.touches.length&&(n.processMove(t,[{clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation())},n.onMouseUp=function(){n.processEnd()},n.touches=[],n.hovered=!1,n.started=!1,n.anchor={left:0,top:0},n.container=(0,d.createRef)(),n}return r(e,t),e.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var t=this.container.current;t&&(t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("mousedown",this.onMouseDown))},e.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var t=this.container.current;t&&(t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}))},e.prototype.componentDidUpdate=function(t){this.props.disabled&&!t.disabled&&(this.touches=[])},e.prototype.render=function(){var t=this.props,e=t.children,n=t.className;return d.createElement("div",{className:f()("advanced-cropper-draggable-element",n),ref:this.container,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},e)},e.defaultProps={disabled:!1,activationDistance:30,useAnchor:!0,rerender:!0},e}(d.Component),Be=function(t){var e=t.position,n=t.className,i=t.disabled,r=t.onDrag,o=t.onDragEnd,a=t.onLeave,s=t.onEnter,c=t.children;return d.createElement(_e,{className:f()(["advanced-cropper-line-wrapper",e&&"advanced-cropper-line-wrapper--".concat(e),n]),disabled:i,onMove:r,onMoveEnd:o,onLeave:a,onEnter:s,activationDistance:0},d.createElement("div",{className:f()(["advanced-cropper-line-wrapper__content",e&&"advanced-cropper-line-wrapper__content--".concat(e)])},c))},Fe=function(t){var e,n,i=t.position,r=t.hoverClassName,o=t.wrapperClassName,a=t.defaultClassName,s=t.disabled,c=t.onMove,h=t.onMoveEnd,u=l((0,d.useState)(!1),2),m=u[0],p=u[1];return d.createElement(Be,{className:f()("advanced-cropper-simple-line-wrapper",o,(e={},e["advanced-cropper-simple-line-wrapper--".concat(i)]=!!i,e)),position:i,disabled:s,onDrag:c,onDragEnd:h,onLeave:function(){p(!1)},onEnter:function(){p(!0)}},d.createElement("div",{className:f()("advanced-cropper-simple-line",m&&"advanced-cropper-simple-line--hover",a,m&&r,(n={},n["advanced-cropper-simple-line--".concat(i)]=!!i,n))}))},We=function(t){var e=t.horizontalPosition,n=t.verticalPosition,i=t.className,r=t.disabled,o=t.onDrag,a=t.onDragEnd,s=t.onLeave,c=t.onEnter,l=t.children,h=t.style,u=e||n?m(e,n).snakeCase:null;return d.createElement("div",{style:h,className:f()(i,"advanced-cropper-handler-wrapper",u&&"advanced-cropper-handler-wrapper--".concat(u),r&&"advanced-cropper-handler-wrapper--disabled")},d.createElement(_e,{className:"advanced-cropper-handler-wrapper__draggable",disabled:r,onMove:o,onMoveEnd:a,onLeave:s,onEnter:c,activationDistance:0},l))},Te=function(t){var e,n=t.verticalPosition,i=t.horizontalPosition,r=t.hoverClassName,o=t.wrapperClassName,a=t.defaultClassName,s=t.wrapperStyle,c=t.disabled,h=t.onMove,u=t.onMoveEnd,m=l((0,d.useState)(!1),2),p=m[0],v=m[1];return d.createElement(We,{style:s,className:f()("advanced-cropper-simple-handler-wrapper",o,n&&"advanced-cropper-simple-handler-wrapper--".concat(n),i&&"advanced-cropper-simple-handler-wrapper--".concat(i),i&&n&&"advanced-cropper-simple-handler-wrapper--".concat(i,"-").concat(n),p&&"advanced-cropper-simple-handler-wrapper--hover"),verticalPosition:n,horizontalPosition:i,disabled:c,onDrag:h,onDragEnd:u,onLeave:function(){v(!1)},onEnter:function(){v(!0)}},d.createElement("div",{className:f()("advanced-cropper-simple-handler",p&&"advanced-cropper-simple-handler--hover",a,p&&r,(e={},e["advanced-cropper-simple-handler--".concat(n)]=!!n,e["advanced-cropper-simple-handler--".concat(i)]=!!i,e["advanced-cropper-simple-handler--".concat(i,"-").concat(n)]=i&&n,e))}))},Oe=["east","west",null],Le=["south","north",null],De=function(t){var e=t.style,n=t.className,i=t.children,r=t.onResize,o=t.onResizeEnd,a=t.handlerComponent,s=void 0===a?Te:a,c=t.handlers,h=void 0===c?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:c,u=t.handlerClassNames,p=void 0===u?{}:u,v=t.handlerWrapperClassNames,g=void 0===v?{}:v,w=t.lines,b=void 0===w?{west:!0,north:!0,east:!0,south:!0}:w,y=t.lineComponent,E=void 0===y?Fe:y,x=t.lineClassNames,C=void 0===x?{}:x,M=t.lineWrapperClassNames,S=void 0===M?{}:M,R=t.disabled,z=void 0!==R&&R,P=t.reference,I=void 0===P?null:P,N=l((0,d.useState)(null),2),H=N[0],U=N[1],B=(0,d.useMemo)((function(){var t=[];return Oe.forEach((function(e){Le.forEach((function(n){if(e!==n){var i=m(e,n),r=i.snakeCase,o=i.camelCase;r&&o&&t.push({name:o,className:r,verticalPosition:n,horizontalPosition:e})}}))})),t}),[]),F=(0,d.useMemo)((function(){var t=[];return B.forEach((function(e){_(e.name)&&(A(b)?b[e.name]:b)&&t.push({name:e.name,component:E,className:f()(C.default,C[e.name],z&&C.disabled),wrapperClassName:f()("advanced-cropper-bounding-box__line","advanced-cropper-bounding-box__line--".concat(e.name),S.default,S[e.name],z&&S.disabled),hoverClassName:C.hover,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,disabled:z})})),t}),[B,b,E,C,S,z]),W=(0,d.useMemo)((function(){var t=[];return B.forEach((function(e){(A(h)?h[e.name]:h)&&t.push({name:e.name,component:s,className:f()(p.default,p[e.name]),containerClassName:f()("advanced-cropper-bounding-box__handler-wrapper","advanced-cropper-bounding-box__handler-wrapper--".concat(e.className)),wrapperClassName:f()("advanced-cropper-bounding-box__handler","advanced-cropper-bounding-box__handler--".concat(e.className),g.default,g[e.name]),hoverClassName:p.hover,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,disabled:z})})),t}),[B,h,s,p,g,z]),T=function(t,e){return function(n,i){var o,a={left:n.left,top:n.top};if(!e&&t?o="width":e&&!t&&(o="height"),!z){if(r){var s=m(t,e).camelCase;s&&r(s,a,{reference:H||I,preserveAspectRatio:i&&i.shiftKey,respectDirection:o,compensate:!0})}H||U(I)}}},O=function(){null===o||void 0===o||o(),U(null)};return d.createElement("div",{className:f()("advanced-cropper-bounding-box",n),style:e},i,d.createElement("div",null,F.map((function(t){return d.createElement(t.component,{key:t.name,defaultClassName:t.className,hoverClassName:t.hoverClassName,wrapperClassName:t.wrapperClassName,position:t.name,disabled:t.disabled,onMove:T(t.horizontalPosition,t.verticalPosition),onMoveEnd:O})}))),d.createElement("div",null,W.map((function(t){var e=d.createElement(t.component,{defaultClassName:t.className,hoverClassName:t.hoverClassName,wrapperClassName:t.wrapperClassName,horizontalPosition:t.horizontalPosition,verticalPosition:t.verticalPosition,disabled:t.disabled,onMove:T(t.horizontalPosition,t.verticalPosition),onMoveEnd:O});return d.createElement("div",{key:t.name,className:t.containerClassName},e)}))))},Qe=function(t){var e=t.className,n=t.children;return d.createElement("div",{className:f()("advanced-cropper-stencil-overlay",e)},n)};var ke=function(t){var e=t.className,n=t.transitions,i=t.children,r=a(t,["className","transitions","children"]),s=(0,d.useRef)(null),c=(0,d.useRef)(r),h=l((0,d.useState)(r),2),u=h[0],m=h[1],p=l(function(t){void 0===t&&(t=null);var e=(0,d.useRef)(new le),n=l((0,d.useState)(!1),2),i=n[0],r=n[1];return[function(n){t&&t.active?e.current.start(o(o({},t),{onStart:function(){r(!0)},onProgress:function(t){n(t)},onStop:function(){r(!1)}})):e.current.active||n(1)},i]}(n),2),v=p[0],g=p[1];(0,d.useLayoutEffect)((function(){if(!U(u,r)){m(r);var t=g?o({},c.current):u;v((function(e){["left","top","height","width"].forEach((function(n){var i=r[n],o=t[n];c.current[n]=C(o)&&C(i)?o+(i-o)*e:i})),s.current&&(s.current.style.width="".concat(c.current.width,"px"),s.current.style.height="".concat(c.current.height,"px"),s.current.style.transform="translate3d(".concat(c.current.left,"px, ").concat(c.current.top,"px, 0px)"))}))}}),[u,g,r.width,r.height,r.top,r.left]);var w=g?c.current:r,b={left:0,top:0,width:"".concat(w.width,"px"),height:"".concat(w.height,"px"),transform:"translate3d(".concat(w.left,"px, ").concat(w.top,"px, 0px)")};return d.createElement("div",{ref:s,className:f()("advanced-cropper-artificial-transition",e),style:b},i)},je=function(t){var e=t.className,n=t.transitions,i=t.width,r=t.height,o=t.left,a=t.top,s=t.children;return d.createElement(ke,{className:f()("advanced-cropper-stencil-wrapper",e),transitions:n,width:i,height:r,top:a,left:o},s)},Xe=function(t){var e=t.columns,n=void 0===e?3:e,i=t.rows,r=void 0===i?3:i,o=t.visible,a=void 0!==o&&o,s=t.className,c=[],h=l((0,d.useState)(n),2),u=h[0],m=h[1],p=l((0,d.useState)(r),2),v=p[0],g=p[1];Ee((function(){a&&(g(r),m(n))}),[a,n,r]);for(var w=0;w<v;w++){for(var b=[],A=0;A<u;A++)b.push(d.createElement("div",{key:A,className:f()("advanced-cropper-stencil-grid__cell",0===w&&"advanced-cropper-stencil-grid__cell--top",w===v-1&&"advanced-cropper-stencil-grid__cell--bottom",0===A&&"advanced-cropper-stencil-grid__cell--left",A===u-1&&"advanced-cropper-stencil-grid__cell--right")}));c.push(d.createElement("div",{key:w,className:"advanced-cropper-stencil-grid__row"},b))}return d.createElement("div",{className:f()("advanced-cropper-stencil-grid",a&&"advanced-cropper-stencil-grid--visible",s)},c)},Ye=(0,d.forwardRef)((function(t,e){var n=t.cropper,i=t.coordinates,r=t.aspectRatio,o=t.minAspectRatio,a=t.maxAspectRatio,s=t.handlerComponent,c=void 0===s?Te:s,l=t.handlers,h=void 0===l?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:l,u=t.handlerClassNames,m=void 0===u?{}:u,p=t.handlerWrapperClassNames,v=void 0===p?{}:p,g=t.lines,b=void 0===g?{west:!0,north:!0,east:!0,south:!0}:g,A=t.lineComponent,y=void 0===A?Fe:A,E=t.lineClassNames,x=void 0===E?{}:E,C=t.lineWrapperClassNames,M=void 0===C?{}:C,S=t.resizable,R=void 0===S||S,z=t.movable,P=void 0===z||z,I=t.grid,N=t.gridClassName,H=t.className,U=t.movingClassName,_=t.resizingClassName,B=t.previewClassName,F=t.boundingBoxClassName,W=t.overlayClassName,T=t.draggableAreaClassName,O=n.getState(),L=n.getTransitions(),D=n.getInteractions();(0,d.useImperativeHandle)(e,(function(){return{aspectRatio:ct(r||{minimum:o,maximum:a})}}));var Q=i?w(i)?i(O):i:gt(O),k=Q.width,j=Q.height,X=Q.left,Y=Q.top;return O&&d.createElement(je,{className:f()("advanced-cropper-rectangle-stencil",H,D.moveCoordinates&&U,D.resizeCoordinates&&_,{"advanced-cropper-rectangle-stencil--movable":P,"advanced-cropper-rectangle-stencil--moving":D.moveCoordinates,"advanced-cropper-rectangle-stencil--resizable":R,"advanced-cropper-rectangle-stencil--resizing":D.resizeCoordinates}),width:k,height:j,left:X,top:Y,transitions:L},d.createElement(De,{reference:O.coordinates,className:f()(F,"advanced-cropper-rectangle-stencil__bounding-box"),handlers:h,handlerComponent:c,handlerClassNames:m,handlerWrapperClassNames:v,lines:b,lineComponent:y,lineClassNames:x,lineWrapperClassNames:M,onResize:function(t,e,i){n&&R&&n.resizeCoordinates(t,e,i)},onResizeEnd:function(){n&&n.resizeCoordinatesEnd()},disabled:!R},d.createElement(_e,{disabled:!P,onMove:function(t){n&&P&&n.moveCoordinates(t)},onMoveEnd:function(){n&&n.moveCoordinatesEnd()},className:f()("advanced-cropper-rectangle-stencil__draggable-area",T)},d.createElement(Qe,{className:f()("advanced-cropper-rectangle-stencil__overlay",W)},I&&d.createElement(Xe,{visible:n.hasInteractions(),columns:D.transformImage.rotate?9:3,rows:D.transformImage.rotate?9:3,className:f()("advanced-cropper-rectangle-stencil__grid",N)}),d.createElement("div",{className:f()("advanced-cropper-rectangle-stencil__preview",B)})))))}));Ye.displayName="RectangleStencil";var Ve,qe=function(){function t(t){var e=t.active;this.active=e,this.defaultPrevented=!1}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t}(),Ze=function(t){function e(e){var n=t.call(this,e)||this;return n.processMove=function(t){var e=n.props,i=e.onTransform,r=e.touchScale,o=e.touchMove,a=e.touchRotate,s=n.container.current;s&&i&&(i(function(t,e,n,i){var r,o,a;if(void 0===i&&(i={}),1===e.length&&1===t.length)i.move&&(r={left:e[0].clientX-t[0].clientX,top:e[0].clientY-t[0].clientY});else if(t.length>1){var s=Yt(e,n),c=Yt(t,n);if(i.rotate&&2===e.length&&2===t.length){var l={left:[t[0].clientX-t[1].clientX,e[0].clientX-e[1].clientX],top:[t[0].clientY-t[1].clientY,e[0].clientY-e[1].clientY]},h=l.left[0]*l.top[1]-l.left[1]*l.top[0],d=l.left[0]*l.left[1]+l.top[0]*l.top[1];if(!z(d,0)&&!z(h,0)){var u=-180*Math.atan2(h,d)/Math.PI;a={center:c.centerMass,angle:u}}}i.move&&(r={left:s.centerMass.left-c.centerMass.left,top:s.centerMass.top-c.centerMass.top}),i.scale&&(o={factor:c.spread/s.spread,center:c.centerMass})}return{move:r,scale:o,rotate:a}}(t,n.touches,s,{scale:r,rotate:a,move:o})),n.touches=t)},n.processEnd=function(){var t=n.props.onTransformEnd;n.transforming&&(n.transforming=!1,t&&t())},n.processStart=function(){n.transforming=!0,n.debouncedProcessEnd.clear()},n.processEvent=function(t){var e=n.props,i=e.onEvent,r=e.disabled,o=new qe({active:n.transforming});return i?i(o,t):(t.preventDefault(),t.stopPropagation()),!r&&!o.defaultPrevented},n.onWheel=function(t){var e=n.props,i=e.onTransform,r=e.wheelScale,o=n.container.current;r&&n.processEvent(t)&&(n.processStart(),i&&o&&i(Vt(t,o,!0===r?.1:r.ratio)),n.touches.length||n.debouncedProcessEnd())},n.onTouchStart=function(t){var e=n.props,i=e.touchMove,r=e.touchScale,o=e.touchRotate;if(t.cancelable&&(i||(r||o)&&t.touches.length>1)&&n.processEvent(t)){var a=n.container.current;if(a){var s=a.getBoundingClientRect(),c=s.left,l=s.top,h=s.bottom,d=s.right;n.touches=Array.from(t.touches).filter((function(t){return t.clientX>c&&t.clientX<d&&t.clientY>l&&t.clientY<h}))}}},n.onTouchEnd=function(t){0===t.touches.length&&(n.touches=[],n.processEnd())},n.onTouchMove=function(t){if(n.touches.length){var e=h([],l(t.touches),!1).filter((function(t){return!t.identifier||n.touches.find((function(e){return e.identifier===t.identifier}))}));n.processEvent(t)&&(n.processMove(e),n.processStart())}},n.onMouseDown=function(t){if(n.props.mouseMove&&"buttons"in t&&1===t.buttons&&n.processEvent(t)){var e={clientX:t.clientX,clientY:t.clientY};n.touches=[e],n.processStart()}},n.onMouseMove=function(t){n.touches.length&&n.processEvent(t)&&n.processMove([{clientX:t.clientX,clientY:t.clientY}])},n.onMouseUp=function(){n.touches=[],n.processEnd()},n.transforming=!1,n.touches=[],n.anchor={left:0,top:0},n.container=(0,d.createRef)(),n.debouncedProcessEnd=B(n.processEnd,e.timeout),n}return r(e,t),e.prototype.shouldComponentUpdate=function(){return!0},e.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var t=this.container.current;t&&(t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("wheel",this.onWheel))},e.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var t=this.container.current;t&&(t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}))},e.prototype.render=function(){var t=this.props,e=t.className,n=t.children,i=t.style;return d.createElement("div",{className:e,style:i,ref:this.container},n)},e.defaultProps={touchMove:!0,mouseMove:!0,touchScale:!0,touchRotate:!1,wheelScale:!0,timeout:500},e}(d.Component),Ge=function(t){var e=t.scaleImage,n=void 0===e||e,i=t.moveImage,r=void 0===i||i,o=t.rotateImage,a=void 0!==o&&o,s=t.children,c=t.className,l=t.style,h=t.cropper,u=t.timeout,f=h.getTransitions(),m=function(t){return(0,d.useMemo)((function(){return y(t,{touch:!0},{touch:!1})}),[t])}(a),p=function(t){return(0,d.useMemo)((function(){return y(t,{touch:!0,wheel:{ratio:.1}},{touch:!1,wheel:!1})}),[t])}(n),v=function(t){return(0,d.useMemo)((function(){return y(t,{touch:!0,mouse:!0},{touch:!1,mouse:!1})}),[t])}(r);return d.createElement(Ze,{className:c,style:l,onTransform:h.transformImage,onTransformEnd:h.transformImageEnd,touchMove:v.touch,mouseMove:v.mouse,touchScale:p.touch,wheelScale:p.wheel,touchRotate:m.touch,disabled:f.active,timeout:u},s)},Ke=(Ve=function(t,e){var n=t.style,i=t.className,r=t.stencilComponent,s=void 0===r?Ye:r,c=t.stencilConstraints,l=void 0===c?ne:c,h=t.stencilProps,u=void 0===h?{}:h,m=t.wrapperComponent,p=void 0===m?Ie:m,v=t.wrapperProps,g=void 0===v?{}:v,w=t.backgroundComponent,b=void 0===w?He:w,A=t.backgroundProps,y=void 0===A?{}:A,E=t.backgroundClassName,x=t.backgroundWrapperComponent,C=void 0===x?Ge:x,M=t.backgroundWrapperProps,S=void 0===M?{}:M,R=t.boundaryComponent,z=void 0===R?ze:R,P=t.boundaryProps,I=t.boundaryClassName,N=t.canvas,H=void 0===N||N,U=t.crossOrigin,_=void 0===U||U,B=t.settings,F=a(t,["style","className","stencilComponent","stencilConstraints","stencilProps","wrapperComponent","wrapperProps","backgroundComponent","backgroundProps","backgroundClassName","backgroundWrapperComponent","backgroundWrapperProps","boundaryComponent","boundaryProps","boundaryClassName","canvas","crossOrigin","settings"]),W=(0,d.useRef)(null),T=Re((function(){return o(o({},F),{crossOrigin:_,stencilProps:u,canvas:H,settings:o(o({},B),l(B,o(o({},u),W.current)))})})),O=T.cropper,L=T.image,D=T.refs,Q=s,k=p,j=C,X=b,Y=z;(0,d.useImperativeHandle)(e,(function(){return O}));var V={loading:O.isLoading(),loaded:O.isLoaded()};return d.createElement(k,o({},g,{className:f()("advanced-cropper",i),cropper:O,style:n},V),d.createElement(Y,o({},P,{ref:D.boundary,className:f()("advanced-cropper__boundary",I)}),d.createElement(j,o({},S,{cropper:O,className:"advanced-cropper__background-wrapper"}),O.getState()&&d.createElement(X,o({},y,{ref:D.image,crossOrigin:_,cropper:O,className:f()("advanced-cropper__background",E)})),d.createElement(Q,o({},u,{ref:W,cropper:O,image:L}))),H&&d.createElement(Ue,{ref:D.canvas})))},(0,d.forwardRef)(Ve)),$e=["transformImage","moveCoordinates","resizeCoordinates","defaultCoordinates","defaultVisibleArea","areaPositionRestrictions","areaSizeRestrictions","sizeRestrictions","positionRestrictions","aspectRatio","minWidth","minHeight","maxWidth","maxHeight","defaultSize","defaultPosition","defaultTransforms","imageRestriction","priority"];function Je(t,e){void 0===e&&(e=$e);var n={settings:{},props:{}};return Object.keys(t).forEach((function(i){e.some((function(t){return t===i}))?n.settings[i]=t[i]:n.props[i]=t[i]})),n}function tn(t,e){var n=ne({},e);return{stencilSize:function(e,i){var r,a,s=w(t.stencilSize)?t.stencilSize(e,i):t.stencilSize;return St(o(o({},s),{aspectRatio:(r=n.aspectRatio,a=ct(G(s)),a?r?{minimum:Math.min(r.maximum,Math.max(r.minimum,a.minimum)),maximum:Math.max(r.minimum,Math.min(r.maximum,a.maximum))}:a:r)}))}}}function en(t,e){var n=t.boundary,i=w(e.stencilSize)?e.stencilSize(t,e):e.stencilSize;return(i.width>n.width||i.height>n.height)&&(i=St({sizeRestrictions:{maxWidth:n.width,maxHeight:n.height,minWidth:0,minHeight:0},width:i.width,height:i.height,aspectRatio:{minimum:G(i),maximum:G(i)}})),i}function nn(t,e){var n=en(t,o(o({},e),{stencilSize:e.stencilSize})),i=ut(t,e);return{maxWidth:i.maxWidth*n.width/t.boundary.width,maxHeight:i.maxHeight*n.height/t.boundary.height,minWidth:0,minHeight:0}}function rn(t,e){var n,i,r=t.imageSize,o=t.visibleArea,a=t.boundary,s=mt(t,e),c=wt(t,e),l=w(e.stencilSize)?e.stencilSize(t,e):e.stencilSize,h=o||r;return G(h)>G(a)?i=(n=l.height*h.height/a.height)*G(l):n=(i=l.width*h.width/a.width)/G(l),St({width:i,height:n,aspectRatio:c,sizeRestrictions:s})}function on(t,e){var n=G(en(t,e));return{minimum:n,maximum:n}}function an(t,e,n){return n&&n.immediately?function(t,e){if(dt(t)){var n=Mt(t),i=en(t,e);n.visibleArea=Z(n.visibleArea,n.coordinates.width*n.boundary.width/(n.visibleArea.width*i.width));var r=J(n.visibleArea,ut(n,e));return 1!==r&&(n.visibleArea=Z(n.visibleArea,r),n.coordinates=Z(n.coordinates,r)),n.visibleArea=V(n.visibleArea,Q(k(n.coordinates),k(n.visibleArea))),n.visibleArea=st(n.visibleArea,ft(n,e)),n.coordinates=st(n.coordinates,ot(q(n.visibleArea),ft(n,e))),n}return t}(t,e):t}var sn=(0,d.forwardRef)((function(t,e){var n=Je(t,h(h([],l($e),!1),["stencilSize"],!1));return d.createElement(Ke,o({postProcess:an,stencilConstraints:tn},n.props,{settings:o(o({defaultSize:rn,aspectRatio:on,sizeRestrictions:ie(nn)},n.settings),{transformImage:o(o({},n.settings.transformImage),{adjustStencil:!1})}),ref:e}))}));sn.displayName="FixedCropper";var cn=(0,d.forwardRef)((function(t,e){var n=Je(t),i=n.props,r=n.settings,s=r.stencilSize,c=r.autoZoom,l=a(r,["stencilSize","autoZoom"]),h=ye();return b(c)||(i.postProcess||s?h("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function."):(h("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'"),i.postProcess=Ae)),b(s)?d.createElement(Ke,o({},i,{ref:e,settings:l})):(h("prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead."),d.createElement(sn,o({ref:e,stencilSize:s},l,i)))}));cn.displayName="CropperComponent",(0,d.forwardRef)((function(t,e){var n=t.cropper,i=t.coordinates,r=t.handlerComponent,o=void 0===r?Te:r,a=t.handlers,s=void 0===a?{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}:a,c=t.handlerClassNames,l=void 0===c?{}:c,h=t.handlerWrapperClassNames,u=void 0===h?{}:h,m=t.lines,p=void 0===m?{west:!0,north:!0,east:!0,south:!0}:m,v=t.lineComponent,g=void 0===v?Fe:v,b=t.lineClassNames,A=void 0===b?{}:b,y=t.lineWrapperClassNames,E=void 0===y?{}:y,x=t.resizable,C=void 0===x||x,M=t.movable,S=void 0===M||M,R=t.grid,z=t.gridClassName,P=t.className,I=t.movingClassName,N=t.resizingClassName,H=t.previewClassName,U=t.boundingBoxClassName,_=t.overlayClassName,B=t.draggableAreaClassName,F=n.getState(),W=n.getTransitions(),T=n.getInteractions();(0,d.useImperativeHandle)(e,(function(){return{aspectRatio:1,boundingBox:"circle"}}));var O=i?w(i)?i(F):i:gt(F),L=O.width,D=O.height,Q=O.left,k=O.top;return F&&d.createElement(je,{className:f()("advanced-cropper-circle-stencil",P,T.moveCoordinates&&I,T.resizeCoordinates&&N,{"advanced-cropper-circle-stencil--movable":S,"advanced-cropper-circle-stencil--moving":T.moveCoordinates,"advanced-cropper-circle-stencil--resizable":C,"advanced-cropper-circle-stencil--resizing":T.resizeCoordinates}),width:L,height:D,left:Q,top:k,transitions:W},d.createElement(De,{reference:F.coordinates,className:f()(U,"advanced-cropper-circle-stencil__bounding-box"),handlers:s,handlerComponent:o,handlerClassNames:l,handlerWrapperClassNames:u,lines:p,lineComponent:g,lineClassNames:A,lineWrapperClassNames:E,onResize:function(t,e,i){n&&C&&n.resizeCoordinates(t,e,i)},onResizeEnd:function(){n&&n.resizeCoordinatesEnd()},disabled:!C},d.createElement(_e,{disabled:!S,onMove:function(t){n&&S&&n.moveCoordinates(t)},onMoveEnd:function(){n&&n.moveCoordinatesEnd()},className:f()("advanced-cropper-circle-stencil__draggable-area",B)},d.createElement(Qe,{className:f()("advanced-cropper-circle-stencil__overlay",_)},R&&d.createElement(Xe,{visible:n.hasInteractions(),columns:T.transformImage.rotate?9:3,rows:T.transformImage.rotate?9:3,className:f()("advanced-cropper-circle-stencil__grid",z)}),d.createElement("div",{className:f()("advanced-cropper-circle-stencil__preview",H)})))))})).displayName="CircleStencil",(0,d.forwardRef)((function(t,e){var n=t.src,i=t.crossOrigin,r=void 0===i||i,s=a(t,["src","crossOrigin"]);return n?d.createElement("img",o({key:n,ref:e,src:n,className:f()("advanced-cropper-source"),crossOrigin:!0===r?"anonymous":r||void 0},s)):null})).displayName="CropperSource";var ln=function(t){var e=t.children,n=t.cropper,i=t.className,r=t.style;return d.createElement("div",{className:f()(i,"cropper-preview-wrapper"),style:r},d.createElement(Pe,{visible:null===n||void 0===n?void 0:n.isLoaded(),className:"cropper-preview-wrapper__fade"},e))},hn=function(t){var e=t.className,n=t.cropper,i=t.crossOrigin,r=void 0===i||i,a=t.size,s=t.style,c=n.getState(),l=n.getTransitions(),h=n.getImage(),u=a&&h&&(null===c||void 0===c?void 0:c.coordinates)?function(t,e,n,i){return void 0===i&&(i=null),t&&e&&e.visibleArea&&e.coordinates?be(t,e,e.coordinates,G(e.coordinates)>G(n)?e.coordinates.width/n.width:e.coordinates.height/n.height,i):{}}(h,c,a,l):{},m=h?h.src:void 0;return m?d.createElement("img",{key:m,className:f()("advanced-cropper-background-image",e),src:m,crossOrigin:!0===r?"anonymous":r||void 0,style:o(o({},u),s),onMouseDown:Ne}):null};(0,d.forwardRef)((function(t,e){var n,i,r,a,s=t.className,c=t.contentClassName,h=t.state,u=void 0===h?null:h,m=t.image,p=void 0===m?null:m,v=t.transitions,g=void 0===v?null:v,w=t.backgroundComponent,b=void 0===w?hn:w,A=t.backgroundProps,y=t.backgroundClassName,E=t.wrapperComponent,x=void 0===E?ln:E,C=t.wrapperProps,M=t.loaded,S=void 0===M||M,R=t.loading,z=void 0!==R&&R,I=t.style,N=t.cropper,H=Ce(),U=(0,d.useRef)(null),_=N||{current:{getState:function(){return u},getTransitions:function(){return g},getImage:function(){return p},isLoaded:function(){return S},isLoading:function(){return z}}},B=l((0,d.useState)(null),2),F=B[0],W=B[1],T=null===(i=null===(n=_.current)||void 0===n?void 0:n.getState())||void 0===i?void 0:i.coordinates,O=null===(a=null===(r=_.current)||void 0===r?void 0:r.getImage())||void 0===a?void 0:a.src,L=F?{width:"".concat(F.width,"px"),height:"".concat(F.height,"px")}:{},D=function(){U.current&&T&&U.current.stretchTo(T).then((function(t){t&&T?P(G(T),G(t))?W({width:t.width,height:t.width/G(T)}):W({width:t.height*G(T),height:t.height}):W(null)})),H()};Se(D),(0,d.useLayoutEffect)(D,[null===T||void 0===T?void 0:T.height,null===T||void 0===T?void 0:T.width]),(0,d.useImperativeHandle)(e,(function(){return{refresh:H}}));var Q=x,k=b;return d.createElement(Q,o({},C,{className:f()(s,"advanced-cropper-preview"),cropper:_.current,style:I}),d.createElement(ze,{ref:U,className:"advanced-cropper-preview__boundary",contentClassName:"advanced-cropper-preview__boundary-content",stretchAlgorithm:ue},d.createElement("div",{className:f()(c,"advanced-cropper-preview__content"),style:L},_.current&&d.createElement(k,o({},A,{cropper:_.current,size:F,className:f()(y,"advanced-cropper-preview__image",O&&"advanced-cropper-preview__image--visible")})))))}))},7984:(t,e,n)=>{"use strict";function i(t,e){return new Promise((function(n,i){let o;return r(t).then((function(t){try{return o=t,n(new Blob([e.slice(0,2),o,e.slice(2)],{type:"image/jpeg"}))}catch(t){return i(t)}}),i)}))}n.d(e,{Z:()=>F});const r=t=>new Promise(((e,n)=>{const i=new FileReader;i.addEventListener("load",(t=>{let{target:{result:i}}=t;const r=new DataView(i);let o=0;if(65496!==r.getUint16(o))return n("not a valid JPEG");for(o+=2;;){const t=r.getUint16(o);if(65498===t)break;const a=r.getUint16(o+2);if(65505===t&&1165519206===r.getUint32(o+4)){const t=o+10;let s;switch(r.getUint16(t)){case 18761:s=!0;break;case 19789:s=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==r.getUint16(t+2,s))return n("TIFF header contains invalid version");const c=r.getUint32(t+4,s),l=t+c+2+12*r.getUint16(t+c,s);for(let e=t+c+2;e<l;e+=12)if(274==r.getUint16(e,s)){if(3!==r.getUint16(e+2,s))return n("Orientation data type is invalid");if(1!==r.getUint32(e+4,s))return n("Orientation data count is invalid");r.setUint16(e+8,1,s);break}return e(i.slice(o,o+2+a))}o+=2+a}return e(new Blob)})),i.readAsArrayBuffer(t)}));var o={},a={get exports(){return o},set exports(t){o=t}};!function(t){var e,n,i={};a.exports=i,i.parse=function(t,e){for(var n=i.bin.readUshort,r=i.bin.readUint,o=0,a={},s=new Uint8Array(t),c=s.length-4;101010256!=r(s,c);)c--;o=c,o+=4;var l=n(s,o+=4);n(s,o+=2);var h=r(s,o+=2),d=r(s,o+=4);o+=4,o=d;for(var u=0;u<l;u++){r(s,o),o+=4,o+=4,o+=4,r(s,o+=4),h=r(s,o+=4);var f=r(s,o+=4),m=n(s,o+=4),p=n(s,o+2),v=n(s,o+4);o+=6;var g=r(s,o+=8);o+=4,o+=m+p+v,i._readLocal(s,g,a,h,f,e)}return a},i._readLocal=function(t,e,n,r,o,a){var s=i.bin.readUshort,c=i.bin.readUint;c(t,e),s(t,e+=4),s(t,e+=2);var l=s(t,e+=2);c(t,e+=2),c(t,e+=4),e+=4;var h=s(t,e+=8),d=s(t,e+=2);e+=2;var u=i.bin.readUTF8(t,e,h);if(e+=h,e+=d,a)n[u]={size:o,csize:r};else{var f=new Uint8Array(t.buffer,e);if(0==l)n[u]=new Uint8Array(f.buffer.slice(e,e+r));else{if(8!=l)throw"unknown compression method: "+l;var m=new Uint8Array(o);i.inflateRaw(f,m),n[u]=m}}},i.inflateRaw=function(t,e){return i.F.inflate(t,e)},i.inflate=function(t,e){return t[0],t[1],i.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),e)},i.deflate=function(t,e){null==e&&(e={level:6});var n=0,r=new Uint8Array(50+Math.floor(1.1*t.length));r[n]=120,r[n+1]=156,n+=2,n=i.F.deflateRaw(t,r,n,e.level);var o=i.adler(t,0,t.length);return r[n+0]=o>>>24&255,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=o>>>0&255,new Uint8Array(r.buffer,0,n+4)},i.deflateRaw=function(t,e){null==e&&(e={level:6});var n=new Uint8Array(50+Math.floor(1.1*t.length)),r=i.F.deflateRaw(t,n,r,e.level);return new Uint8Array(n.buffer,0,r)},i.encode=function(t,e){null==e&&(e=!1);var n=0,r=i.bin.writeUint,o=i.bin.writeUshort,a={};for(var s in t){var c=!i._noNeed(s)&&!e,l=t[s],h=i.crc.crc(l,0,l.length);a[s]={cpr:c,usize:l.length,crc:h,file:c?i.deflateRaw(l):l}}for(var s in a)n+=a[s].file.length+30+46+2*i.bin.sizeUTF8(s);n+=22;var d=new Uint8Array(n),u=0,f=[];for(var s in a){var m=a[s];f.push(u),u=i._writeHeader(d,u,s,m,0)}var p=0,v=u;for(var s in a)m=a[s],f.push(u),u=i._writeHeader(d,u,s,m,1,f[p++]);var g=u-v;return r(d,u,101010256),u+=4,o(d,u+=4,p),o(d,u+=2,p),r(d,u+=2,g),r(d,u+=4,v),u+=4,u+=2,d.buffer},i._noNeed=function(t){var e=t.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(e)},i._writeHeader=function(t,e,n,r,o,a){var s=i.bin.writeUint,c=i.bin.writeUshort,l=r.file;return s(t,e,0==o?67324752:33639248),e+=4,1==o&&(e+=2),c(t,e,20),c(t,e+=2,0),c(t,e+=2,r.cpr?8:0),s(t,e+=2,0),s(t,e+=4,r.crc),s(t,e+=4,l.length),s(t,e+=4,r.usize),c(t,e+=4,i.bin.sizeUTF8(n)),c(t,e+=2,0),e+=2,1==o&&(e+=2,e+=2,s(t,e+=6,a),e+=4),e+=i.bin.writeUTF8(t,e,n),0==o&&(t.set(l,e),e+=l.length),e},i.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,i=0;i<8;i++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}(),update:function(t,e,n,r){for(var o=0;o<r;o++)t=i.crc.table[255&(t^e[n+o])]^t>>>8;return t},crc:function(t,e,n){return 4294967295^i.crc.update(4294967295,t,e,n)}},i.adler=function(t,e,n){for(var i=1,r=0,o=e,a=e+n;o<a;){for(var s=Math.min(o+5552,a);o<s;)r+=i+=t[o++];i%=65521,r%=65521}return r<<16|i},i.bin={readUshort:function(t,e){return t[e]|t[e+1]<<8},writeUshort:function(t,e,n){t[e]=255&n,t[e+1]=n>>8&255},readUint:function(t,e){return 16777216*t[e+3]+(t[e+2]<<16|t[e+1]<<8|t[e])},writeUint:function(t,e,n){t[e]=255&n,t[e+1]=n>>8&255,t[e+2]=n>>16&255,t[e+3]=n>>24&255},readASCII:function(t,e,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[e+r]);return i},writeASCII:function(t,e,n){for(var i=0;i<n.length;i++)t[e+i]=n.charCodeAt(i)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,n){for(var r,o="",a=0;a<n;a++)o+="%"+i.bin.pad(t[e+a].toString(16));try{r=decodeURIComponent(o)}catch(r){return i.bin.readASCII(t,e,n)}return r},writeUTF8:function(t,e,n){for(var i=n.length,r=0,o=0;o<i;o++){var a=n.charCodeAt(o);if(0==(4294967168&a))t[e+r]=a,r++;else if(0==(4294965248&a))t[e+r]=192|a>>6,t[e+r+1]=128|a>>0&63,r+=2;else if(0==(4294901760&a))t[e+r]=224|a>>12,t[e+r+1]=128|a>>6&63,t[e+r+2]=128|a>>0&63,r+=3;else{if(0!=(4292870144&a))throw"e";t[e+r]=240|a>>18,t[e+r+1]=128|a>>12&63,t[e+r+2]=128|a>>6&63,t[e+r+3]=128|a>>0&63,r+=4}}return r},sizeUTF8:function(t){for(var e=t.length,n=0,i=0;i<e;i++){var r=t.charCodeAt(i);if(0==(4294967168&r))n++;else if(0==(4294965248&r))n+=2;else if(0==(4294901760&r))n+=3;else{if(0!=(4292870144&r))throw"e";n+=4}}return n}},i.F={},i.F.deflateRaw=function(t,e,n,r){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],a=i.F.U,s=i.F._goodIndex;i.F._hash;var c=i.F._putsE,l=0,h=n<<3,d=0,u=t.length;if(0==r){for(;l<u;)c(e,h,l+(C=Math.min(65535,u-l))==u?1:0),h=i.F._copyExact(t,l,C,e,h+8),l+=C;return h>>>3}var f=a.lits,m=a.strt,p=a.prev,v=0,g=0,w=0,b=0,A=0,y=0;for(u>2&&(m[y=i.F._hash(t,0)]=0),l=0;l<u;l++){if(A=y,l+1<u-2){y=i.F._hash(t,l+1);var E=l+1&32767;p[E]=m[y],m[y]=E}if(d<=l){(v>14e3||g>26697)&&u-l>100&&(d<l&&(f[v]=l-d,v+=2,d=l),h=i.F._writeBlock(l==u-1||d==u?1:0,f,v,b,t,w,l-w,e,h),v=g=b=0,w=l);var x=0;l<u-2&&(x=i.F._bestMatch(t,l,p,A,Math.min(o[2],u-l),o[3]));var C=x>>>16,M=65535&x;if(0!=x){M=65535&x;var S=s(C=x>>>16,a.of0);a.lhst[257+S]++;var R=s(M,a.df0);a.dhst[R]++,b+=a.exb[S]+a.dxb[R],f[v]=C<<23|l-d,f[v+1]=M<<16|S<<8|R,v+=2,d=l+C}else a.lhst[t[l]]++;g++}}for(w==l&&0!=t.length||(d<l&&(f[v]=l-d,v+=2,d=l),h=i.F._writeBlock(1,f,v,b,t,w,l-w,e,h),v=0,g=0,v=g=b=0,w=l);0!=(7&h);)h++;return h>>>3},i.F._bestMatch=function(t,e,n,r,o,a){var s=32767&e,c=n[s],l=s-c+32768&32767;if(c==s||r!=i.F._hash(t,e-l))return 0;for(var h=0,d=0,u=Math.min(32767,e);l<=u&&0!=--a&&c!=s;){if(0==h||t[e+h]==t[e+h-l]){var f=i.F._howLong(t,e,l);if(f>h){if(d=l,(h=f)>=o)break;l+2<f&&(f=l+2);for(var m=0,p=0;p<f-2;p++){var v=e-l+p+32768&32767,g=v-n[v]+32768&32767;g>m&&(m=g,c=v)}}}l+=(s=c)-(c=n[s])+32768&32767}return h<<16|d},i.F._howLong=function(t,e,n){if(t[e]!=t[e-n]||t[e+1]!=t[e+1-n]||t[e+2]!=t[e+2-n])return 0;var i=e,r=Math.min(t.length,e+258);for(e+=3;e<r&&t[e]==t[e-n];)e++;return e-i},i.F._hash=function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(t,e,n,r,o,a,s,c,l){var h,d,u,f,m,p,v,g,w,b=i.F.U,A=i.F._putsF,y=i.F._putsE;b.lhst[256]++,d=(h=i.F.getTrees())[0],u=h[1],f=h[2],m=h[3],p=h[4],v=h[5],g=h[6],w=h[7];var E=32+(0==(l+3&7)?0:8-(l+3&7))+(s<<3),x=r+i.F.contSize(b.fltree,b.lhst)+i.F.contSize(b.fdtree,b.dhst),C=r+i.F.contSize(b.ltree,b.lhst)+i.F.contSize(b.dtree,b.dhst);C+=14+3*v+i.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var M=0;M<286;M++)b.lhst[M]=0;for(M=0;M<30;M++)b.dhst[M]=0;for(M=0;M<19;M++)b.ihst[M]=0;var S=E<x&&E<C?0:x<C?1:2;if(A(c,l,t),A(c,l+1,S),l+=3,0==S){for(;0!=(7&l);)l++;l=i.F._copyExact(o,a,s,c,l)}else{var R,z;if(1==S&&(R=b.fltree,z=b.fdtree),2==S){i.F.makeCodes(b.ltree,d),i.F.revCodes(b.ltree,d),i.F.makeCodes(b.dtree,u),i.F.revCodes(b.dtree,u),i.F.makeCodes(b.itree,f),i.F.revCodes(b.itree,f),R=b.ltree,z=b.dtree,y(c,l,m-257),y(c,l+=5,p-1),y(c,l+=5,v-4),l+=4;for(var P=0;P<v;P++)y(c,l+3*P,b.itree[1+(b.ordr[P]<<1)]);l+=3*v,l=i.F._codeTiny(g,b.itree,c,l),l=i.F._codeTiny(w,b.itree,c,l)}for(var I=a,N=0;N<n;N+=2){for(var H=e[N],U=H>>>23,_=I+(8388607&H);I<_;)l=i.F._writeLit(o[I++],R,c,l);if(0!=U){var B=e[N+1],F=B>>16,W=B>>8&255,T=255&B;y(c,l=i.F._writeLit(257+W,R,c,l),U-b.of0[W]),l+=b.exb[W],A(c,l=i.F._writeLit(T,z,c,l),F-b.df0[T]),l+=b.dxb[T],I+=U}}l=i.F._writeLit(256,R,c,l)}return l},i.F._copyExact=function(t,e,n,i,r){var o=r>>>3;return i[o]=n,i[o+1]=n>>>8,i[o+2]=255-i[o],i[o+3]=255-i[o+1],o+=4,i.set(new Uint8Array(t.buffer,e,n),o),r+(n+4<<3)},i.F.getTrees=function(){for(var t=i.F.U,e=i.F._hufTree(t.lhst,t.ltree,15),n=i.F._hufTree(t.dhst,t.dtree,15),r=[],o=i.F._lenCodes(t.ltree,r),a=[],s=i.F._lenCodes(t.dtree,a),c=0;c<r.length;c+=2)t.ihst[r[c]]++;for(c=0;c<a.length;c+=2)t.ihst[a[c]]++;for(var l=i.F._hufTree(t.ihst,t.itree,7),h=19;h>4&&0==t.itree[1+(t.ordr[h-1]<<1)];)h--;return[e,n,l,o,s,h,r,a]},i.F.getSecond=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(t[n+1]);return e},i.F.nonZero=function(t){for(var e="",n=0;n<t.length;n+=2)0!=t[n+1]&&(e+=(n>>1)+",");return e},i.F.contSize=function(t,e){for(var n=0,i=0;i<e.length;i++)n+=e[i]*t[1+(i<<1)];return n},i.F._codeTiny=function(t,e,n,r){for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];r=i.F._writeLit(a,e,n,r);var c=16==a?2:17==a?3:7;a>15&&(i.F._putsE(n,r,s,c),r+=c)}return r},i.F._lenCodes=function(t,e){for(var n=t.length;2!=n&&0==t[n-1];)n-=2;for(var i=0;i<n;i+=2){var r=t[i+1],o=i+3<n?t[i+3]:-1,a=i+5<n?t[i+5]:-1,s=0==i?-1:t[i-1];if(0==r&&o==r&&a==r){for(var c=i+5;c+2<n&&t[c+2]==r;)c+=2;(l=Math.min(c+1-i>>>1,138))<11?e.push(17,l-3):e.push(18,l-11),i+=2*l-2}else if(r==s&&o==r&&a==r){for(c=i+5;c+2<n&&t[c+2]==r;)c+=2;var l=Math.min(c+1-i>>>1,6);e.push(16,l-3),i+=2*l-2}else e.push(r,0)}return n>>>1},i.F._hufTree=function(t,e,n){var r=[],o=t.length,a=e.length,s=0;for(s=0;s<a;s+=2)e[s]=0,e[s+1]=0;for(s=0;s<o;s++)0!=t[s]&&r.push({lit:s,f:t[s]});var c=r.length,l=r.slice(0);if(0==c)return 0;if(1==c){var h=r[0].lit;return l=0==h?1:0,e[1+(h<<1)]=1,e[1+(l<<1)]=1,1}r.sort((function(t,e){return t.f-e.f}));var d=r[0],u=r[1],f=0,m=1,p=2;for(r[0]={lit:-1,f:d.f+u.f,l:d,r:u,d:0};m!=c-1;)d=f!=m&&(p==c||r[f].f<r[p].f)?r[f++]:r[p++],u=f!=m&&(p==c||r[f].f<r[p].f)?r[f++]:r[p++],r[m++]={lit:-1,f:d.f+u.f,l:d,r:u};var v=i.F.setDepth(r[m-1],0);for(v>n&&(i.F.restrictDepth(l,n,v),v=n),s=0;s<c;s++)e[1+(l[s].lit<<1)]=l[s].d;return v},i.F.setDepth=function(t,e){return-1!=t.lit?(t.d=e,e):Math.max(i.F.setDepth(t.l,e+1),i.F.setDepth(t.r,e+1))},i.F.restrictDepth=function(t,e,n){var i=0,r=1<<n-e,o=0;for(t.sort((function(t,e){return e.d==t.d?t.f-e.f:e.d-t.d})),i=0;i<t.length&&t[i].d>e;i++){var a=t[i].d;t[i].d=e,o+=r-(1<<n-a)}for(o>>>=n-e;o>0;)(a=t[i].d)<e?(t[i].d++,o-=1<<e-a-1):i++;for(;i>=0;i--)t[i].d==e&&o<0&&(t[i].d--,o++);0!=o&&console.log("debt left")},i.F._goodIndex=function(t,e){var n=0;return e[16|n]<=t&&(n|=16),e[8|n]<=t&&(n|=8),e[4|n]<=t&&(n|=4),e[2|n]<=t&&(n|=2),e[1|n]<=t&&(n|=1),n},i.F._writeLit=function(t,e,n,r){return i.F._putsF(n,r,e[t<<1]),r+e[1+(t<<1)]},i.F.inflate=function(t,e){var n=Uint8Array;if(3==t[0]&&0==t[1])return e||new n(0);var r=i.F,o=r._bitsF,a=r._bitsE,s=r._decodeTiny,c=r.makeCodes,l=r.codes2map,h=r._get17,d=r.U,u=null==e;u&&(e=new n(t.length>>>2<<3));for(var f,m,p=0,v=0,g=0,w=0,b=0,A=0,y=0,E=0,x=0;0==p;)if(p=o(t,x,1),v=o(t,x+1,2),x+=3,0!=v){if(u&&(e=i.F._check(e,E+(1<<17))),1==v&&(f=d.flmap,m=d.fdmap,A=511,y=31),2==v){g=a(t,x,5)+257,w=a(t,x+5,5)+1,b=a(t,x+10,4)+4,x+=14;for(var C=0;C<38;C+=2)d.itree[C]=0,d.itree[C+1]=0;var M=1;for(C=0;C<b;C++){var S=a(t,x+3*C,3);d.itree[1+(d.ordr[C]<<1)]=S,S>M&&(M=S)}x+=3*b,c(d.itree,M),l(d.itree,M,d.imap),f=d.lmap,m=d.dmap,x=s(d.imap,(1<<M)-1,g+w,t,x,d.ttree);var R=r._copyOut(d.ttree,0,g,d.ltree);A=(1<<R)-1;var z=r._copyOut(d.ttree,g,w,d.dtree);y=(1<<z)-1,c(d.ltree,R),l(d.ltree,R,f),c(d.dtree,z),l(d.dtree,z,m)}for(;;){var P=f[h(t,x)&A];x+=15&P;var I=P>>>4;if(I>>>8==0)e[E++]=I;else{if(256==I)break;var N=E+I-254;if(I>264){var H=d.ldef[I-257];N=E+(H>>>3)+a(t,x,7&H),x+=7&H}var U=m[h(t,x)&y];x+=15&U;var _=U>>>4,B=d.ddef[_],F=(B>>>4)+o(t,x,15&B);for(x+=15&B,u&&(e=i.F._check(e,E+(1<<17)));E<N;)e[E]=e[E++-F],e[E]=e[E++-F],e[E]=e[E++-F],e[E]=e[E++-F];E=N}}}else{0!=(7&x)&&(x+=8-(7&x));var W=4+(x>>>3),T=t[W-4]|t[W-3]<<8;u&&(e=i.F._check(e,E+T)),e.set(new n(t.buffer,t.byteOffset+W,T),E),x=W+T<<3,E+=T}return e.length==E?e:e.slice(0,E)},i.F._check=function(t,e){var n=t.length;if(e<=n)return t;var i=new Uint8Array(Math.max(n<<1,e));return i.set(t,0),i},i.F._decodeTiny=function(t,e,n,r,o,a){for(var s=i.F._bitsE,c=i.F._get17,l=0;l<n;){var h=t[c(r,o)&e];o+=15&h;var d=h>>>4;if(d<=15)a[l]=d,l++;else{var u=0,f=0;16==d?(f=3+s(r,o,2),o+=2,u=a[l-1]):17==d?(f=3+s(r,o,3),o+=3):18==d&&(f=11+s(r,o,7),o+=7);for(var m=l+f;l<m;)a[l]=u,l++}}return o},i.F._copyOut=function(t,e,n,i){for(var r=0,o=0,a=i.length>>>1;o<n;){var s=t[o+e];i[o<<1]=0,i[1+(o<<1)]=s,s>r&&(r=s),o++}for(;o<a;)i[o<<1]=0,i[1+(o<<1)]=0,o++;return r},i.F.makeCodes=function(t,e){for(var n,r,o,a,s=i.F.U,c=t.length,l=s.bl_count,h=0;h<=e;h++)l[h]=0;for(h=1;h<c;h+=2)l[t[h]]++;var d=s.next_code;for(n=0,l[0]=0,r=1;r<=e;r++)n=n+l[r-1]<<1,d[r]=n;for(o=0;o<c;o+=2)0!=(a=t[o+1])&&(t[o]=d[a],d[a]++)},i.F.codes2map=function(t,e,n){for(var r=t.length,o=i.F.U.rev15,a=0;a<r;a+=2)if(0!=t[a+1])for(var s=a>>1,c=t[a+1],l=s<<4|c,h=e-c,d=t[a]<<h,u=d+(1<<h);d!=u;)n[o[d]>>>15-e]=l,d++},i.F.revCodes=function(t,e){for(var n=i.F.U.rev15,r=15-e,o=0;o<t.length;o+=2){var a=t[o]<<e-t[o+1];t[o]=n[a]>>>r}},i.F._putsE=function(t,e,n){n<<=7&e;var i=e>>>3;t[i]|=n,t[i+1]|=n>>>8},i.F._putsF=function(t,e,n){n<<=7&e;var i=e>>>3;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},i.F._bitsE=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<n)-1},i.F._bitsF=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<n)-1},i.F._get17=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},i.F._get25=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},i.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var t=i.F.U,e=0;e<32768;e++){var n=e;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,t.rev15[e]=(n>>>16|n<<16)>>>17}function r(t,e,n){for(;0!=e--;)t.push(0,n)}for(e=0;e<32;e++)t.ldef[e]=t.of0[e]<<3|t.exb[e],t.ddef[e]=t.df0[e]<<4|t.dxb[e];r(t.fltree,144,8),r(t.fltree,112,9),r(t.fltree,24,7),r(t.fltree,8,8),i.F.makeCodes(t.fltree,9),i.F.codes2map(t.fltree,9,t.flmap),i.F.revCodes(t.fltree,9),r(t.fdtree,32,5),i.F.makeCodes(t.fdtree,5),i.F.codes2map(t.fdtree,5,t.fdmap),i.F.revCodes(t.fdtree,5),r(t.itree,19,0),r(t.ltree,286,0),r(t.dtree,30,0),r(t.ttree,320,0)}()}();var s=function(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(n){if("default"!==n&&!(n in t)){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}}))})),Object.freeze(t)}({__proto__:null,default:o},[o]);const c=function(){var t={nextZero(t,e){for(;0!=t[e];)e++;return e},readUshort:(t,e)=>t[e]<<8|t[e+1],writeUshort(t,e,n){t[e]=n>>8&255,t[e+1]=255&n},readUint:(t,e)=>16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3]),writeUint(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},readASCII(t,e,n){let i="";for(let r=0;r<n;r++)i+=String.fromCharCode(t[e+r]);return i},writeASCII(t,e,n){for(let i=0;i<n.length;i++)t[e+i]=n.charCodeAt(i)},readBytes(t,e,n){const i=[];for(let r=0;r<n;r++)i.push(t[e+r]);return i},pad:t=>t.length<2?"0".concat(t):t,readUTF8(e,n,i){let r,o="";for(let a=0;a<i;a++)o+="%".concat(t.pad(e[n+a].toString(16)));try{r=decodeURIComponent(o)}catch(r){return t.readASCII(e,n,i)}return r}};function e(e,n,i,r){const a=n*i,s=o(r),c=Math.ceil(n*s/8),l=new Uint8Array(4*a),h=new Uint32Array(l.buffer),{ctype:d}=r,{depth:u}=r,f=t.readUshort;if(6==d){const t=a<<2;if(8==u)for(var m=0;m<t;m+=4)l[m]=e[m],l[m+1]=e[m+1],l[m+2]=e[m+2],l[m+3]=e[m+3];if(16==u)for(m=0;m<t;m++)l[m]=e[m<<1]}else if(2==d){const t=r.tabs.tRNS;if(null==t){if(8==u)for(m=0;m<a;m++){var p=3*m;h[m]=255<<24|e[p+2]<<16|e[p+1]<<8|e[p]}if(16==u)for(m=0;m<a;m++)p=6*m,h[m]=255<<24|e[p+4]<<16|e[p+2]<<8|e[p]}else{var v=t[0];const n=t[1],i=t[2];if(8==u)for(m=0;m<a;m++){var g=m<<2;p=3*m,h[m]=255<<24|e[p+2]<<16|e[p+1]<<8|e[p],e[p]==v&&e[p+1]==n&&e[p+2]==i&&(l[g+3]=0)}if(16==u)for(m=0;m<a;m++)g=m<<2,p=6*m,h[m]=255<<24|e[p+4]<<16|e[p+2]<<8|e[p],f(e,p)==v&&f(e,p+2)==n&&f(e,p+4)==i&&(l[g+3]=0)}}else if(3==d){const t=r.tabs.PLTE,o=r.tabs.tRNS,s=o?o.length:0;if(1==u)for(var w=0;w<i;w++){var b=w*c,A=w*n;for(m=0;m<n;m++){g=A+m<<2;var y=3*(E=e[b+(m>>3)]>>7-((7&m)<<0)&1);l[g]=t[y],l[g+1]=t[y+1],l[g+2]=t[y+2],l[g+3]=E<s?o[E]:255}}if(2==u)for(w=0;w<i;w++)for(b=w*c,A=w*n,m=0;m<n;m++)g=A+m<<2,y=3*(E=e[b+(m>>2)]>>6-((3&m)<<1)&3),l[g]=t[y],l[g+1]=t[y+1],l[g+2]=t[y+2],l[g+3]=E<s?o[E]:255;if(4==u)for(w=0;w<i;w++)for(b=w*c,A=w*n,m=0;m<n;m++)g=A+m<<2,y=3*(E=e[b+(m>>1)]>>4-((1&m)<<2)&15),l[g]=t[y],l[g+1]=t[y+1],l[g+2]=t[y+2],l[g+3]=E<s?o[E]:255;if(8==u)for(m=0;m<a;m++){var E;g=m<<2,y=3*(E=e[m]),l[g]=t[y],l[g+1]=t[y+1],l[g+2]=t[y+2],l[g+3]=E<s?o[E]:255}}else if(4==d){if(8==u)for(m=0;m<a;m++){g=m<<2;var x=e[C=m<<1];l[g]=x,l[g+1]=x,l[g+2]=x,l[g+3]=e[C+1]}if(16==u)for(m=0;m<a;m++){var C;g=m<<2,x=e[C=m<<2],l[g]=x,l[g+1]=x,l[g+2]=x,l[g+3]=e[C+2]}}else if(0==d)for(v=r.tabs.tRNS?r.tabs.tRNS:-1,w=0;w<i;w++){const t=w*c,i=w*n;if(1==u)for(var M=0;M<n;M++){var S=(x=255*(e[t+(M>>>3)]>>>7-(7&M)&1))==255*v?0:255;h[i+M]=S<<24|x<<16|x<<8|x}else if(2==u)for(M=0;M<n;M++)S=(x=85*(e[t+(M>>>2)]>>>6-((3&M)<<1)&3))==85*v?0:255,h[i+M]=S<<24|x<<16|x<<8|x;else if(4==u)for(M=0;M<n;M++)S=(x=17*(e[t+(M>>>1)]>>>4-((1&M)<<2)&15))==17*v?0:255,h[i+M]=S<<24|x<<16|x<<8|x;else if(8==u)for(M=0;M<n;M++)S=(x=e[t+M])==v?0:255,h[i+M]=S<<24|x<<16|x<<8|x;else if(16==u)for(M=0;M<n;M++)x=e[t+(M<<1)],S=f(e,t+(M<<1))==v?0:255,h[i+M]=S<<24|x<<16|x<<8|x}return l}function n(t,e,n,s){const c=o(t),l=Math.ceil(n*c/8),h=new Uint8Array((l+1+t.interlace)*s);return e=t.tabs.CgBI?r(e,h):i(e,h),0==t.interlace?e=a(e,t,0,n,s):1==t.interlace&&(e=function(t,e){const n=e.width,i=e.height,r=o(e),s=r>>3,c=Math.ceil(n*r/8),l=new Uint8Array(i*c);let h=0;const d=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],m=[8,8,4,4,2,2,1];let p=0;for(;p<7;){const o=f[p],g=m[p];let w=0,b=0,A=d[p];for(;A<i;)A+=o,b++;let y=u[p];for(;y<n;)y+=g,w++;const E=Math.ceil(w*r/8);a(t,e,h,w,b);let x=0,C=d[p];for(;C<i;){let e=u[p],i=h+x*E<<3;for(;e<n;){var v;if(1==r&&(v=(v=t[i>>3])>>7-(7&i)&1,l[C*c+(e>>3)]|=v<<7-((7&e)<<0)),2==r&&(v=(v=t[i>>3])>>6-(7&i)&3,l[C*c+(e>>2)]|=v<<6-((3&e)<<1)),4==r&&(v=(v=t[i>>3])>>4-(7&i)&15,l[C*c+(e>>1)]|=v<<4-((1&e)<<2)),r>=8){const n=C*c+e*s;for(let e=0;e<s;e++)l[n+e]=t[(i>>3)+e]}i+=r,e+=g}x++,C+=o}w*b!=0&&(h+=b*(1+E)),p+=1}return l}(e,t)),e}function i(t,e){return r(new Uint8Array(t.buffer,2,t.length-6),e)}var r=function(){const t={H:{}};return t.H.N=function(e,n){const i=Uint8Array;let r,o,a=0,s=0,c=0,l=0,h=0,d=0,u=0,f=0,m=0;if(3==e[0]&&0==e[1])return n||new i(0);const p=t.H,v=p.b,g=p.e,w=p.R,b=p.n,A=p.A,y=p.Z,E=p.m,x=null==n;for(x&&(n=new i(e.length>>>2<<5));0==a;)if(a=v(e,m,1),s=v(e,m+1,2),m+=3,0!=s){if(x&&(n=t.H.W(n,f+(1<<17))),1==s&&(r=E.J,o=E.h,d=511,u=31),2==s){c=g(e,m,5)+257,l=g(e,m+5,5)+1,h=g(e,m+10,4)+4,m+=14;let t=1;for(var C=0;C<38;C+=2)E.Q[C]=0,E.Q[C+1]=0;for(C=0;C<h;C++){const n=g(e,m+3*C,3);E.Q[1+(E.X[C]<<1)]=n,n>t&&(t=n)}m+=3*h,b(E.Q,t),A(E.Q,t,E.u),r=E.w,o=E.d,m=w(E.u,(1<<t)-1,c+l,e,m,E.v);const n=p.V(E.v,0,c,E.C);d=(1<<n)-1;const i=p.V(E.v,c,l,E.D);u=(1<<i)-1,b(E.C,n),A(E.C,n,r),b(E.D,i),A(E.D,i,o)}for(;;){const t=r[y(e,m)&d];m+=15&t;const i=t>>>4;if(i>>>8==0)n[f++]=i;else{if(256==i)break;{let t=f+i-254;if(i>264){const n=E.q[i-257];t=f+(n>>>3)+g(e,m,7&n),m+=7&n}const r=o[y(e,m)&u];m+=15&r;const a=r>>>4,s=E.c[a],c=(s>>>4)+v(e,m,15&s);for(m+=15&s;f<t;)n[f]=n[f++-c],n[f]=n[f++-c],n[f]=n[f++-c],n[f]=n[f++-c];f=t}}}}else{0!=(7&m)&&(m+=8-(7&m));const r=4+(m>>>3),o=e[r-4]|e[r-3]<<8;x&&(n=t.H.W(n,f+o)),n.set(new i(e.buffer,e.byteOffset+r,o),f),m=r+o<<3,f+=o}return n.length==f?n:n.slice(0,f)},t.H.W=function(t,e){const n=t.length;if(e<=n)return t;const i=new Uint8Array(n<<1);return i.set(t,0),i},t.H.R=function(e,n,i,r,o,a){const s=t.H.e,c=t.H.Z;let l=0;for(;l<i;){const t=e[c(r,o)&n];o+=15&t;const i=t>>>4;if(i<=15)a[l]=i,l++;else{let t=0,e=0;16==i?(e=3+s(r,o,2),o+=2,t=a[l-1]):17==i?(e=3+s(r,o,3),o+=3):18==i&&(e=11+s(r,o,7),o+=7);const n=l+e;for(;l<n;)a[l]=t,l++}}return o},t.H.V=function(t,e,n,i){let r=0,o=0;const a=i.length>>>1;for(;o<n;){const n=t[o+e];i[o<<1]=0,i[1+(o<<1)]=n,n>r&&(r=n),o++}for(;o<a;)i[o<<1]=0,i[1+(o<<1)]=0,o++;return r},t.H.n=function(e,n){const i=t.H.m,r=e.length;let o,a,s,c;const l=i.j;for(var h=0;h<=n;h++)l[h]=0;for(h=1;h<r;h+=2)l[e[h]]++;const d=i.K;for(o=0,l[0]=0,a=1;a<=n;a++)o=o+l[a-1]<<1,d[a]=o;for(s=0;s<r;s+=2)c=e[s+1],0!=c&&(e[s]=d[c],d[c]++)},t.H.A=function(e,n,i){const r=e.length,o=t.H.m.r;for(let t=0;t<r;t+=2)if(0!=e[t+1]){const r=t>>1,a=e[t+1],s=r<<4|a,c=n-a;let l=e[t]<<c;const h=l+(1<<c);for(;l!=h;)i[o[l]>>>15-n]=s,l++}},t.H.l=function(e,n){const i=t.H.m.r,r=15-n;for(let t=0;t<e.length;t+=2){const o=e[t]<<n-e[t+1];e[t]=i[o]>>>r}},t.H.M=function(t,e,n){n<<=7&e;const i=e>>>3;t[i]|=n,t[i+1]|=n>>>8},t.H.I=function(t,e,n){n<<=7&e;const i=e>>>3;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},t.H.e=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<n)-1},t.H.b=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<n)-1},t.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},t.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},t.H.m=function(){const t=Uint16Array,e=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new e(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new e(286),Y:new e(30),a:new e(19),t:new e(15e3),k:new t(65536),g:new t(32768)}}(),function(){const e=t.H.m;for(var n=0;n<32768;n++){let t=n;t=(2863311530&t)>>>1|(1431655765&t)<<1,t=(3435973836&t)>>>2|(858993459&t)<<2,t=(4042322160&t)>>>4|(252645135&t)<<4,t=(4278255360&t)>>>8|(16711935&t)<<8,e.r[n]=(t>>>16|t<<16)>>>17}function i(t,e,n){for(;0!=e--;)t.push(0,n)}for(n=0;n<32;n++)e.q[n]=e.S[n]<<3|e.T[n],e.c[n]=e.p[n]<<4|e.z[n];i(e._,144,8),i(e._,112,9),i(e._,24,7),i(e._,8,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),i(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),i(e.Q,19,0),i(e.C,286,0),i(e.D,30,0),i(e.v,320,0)}(),t.H.N}();function o(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth}function a(t,e,n,i,r){let a=o(e);const c=Math.ceil(i*a/8);let l,h;a=Math.ceil(a/8);let d=t[n],u=0;if(d>1&&(t[n]=[0,0,1][d-2]),3==d)for(u=a;u<c;u++)t[u+1]=t[u+1]+(t[u+1-a]>>>1)&255;for(let o=0;o<r;o++)if(l=n+o*c,h=l+o+1,d=t[h-1],u=0,0==d)for(;u<c;u++)t[l+u]=t[h+u];else if(1==d){for(;u<a;u++)t[l+u]=t[h+u];for(;u<c;u++)t[l+u]=t[h+u]+t[l+u-a]}else if(2==d)for(;u<c;u++)t[l+u]=t[h+u]+t[l+u-c];else if(3==d){for(;u<a;u++)t[l+u]=t[h+u]+(t[l+u-c]>>>1);for(;u<c;u++)t[l+u]=t[h+u]+(t[l+u-c]+t[l+u-a]>>>1)}else{for(;u<a;u++)t[l+u]=t[h+u]+s(0,t[l+u-c],0);for(;u<c;u++)t[l+u]=t[h+u]+s(t[l+u-a],t[l+u-c],t[l+u-a-c])}return t}function s(t,e,n){const i=t+e-n,r=i-t,o=i-e,a=i-n;return r*r<=o*o&&r*r<=a*a?t:o*o<=a*a?e:n}function c(e,n,i){i.width=t.readUint(e,n),n+=4,i.height=t.readUint(e,n),n+=4,i.depth=e[n],n++,i.ctype=e[n],n++,i.compress=e[n],n++,i.filter=e[n],n++,i.interlace=e[n],n++}function l(t,e,n,i,r,o,a,s,c){const l=Math.min(e,r),h=Math.min(n,o);let d=0,u=0;for(let y=0;y<h;y++)for(let n=0;n<l;n++)if(a>=0&&s>=0?(d=y*e+n<<2,u=(s+y)*r+a+n<<2):(d=(-s+y)*e-a+n<<2,u=y*r+n<<2),0==c)i[u]=t[d],i[u+1]=t[d+1],i[u+2]=t[d+2],i[u+3]=t[d+3];else if(1==c){var f=t[d+3]*(1/255),m=t[d]*f,p=t[d+1]*f,v=t[d+2]*f,g=i[u+3]*(1/255),w=i[u]*g,b=i[u+1]*g,A=i[u+2]*g;const e=1-f,n=f+g*e,r=0==n?0:1/n;i[u+3]=255*n,i[u+0]=(m+w*e)*r,i[u+1]=(p+b*e)*r,i[u+2]=(v+A*e)*r}else if(2==c)f=t[d+3],m=t[d],p=t[d+1],v=t[d+2],g=i[u+3],w=i[u],b=i[u+1],A=i[u+2],f==g&&m==w&&p==b&&v==A?(i[u]=0,i[u+1]=0,i[u+2]=0,i[u+3]=0):(i[u]=m,i[u+1]=p,i[u+2]=v,i[u+3]=f);else if(3==c){if(f=t[d+3],m=t[d],p=t[d+1],v=t[d+2],g=i[u+3],w=i[u],b=i[u+1],A=i[u+2],f==g&&m==w&&p==b&&v==A)continue;if(f<220&&g>20)return!1}return!0}return{decode:function(e){const o=new Uint8Array(e);let a=8;const s=t,l=s.readUshort,h=s.readUint,d={tabs:{},frames:[]},u=new Uint8Array(o.length);let f,m=0,p=0;const v=[137,80,78,71,13,10,26,10];for(var g=0;g<8;g++)if(o[g]!=v[g])throw"The input is not a PNG file!";for(;a<o.length;){const e=s.readUint(o,a);a+=4;const v=s.readASCII(o,a,4);if(a+=4,"IHDR"==v)c(o,a,d);else if("iCCP"==v){for(var w=a;0!=o[w];)w++;s.readASCII(o,a,w-a),o[w+1];const n=o.slice(w+2,a+e);let c=null;try{c=i(n)}catch(t){c=r(n)}d.tabs[v]=c}else if("CgBI"==v)d.tabs[v]=o.slice(a,a+4);else if("IDAT"==v){for(g=0;g<e;g++)u[m+g]=o[a+g];m+=e}else if("acTL"==v)d.tabs[v]={num_frames:h(o,a),num_plays:h(o,a+4)},f=new Uint8Array(o.length);else if("fcTL"==v){0!=p&&((C=d.frames[d.frames.length-1]).data=n(d,f.slice(0,p),C.rect.width,C.rect.height),p=0);const t={x:h(o,a+12),y:h(o,a+16),width:h(o,a+4),height:h(o,a+8)};let e=l(o,a+22);e=l(o,a+20)/(0==e?100:e);const i={rect:t,delay:Math.round(1e3*e),dispose:o[a+24],blend:o[a+25]};d.frames.push(i)}else if("fdAT"==v){for(g=0;g<e-4;g++)f[p+g]=o[a+g+4];p+=e-4}else if("pHYs"==v)d.tabs[v]=[s.readUint(o,a),s.readUint(o,a+4),o[a+8]];else if("cHRM"==v)for(d.tabs[v]=[],g=0;g<8;g++)d.tabs[v].push(s.readUint(o,a+4*g));else if("tEXt"==v||"zTXt"==v){null==d.tabs[v]&&(d.tabs[v]={});var b=s.nextZero(o,a),A=s.readASCII(o,a,b-a),y=a+e-b-1;if("tEXt"==v)x=s.readASCII(o,b+1,y);else{var E=i(o.slice(b+2,b+2+y));x=s.readUTF8(E,0,E.length)}d.tabs[v][A]=x}else if("iTXt"==v){null==d.tabs[v]&&(d.tabs[v]={}),b=0,w=a,b=s.nextZero(o,w),A=s.readASCII(o,w,b-w);const t=o[w=b+1];var x;o[w+1],w+=2,b=s.nextZero(o,w),s.readASCII(o,w,b-w),w=b+1,b=s.nextZero(o,w),s.readUTF8(o,w,b-w),y=e-((w=b+1)-a),0==t?x=s.readUTF8(o,w,y):(E=i(o.slice(w,w+y)),x=s.readUTF8(E,0,E.length)),d.tabs[v][A]=x}else if("PLTE"==v)d.tabs[v]=s.readBytes(o,a,e);else if("hIST"==v){const t=d.tabs.PLTE.length/3;for(d.tabs[v]=[],g=0;g<t;g++)d.tabs[v].push(l(o,a+2*g))}else if("tRNS"==v)3==d.ctype?d.tabs[v]=s.readBytes(o,a,e):0==d.ctype?d.tabs[v]=l(o,a):2==d.ctype&&(d.tabs[v]=[l(o,a),l(o,a+2),l(o,a+4)]);else if("gAMA"==v)d.tabs[v]=s.readUint(o,a)/1e5;else if("sRGB"==v)d.tabs[v]=o[a];else if("bKGD"==v)0==d.ctype||4==d.ctype?d.tabs[v]=[l(o,a)]:2==d.ctype||6==d.ctype?d.tabs[v]=[l(o,a),l(o,a+2),l(o,a+4)]:3==d.ctype&&(d.tabs[v]=o[a]);else if("IEND"==v)break;a+=e,s.readUint(o,a),a+=4}var C;return 0!=p&&((C=d.frames[d.frames.length-1]).data=n(d,f.slice(0,p),C.rect.width,C.rect.height)),d.data=n(d,u,d.width,d.height),delete d.compress,delete d.interlace,delete d.filter,d},toRGBA8:function(t){const n=t.width,i=t.height;if(null==t.tabs.acTL)return[e(t.data,n,i,t).buffer];const r=[];null==t.frames[0].data&&(t.frames[0].data=t.data);const o=n*i*4,a=new Uint8Array(o),s=new Uint8Array(o),c=new Uint8Array(o);for(let d=0;d<t.frames.length;d++){const u=t.frames[d],f=u.rect.x,m=u.rect.y,p=u.rect.width,v=u.rect.height,g=e(u.data,p,v,t);if(0!=d)for(var h=0;h<o;h++)c[h]=a[h];if(0==u.blend?l(g,p,v,a,n,i,f,m,0):1==u.blend&&l(g,p,v,a,n,i,f,m,1),r.push(a.buffer.slice(0)),0==u.dispose);else if(1==u.dispose)l(s,p,v,a,n,i,f,m,0);else if(2==u.dispose)for(h=0;h<o;h++)a[h]=c[h]}return r},_paeth:s,_copyTile:l,_bin:t}}();!function(){const{_copyTile:t}=c,{_bin:e}=c,n=c._paeth;var i={table:function(){const t=new Uint32Array(256);for(let e=0;e<256;e++){let n=e;for(let t=0;t<8;t++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}(),update(t,e,n,r){for(let o=0;o<r;o++)t=i.table[255&(t^e[n+o])]^t>>>8;return t},crc:(t,e,n)=>4294967295^i.update(4294967295,t,e,n)};function r(t,e,n,i){e[n]+=t[0]*i>>4,e[n+1]+=t[1]*i>>4,e[n+2]+=t[2]*i>>4,e[n+3]+=t[3]*i>>4}function o(t){return Math.max(0,Math.min(255,t))}function a(t,e){const n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],o=t[3]-e[3];return n*n+i*i+r*r+o*o}function l(t,e,n,i,s,c,l){null==l&&(l=1);const h=i.length,d=[];for(var u=0;u<h;u++){const t=i[u];d.push([t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255])}for(u=0;u<h;u++){let t=4294967295;for(var f=0,m=0;m<h;m++){var p=a(d[u],d[m]);m!=u&&p<t&&(t=p,f=m)}}const v=new Uint32Array(s.buffer),g=new Int16Array(e*n*4),w=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(u=0;u<w.length;u++)w[u]=255*((w[u]+.5)/16-.5);for(let A=0;A<n;A++)for(let s=0;s<e;s++){var b;u=4*(A*e+s),2!=l?b=[o(t[u]+g[u]),o(t[u+1]+g[u+1]),o(t[u+2]+g[u+2]),o(t[u+3]+g[u+3])]:(p=w[4*(3&A)+(3&s)],b=[o(t[u]+p),o(t[u+1]+p),o(t[u+2]+p),o(t[u+3]+p)]),f=0;let y=16777215;for(m=0;m<h;m++){const t=a(b,d[m]);t<y&&(y=t,f=m)}const E=d[f],x=[b[0]-E[0],b[1]-E[1],b[2]-E[2],b[3]-E[3]];1==l&&(s!=e-1&&r(x,g,u+4,7),A!=n-1&&(0!=s&&r(x,g,u+4*e-4,3),r(x,g,u+4*e,5),s!=e-1&&r(x,g,u+4*e+4,1))),c[u>>2]=f,v[u>>2]=i[f]}}function h(t,n,r,o,a){null==a&&(a={});const{crc:s}=i,c=e.writeUint,l=e.writeUshort,h=e.writeASCII;let d=8;const u=t.frames.length>1;let f,m=!1,p=33+(u?20:0);if(null!=a.sRGB&&(p+=13),null!=a.pHYs&&(p+=21),null!=a.iCCP&&(f=pako.deflate(a.iCCP),p+=21+f.length+4),3==t.ctype){for(var v=t.plte.length,g=0;g<v;g++)t.plte[g]>>>24!=255&&(m=!0);p+=8+3*v+4+(m?8+1*v+4:0)}for(var w=0;w<t.frames.length;w++)u&&(p+=38),p+=(E=t.frames[w]).cimg.length+12,0!=w&&(p+=4);p+=12;const b=new Uint8Array(p),A=[137,80,78,71,13,10,26,10];for(g=0;g<8;g++)b[g]=A[g];if(c(b,d,13),d+=4,h(b,d,"IHDR"),d+=4,c(b,d,n),d+=4,c(b,d,r),d+=4,b[d]=t.depth,d++,b[d]=t.ctype,d++,b[d]=0,d++,b[d]=0,d++,b[d]=0,d++,c(b,d,s(b,d-17,17)),d+=4,null!=a.sRGB&&(c(b,d,1),d+=4,h(b,d,"sRGB"),d+=4,b[d]=a.sRGB,d++,c(b,d,s(b,d-5,5)),d+=4),null!=a.iCCP){const t=13+f.length;c(b,d,t),d+=4,h(b,d,"iCCP"),d+=4,h(b,d,"ICC profile"),d+=11,d+=2,b.set(f,d),d+=f.length,c(b,d,s(b,d-(t+4),t+4)),d+=4}if(null!=a.pHYs&&(c(b,d,9),d+=4,h(b,d,"pHYs"),d+=4,c(b,d,a.pHYs[0]),d+=4,c(b,d,a.pHYs[1]),d+=4,b[d]=a.pHYs[2],d++,c(b,d,s(b,d-13,13)),d+=4),u&&(c(b,d,8),d+=4,h(b,d,"acTL"),d+=4,c(b,d,t.frames.length),d+=4,c(b,d,null!=a.loop?a.loop:0),d+=4,c(b,d,s(b,d-12,12)),d+=4),3==t.ctype){for(c(b,d,3*(v=t.plte.length)),d+=4,h(b,d,"PLTE"),d+=4,g=0;g<v;g++){const e=3*g,n=t.plte[g],i=255&n,r=n>>>8&255,o=n>>>16&255;b[d+e+0]=i,b[d+e+1]=r,b[d+e+2]=o}if(d+=3*v,c(b,d,s(b,d-3*v-4,3*v+4)),d+=4,m){for(c(b,d,v),d+=4,h(b,d,"tRNS"),d+=4,g=0;g<v;g++)b[d+g]=t.plte[g]>>>24&255;d+=v,c(b,d,s(b,d-v-4,v+4)),d+=4}}let y=0;for(w=0;w<t.frames.length;w++){var E=t.frames[w];u&&(c(b,d,26),d+=4,h(b,d,"fcTL"),d+=4,c(b,d,y++),d+=4,c(b,d,E.rect.width),d+=4,c(b,d,E.rect.height),d+=4,c(b,d,E.rect.x),d+=4,c(b,d,E.rect.y),d+=4,l(b,d,o[w]),d+=2,l(b,d,1e3),d+=2,b[d]=E.dispose,d++,b[d]=E.blend,d++,c(b,d,s(b,d-30,30)),d+=4);const e=E.cimg;c(b,d,(v=e.length)+(0==w?0:4)),d+=4;const n=d;h(b,d,0==w?"IDAT":"fdAT"),d+=4,0!=w&&(c(b,d,y++),d+=4),b.set(e,d),d+=v,c(b,d,s(b,n,d-n)),d+=4}return c(b,d,0),d+=4,h(b,d,"IEND"),d+=4,c(b,d,s(b,d-4,4)),d+=4,b.buffer}function d(t,e,n){for(let i=0;i<t.frames.length;i++){const r=t.frames[i];r.rect.width;const o=r.rect.height,a=new Uint8Array(o*r.bpl+o);r.cimg=p(r.img,o,r.bpp,r.bpl,a,e,n)}}function u(e,n,i,r,o){const a=o[0],s=o[1],c=o[2],h=o[3],d=o[4],u=o[5];let p=6,v=8,w=255;for(var b=0;b<e.length;b++){const t=new Uint8Array(e[b]);for(var A=t.length,y=0;y<A;y+=4)w&=t[y+3]}const E=255!=w,x=function(e,n,i,r,o,a){const s=[];for(var c=0;c<e.length;c++){const d=new Uint8Array(e[c]),f=new Uint32Array(d.buffer);var l;let p=0,v=0,g=n,w=i,b=r?1:0;if(0!=c){const A=a||r||1==c||0!=s[c-2].dispose?1:2;let y=0,E=1e9;for(let t=0;t<A;t++){var h=new Uint8Array(e[c-1-t]);const r=new Uint32Array(e[c-1-t]);let a=n,s=i,l=-1,d=-1;for(let t=0;t<i;t++)for(let e=0;e<n;e++)f[u=t*n+e]!=r[u]&&(e<a&&(a=e),e>l&&(l=e),t<s&&(s=t),t>d&&(d=t));-1==l&&(a=s=l=d=0),o&&(1==(1&a)&&a--,1==(1&s)&&s--);const m=(l-a+1)*(d-s+1);m<E&&(E=m,y=t,p=a,v=s,g=l-a+1,w=d-s+1)}h=new Uint8Array(e[c-1-y]),1==y&&(s[c-1].dispose=2),l=new Uint8Array(g*w*4),t(h,n,i,l,g,w,-p,-v,0),b=t(d,n,i,l,g,w,-p,-v,3)?1:0,1==b?m(d,n,i,l,{x:p,y:v,width:g,height:w}):t(d,n,i,l,g,w,-p,-v,0)}else l=d.slice(0);s.push({rect:{x:p,y:v,width:g,height:w},img:l,blend:b,dispose:0})}if(r)for(c=0;c<s.length;c++){if(1==(p=s[c]).blend)continue;const t=p.rect,r=s[c-1].rect,a=Math.min(t.x,r.x),l=Math.min(t.y,r.y),h={x:a,y:l,width:Math.max(t.x+t.width,r.x+r.width)-a,height:Math.max(t.y+t.height,r.y+r.height)-l};s[c-1].dispose=1,c-1!=0&&f(e,n,i,s,c-1,h,o),f(e,n,i,s,c,h,o)}let d=0;if(1!=e.length)for(var u=0;u<s.length;u++){var p;d+=(p=s[u]).rect.width*p.rect.height}return s}(e,n,i,a,s,c),C={},M=[],S=[];if(0!=r){const t=[];for(y=0;y<x.length;y++)t.push(x[y].img.buffer);const e=function(t){let e=0;for(var n=0;n<t.length;n++)e+=t[n].byteLength;const i=new Uint8Array(e);let r=0;for(n=0;n<t.length;n++){const e=new Uint8Array(t[n]),o=e.length;for(let t=0;t<o;t+=4){let n=e[t],o=e[t+1],a=e[t+2];const s=e[t+3];0==s&&(n=o=a=0),i[r+t]=n,i[r+t+1]=o,i[r+t+2]=a,i[r+t+3]=s}r+=o}return i.buffer}(t),n=g(e,r);for(y=0;y<n.plte.length;y++)M.push(n.plte[y].est.rgba);let i=0;for(y=0;y<x.length;y++){const t=(z=x[y]).img.length;var R=new Uint8Array(n.inds.buffer,i>>2,t>>2);S.push(R);const e=new Uint8Array(n.abuf,i,t);u&&l(z.img,z.rect.width,z.rect.height,M,e,R),z.img.set(e),i+=t}}else for(b=0;b<x.length;b++){var z=x[b];const t=new Uint32Array(z.img.buffer);var P=z.rect.width;for(A=t.length,R=new Uint8Array(A),S.push(R),y=0;y<A;y++){const e=t[y];if(0!=y&&e==t[y-1])R[y]=R[y-1];else if(y>P&&e==t[y-P])R[y]=R[y-P];else{let t=C[e];if(null==t&&(C[e]=t=M.length,M.push(e),M.length>=300))break;R[y]=t}}}const I=M.length;for(I<=256&&0==d&&(v=I<=2?1:I<=4?2:I<=16?4:8,v=Math.max(v,h)),b=0;b<x.length;b++){(z=x[b]).rect.x,z.rect.y,P=z.rect.width;const t=z.rect.height;let e=z.img;new Uint32Array(e.buffer);let n=4*P,i=4;if(I<=256&&0==d){n=Math.ceil(v*P/8);var N=new Uint8Array(n*t);const r=S[b];for(let e=0;e<t;e++){y=e*n;const t=e*P;if(8==v)for(var H=0;H<P;H++)N[y+H]=r[t+H];else if(4==v)for(H=0;H<P;H++)N[y+(H>>1)]|=r[t+H]<<4-4*(1&H);else if(2==v)for(H=0;H<P;H++)N[y+(H>>2)]|=r[t+H]<<6-2*(3&H);else if(1==v)for(H=0;H<P;H++)N[y+(H>>3)]|=r[t+H]<<7-1*(7&H)}e=N,p=3,i=1}else if(0==E&&1==x.length){N=new Uint8Array(P*t*3);const r=P*t;for(y=0;y<r;y++){const t=3*y,n=4*y;N[t]=e[n],N[t+1]=e[n+1],N[t+2]=e[n+2]}e=N,p=2,i=3,n=3*P}z.img=e,z.bpl=n,z.bpp=i}return{ctype:p,depth:v,plte:M,frames:x}}function f(e,n,i,r,o,a,s){const c=Uint8Array,l=Uint32Array,h=new c(e[o-1]),d=new l(e[o-1]),u=o+1<e.length?new c(e[o+1]):null,f=new c(e[o]),p=new l(f.buffer);let v=n,g=i,w=-1,b=-1;for(let t=0;t<a.height;t++)for(let e=0;e<a.width;e++){const i=a.x+e,s=a.y+t,c=s*n+i,l=p[c];0==l||0==r[o-1].dispose&&d[c]==l&&(null==u||0!=u[4*c+3])||(i<v&&(v=i),i>w&&(w=i),s<g&&(g=s),s>b&&(b=s))}-1==w&&(v=g=w=b=0),s&&(1==(1&v)&&v--,1==(1&g)&&g--),a={x:v,y:g,width:w-v+1,height:b-g+1};const A=r[o];A.rect=a,A.blend=1,A.img=new Uint8Array(a.width*a.height*4),0==r[o-1].dispose?(t(h,n,i,A.img,a.width,a.height,-a.x,-a.y,0),m(f,n,i,A.img,a)):t(f,n,i,A.img,a.width,a.height,-a.x,-a.y,0)}function m(e,n,i,r,o){t(e,n,i,r,o.width,o.height,-o.x,-o.y,2)}function p(t,e,n,i,r,o,a){const c=[];let l,h=[0,1,2,3,4];-1!=o?h=[o]:(e*i>5e5||1==n)&&(h=[0]),a&&(l={level:0});const d=s;for(var u=0;u<h.length;u++){for(let o=0;o<e;o++)v(r,t,o,i,n,h[u]);c.push(d.deflate(r,l))}let f,m=1e9;for(u=0;u<c.length;u++)c[u].length<m&&(f=u,m=c[u].length);return c[f]}function v(t,e,i,r,o,a){const s=i*r;let c=s+i;if(t[c]=a,c++,0==a)if(r<500)for(var l=0;l<r;l++)t[c+l]=e[s+l];else t.set(new Uint8Array(e.buffer,s,r),c);else if(1==a){for(l=0;l<o;l++)t[c+l]=e[s+l];for(l=o;l<r;l++)t[c+l]=e[s+l]-e[s+l-o]+256&255}else if(0==i){for(l=0;l<o;l++)t[c+l]=e[s+l];if(2==a)for(l=o;l<r;l++)t[c+l]=e[s+l];if(3==a)for(l=o;l<r;l++)t[c+l]=e[s+l]-(e[s+l-o]>>1)+256&255;if(4==a)for(l=o;l<r;l++)t[c+l]=e[s+l]-n(e[s+l-o],0,0)+256&255}else{if(2==a)for(l=0;l<r;l++)t[c+l]=e[s+l]+256-e[s+l-r]&255;if(3==a){for(l=0;l<o;l++)t[c+l]=e[s+l]+256-(e[s+l-r]>>1)&255;for(l=o;l<r;l++)t[c+l]=e[s+l]+256-(e[s+l-r]+e[s+l-o]>>1)&255}if(4==a){for(l=0;l<o;l++)t[c+l]=e[s+l]+256-n(0,e[s+l-r],0)&255;for(l=o;l<r;l++)t[c+l]=e[s+l]+256-n(e[s+l-o],e[s+l-r],e[s+l-o-r])&255}}}function g(t,e){const n=new Uint8Array(t),i=n.slice(0),r=new Uint32Array(i.buffer),o=w(i,e),a=o[0],s=o[1],c=n.length,l=new Uint8Array(c>>2);let h;if(n.length<2e7)for(var d=0;d<c;d+=4)h=b(a,u=n[d]*(1/255),f=n[d+1]*(1/255),m=n[d+2]*(1/255),p=n[d+3]*(1/255)),l[d>>2]=h.ind,r[d>>2]=h.est.rgba;else for(d=0;d<c;d+=4){var u=n[d]*(1/255),f=n[d+1]*(1/255),m=n[d+2]*(1/255),p=n[d+3]*(1/255);for(h=a;h.left;)h=A(h.est,u,f,m,p)<=0?h.left:h.right;l[d>>2]=h.ind,r[d>>2]=h.est.rgba}return{abuf:i.buffer,inds:l,plte:s}}function w(t,e,n){null==n&&(n=1e-4);const i=new Uint32Array(t.buffer),r={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};r.bst=x(t,r.i0,r.i1),r.est=C(r.bst);const o=[r];for(;o.length<e;){let e=0,r=0;for(var a=0;a<o.length;a++)o[a].est.L>e&&(e=o[a].est.L,r=a);if(e<n)break;const s=o[r],c=y(t,i,s.i0,s.i1,s.est.e,s.est.eMq255);if(s.i0>=c||s.i1<=c){s.est.L=0;continue}const l={i0:s.i0,i1:c,bst:null,est:null,tdst:0,left:null,right:null};l.bst=x(t,l.i0,l.i1),l.est=C(l.bst);const h={i0:c,i1:s.i1,bst:null,est:null,tdst:0,left:null,right:null};for(h.bst={R:[],m:[],N:s.bst.N-l.bst.N},a=0;a<16;a++)h.bst.R[a]=s.bst.R[a]-l.bst.R[a];for(a=0;a<4;a++)h.bst.m[a]=s.bst.m[a]-l.bst.m[a];h.est=C(h.bst),s.left=l,s.right=h,o[r]=l,o.push(h)}for(o.sort(((t,e)=>e.bst.N-t.bst.N)),a=0;a<o.length;a++)o[a].ind=a;return[r,o]}function b(t,e,n,i,r){if(null==t.left)return t.tdst=function(t,e,n,i,r){const o=e-t[0],a=n-t[1],s=i-t[2],c=r-t[3];return o*o+a*a+s*s+c*c}(t.est.q,e,n,i,r),t;const o=A(t.est,e,n,i,r);let a=t.left,s=t.right;o>0&&(a=t.right,s=t.left);const c=b(a,e,n,i,r);if(c.tdst<=o*o)return c;const l=b(s,e,n,i,r);return l.tdst<c.tdst?l:c}function A(t,e,n,i,r){const{e:o}=t;return o[0]*e+o[1]*n+o[2]*i+o[3]*r-t.eMq}function y(t,e,n,i,r,o){for(i-=4;n<i;){for(;E(t,n,r)<=o;)n+=4;for(;E(t,i,r)>o;)i-=4;if(n>=i)break;const a=e[n>>2];e[n>>2]=e[i>>2],e[i>>2]=a,n+=4,i-=4}for(;E(t,n,r)>o;)n-=4;return n+4}function E(t,e,n){return t[e]*n[0]+t[e+1]*n[1]+t[e+2]*n[2]+t[e+3]*n[3]}function x(t,e,n){const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],o=n-e>>2;for(let a=e;a<n;a+=4){const e=t[a]*(1/255),n=t[a+1]*(1/255),o=t[a+2]*(1/255),s=t[a+3]*(1/255);r[0]+=e,r[1]+=n,r[2]+=o,r[3]+=s,i[0]+=e*e,i[1]+=e*n,i[2]+=e*o,i[3]+=e*s,i[5]+=n*n,i[6]+=n*o,i[7]+=n*s,i[10]+=o*o,i[11]+=o*s,i[15]+=s*s}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:r,N:o}}function C(t){const{R:e}=t,{m:n}=t,{N:i}=t,r=n[0],o=n[1],a=n[2],s=n[3],c=0==i?0:1/i,l=[e[0]-r*r*c,e[1]-r*o*c,e[2]-r*a*c,e[3]-r*s*c,e[4]-o*r*c,e[5]-o*o*c,e[6]-o*a*c,e[7]-o*s*c,e[8]-a*r*c,e[9]-a*o*c,e[10]-a*a*c,e[11]-a*s*c,e[12]-s*r*c,e[13]-s*o*c,e[14]-s*a*c,e[15]-s*s*c],h=l,d=M;let u=[Math.random(),Math.random(),Math.random(),Math.random()],f=0,m=0;if(0!=i)for(let v=0;v<16&&(u=d.multVec(h,u),m=Math.sqrt(d.dot(u,u)),u=d.sml(1/m,u),!(0!=v&&Math.abs(m-f)<1e-9));v++)f=m;const p=[r*c,o*c,a*c,s*c];return{Cov:l,q:p,e:u,L:f,eMq255:d.dot(d.sml(255,p),u),eMq:d.dot(u,p),rgba:(Math.round(255*p[3])<<24|Math.round(255*p[2])<<16|Math.round(255*p[1])<<8|Math.round(255*p[0])<<0)>>>0}}var M={multVec:(t,e)=>[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]],dot:(t,e)=>t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],sml:(t,e)=>[t*e[0],t*e[1],t*e[2],t*e[3]]};c.encode=function(t,e,n,i,r,o,a){null==i&&(i=0),null==a&&(a=!1);const s=u(t,e,n,i,[!1,!1,!1,0,a,!1]);return d(s,-1),h(s,e,n,r,o)},c.encodeLL=function(t,e,n,i,r,o,a,s){const c={ctype:0+(1==i?0:2)+(0==r?0:4),depth:o,frames:[]},l=(i+r)*o,u=l*e;for(let h=0;h<t.length;h++)c.frames.push({rect:{x:0,y:0,width:e,height:n},img:new Uint8Array(t[h]),blend:0,dispose:1,bpp:Math.ceil(l/8),bpl:Math.ceil(u/8)});return d(c,0,!0),h(c,e,n,a,s)},c.encode.compress=u,c.encode.dither=l,c.quantize=g,c.quantize.getKDtree=w,c.quantize.getNearest=b}();const l={toArrayBuffer(t,e){const n=t.width,i=t.height,r=n<<2,o=t.getContext("2d").getImageData(0,0,n,i),a=new Uint32Array(o.data.buffer),s=(32*n+31)/32<<2,c=s*i,h=122+c,d=new ArrayBuffer(h),u=new DataView(d),f=1<<20;let m,p,v,g,w=f,b=0,A=0,y=0;function E(t){u.setUint16(A,t,!0),A+=2}function x(t){u.setUint32(A,t,!0),A+=4}function C(t){A+=t}E(19778),x(h),C(4),x(122),x(108),x(n),x(-i>>>0),E(1),E(32),x(3),x(c),x(2835),x(2835),C(8),x(16711680),x(65280),x(255),x(4278190080),x(1466527264),function t(){for(;b<i&&w>0;){for(g=122+b*s,m=0;m<r;)w--,p=a[y++],v=p>>>24,u.setUint32(g+m,p<<8|v),m+=4;b++}y<a.length?(w=f,setTimeout(t,l._dly)):e(d)}()},toBlob(t,e){this.toArrayBuffer(t,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var h={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},d={[h.CHROME]:16384,[h.FIREFOX]:11180,[h.DESKTOP_SAFARI]:16384,[h.IE]:8192,[h.IOS]:4096,[h.ETC]:8192};const u="undefined"!=typeof window,f="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,m=u&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),p=(u||f)&&(m&&m.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),v=(u||f)&&(m&&m.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise((i=>{const r=t.split(","),o=r[0].match(/:(.*?);/)[1],a=globalThis.atob(r[1]);let s=a.length;const c=new Uint8Array(s);for(;s--;)c[s]=a.charCodeAt(s);const l=new Blob([c],{type:o});l.name=e,l.lastModified=n,i(l)}))}function w(t){return new Promise(((e,n)=>{const i=new v;i.onload=()=>e(i.result),i.onerror=t=>n(t),i.readAsDataURL(t)}))}function b(t){return new Promise(((e,n)=>{const i=new Image;i.onload=()=>e(i),i.onerror=t=>n(t),i.src=t}))}function A(){if(void 0!==A.cachedResult)return A.cachedResult;let t=h.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=h.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=h.IOS:/Safari/i.test(e)?t=h.DESKTOP_SAFARI:/Firefox/i.test(e)?t=h.FIREFOX:(/MSIE/i.test(e)||1==!!document.documentMode)&&(t=h.IE),A.cachedResult=t,A.cachedResult}function y(t,e){const n=A(),i=d[n];let r=t,o=e,a=r*o;const s=r>o?o/r:r/o;for(;a>i*i;){const t=(i+r)/2,e=(i+o)/2;t<e?(o=e,r=e*s):(o=t*s,r=t),a=r*o}return{width:r,height:o}}function E(t,e){let n,i;try{if(n=new OffscreenCanvas(t,e),i=n.getContext("2d"),null===i)throw new Error("getContext of OffscreenCanvas returns null")}catch(t){n=document.createElement("canvas"),i=n.getContext("2d")}return n.width=t,n.height=e,[n,i]}function x(t,e){const{width:n,height:i}=y(t.width,t.height),[r,o]=E(n,i);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,r.width,r.height)),o.drawImage(t,0,0,r.width,r.height),r}function C(){return void 0!==C.cachedResult||(C.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),C.cachedResult}function M(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){let r,o;var a=function(){try{return o=x(r,e.fileType||t.type),n([r,o])}catch(t){return i(t)}},s=function(e){try{var n=function(t){try{throw t}catch(t){return i(t)}};try{let e;return w(t).then((function(t){try{return e=t,b(e).then((function(t){try{return r=t,function(){try{return a()}catch(t){return i(t)}}()}catch(t){return n(t)}}),n)}catch(t){return n(t)}}),n)}catch(t){n(t)}}catch(t){return i(t)}};try{if(C()||[h.DESKTOP_SAFARI,h.MOBILE_SAFARI].includes(A()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then((function(t){try{return r=t,a()}catch(t){return s()}}),s)}catch(t){s()}}))}function S(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise((function(o,a){let s;if("image/png"===e){let d,u,f;return d=t.getContext("2d"),({data:u}=d.getImageData(0,0,t.width,t.height)),f=c.encode([u.buffer],t.width,t.height,4096*r),s=new Blob([f],{type:e}),s.name=n,s.lastModified=i,h.call(this)}{if("image/bmp"===e)return new Promise((e=>l.toBlob(t,e))).then(function(t){try{return s=t,s.name=n,s.lastModified=i,m.call(this)}catch(t){return a(t)}}.bind(this),a);{if("function"==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:r}).then(function(t){try{return s=t,s.name=n,s.lastModified=i,p.call(this)}catch(t){return a(t)}}.bind(this),a);{let v;return v=t.toDataURL(e,r),g(v,n,i).then(function(t){try{return s=t,p.call(this)}catch(t){return a(t)}}.bind(this),a)}function p(){return m.call(this)}}function m(){return h.call(this)}}function h(){return o(s)}}))}function R(t){t.width=0,t.height=0}function z(){return new Promise((function(t,e){let n,i,r,o,a;return void 0!==z.cachedResult?t(z.cachedResult):(n="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",g("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(n){try{return i=n,M(i).then((function(n){try{return r=n[1],S(r,i.type,i.name,i.lastModified).then((function(n){try{return o=n,R(r),M(o).then((function(n){try{return a=n[0],z.cachedResult=1===a.width&&2===a.height,t(z.cachedResult)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e))}))}function P(t){return new Promise(((e,n)=>{const i=new v;i.onload=t=>{const n=new DataView(t.target.result);if(65496!=n.getUint16(0,!1))return e(-2);const i=n.byteLength;let r=2;for(;r<i;){if(n.getUint16(r+2,!1)<=8)return e(-1);const t=n.getUint16(r,!1);if(r+=2,65505==t){if(1165519206!=n.getUint32(r+=2,!1))return e(-1);const t=18761==n.getUint16(r+=6,!1);r+=n.getUint32(r+4,t);const i=n.getUint16(r,t);r+=2;for(let o=0;o<i;o++)if(274==n.getUint16(r+12*o,t))return e(n.getUint16(r+12*o+8,t))}else{if(65280!=(65280&t))break;r+=n.getUint16(r,!1)}}return e(-1)},i.onerror=t=>n(t),i.readAsArrayBuffer(t)}))}function I(t,e){const{width:n}=t,{height:i}=t,{maxWidthOrHeight:r}=e;let o,a=t;return isFinite(r)&&(n>r||i>r)&&([a,o]=E(n,i),n>i?(a.width=r,a.height=i/n*r):(a.width=n/i*r,a.height=r),o.drawImage(t,0,0,a.width,a.height),R(t)),a}function N(t,e){const{width:n}=t,{height:i}=t,[r,o]=E(n,i);switch(e>4&&e<9?(r.width=i,r.height=n):(r.width=n,r.height=i),e){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,i);break;case 4:o.transform(1,0,0,-1,0,i);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,i,0);break;case 7:o.transform(0,-1,-1,0,i,n);break;case 8:o.transform(0,-1,1,0,0,n)}return o.drawImage(t,0,0,n,i),R(t),r}function H(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(i,r){let o,a,s,c,l,h,d,u,f,m,p,v,g,w,b,A,y,x,C,H;function U(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=t,e.onProgress(Math.min(o,100))}function _(t){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(t,o),100),e.onProgress(o)}return o=n,a=e.maxIteration||10,s=1024*e.maxSizeMB*1024,U(),M(t,e).then(function(n){try{return[,c]=n,U(),l=I(c,e),U(),new Promise((function(n,i){var r;if(!(r=e.exifOrientation))return P(t).then(function(t){try{return r=t,o.call(this)}catch(t){return i(t)}}.bind(this),i);function o(){return n(r)}return o.call(this)})).then(function(n){try{return h=n,U(),z().then(function(n){try{return d=n?l:N(l,h),U(),u=e.initialQuality||1,f=e.fileType||t.type,S(d,f,t.name,t.lastModified,u).then(function(n){try{{if(m=n,U(),p=m.size>s,v=m.size>t.size,!p&&!v)return _(100),i(m);var o;function M(){if(a--&&(b>s||b>g)){let e,n;return e=H?.95*C.width:C.width,n=H?.95*C.height:C.height,[y,x]=E(e,n),x.drawImage(C,0,0,e,n),u*="image/png"===f?.85:.95,S(y,f,t.name,t.lastModified,u).then((function(t){try{return A=t,R(C),C=y,b=A.size,_(Math.min(99,Math.floor((w-b)/(w-s)*100))),M}catch(t){return r(t)}}),r)}return[1]}return g=t.size,w=m.size,b=w,C=d,H=!e.alwaysKeepResolution&&p,(o=function(t){for(;t;){if(t.then)return void t.then(o,r);try{if(t.pop){if(t.length)return t.pop()?z.call(this):t;t=M}else t=t.call(this)}catch(t){return r(t)}}}.bind(this))(M);function z(){return R(C),R(y),R(l),R(d),R(c),_(100),i(A)}}}catch(h){return r(h)}}.bind(this),r)}catch(t){return r(t)}}.bind(this),r)}catch(t){return r(t)}}.bind(this),r)}catch(t){return r(t)}}.bind(this),r)}))}const U="\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n";let _;function B(t,e){return new Promise(((n,i)=>{_||(_=function(t){const e=[];return"function"==typeof t?e.push("(".concat(t,")()")):e.push(t),URL.createObjectURL(new Blob(e))}(U));const r=new Worker(_);r.addEventListener("message",(function(t){if(e.signal&&e.signal.aborted)r.terminate();else if(void 0===t.data.progress){if(t.data.error)return i(new Error(t.data.error)),void r.terminate();n(t.data.file),r.terminate()}else e.onProgress(t.data.progress)})),r.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",(()=>{i(e.signal.reason),r.terminate()})),r.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function F(t,e){return new Promise((function(n,r){let o,a,s,c,l,h;if(o={...e},s=0,({onProgress:c}=o),o.maxSizeMB=o.maxSizeMB||Number.POSITIVE_INFINITY,l="boolean"!=typeof o.useWebWorker||o.useWebWorker,delete o.useWebWorker,o.onProgress=t=>{s=t,"function"==typeof c&&c(s)},!(t instanceof Blob||t instanceof p))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(h="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!l||"function"!=typeof Worker||h)return H(t,o).then(function(t){try{return a=t,f.call(this)}catch(t){return r(t)}}.bind(this),r);var d=function(){try{return f.call(this)}catch(t){return r(t)}}.bind(this),u=function(e){try{return H(t,o).then((function(t){try{return a=t,d()}catch(t){return r(t)}}),r)}catch(t){return r(t)}};try{return o.libURL=o.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",B(t,o).then((function(t){try{return a=t,d()}catch(t){return u()}}),u)}catch(t){u()}function f(){try{a.name=t.name,a.lastModified=t.lastModified}catch(t){}try{o.preserveExif&&"image/jpeg"===t.type&&(!o.fileType||o.fileType&&o.fileType===t.type)&&(a=i(t,a))}catch(t){}return n(a)}}))}F.getDataUrlFromFile=w,F.getFilefromDataUrl=g,F.loadImage=b,F.drawImageInCanvas=x,F.drawFileInCanvas=M,F.canvasToFile=S,F.getExifOrientation=P,F.handleMaxWidthOrHeight=I,F.followExifOrientation=N,F.cleanupCanvasMemory=R,F.isAutoOrientationInBrowser=z,F.approximateBelowMaximumCanvasSizeOfBrowser=y,F.copyExifWithoutOrientation=i,F.getBrowserName=A,F.version="2.0.2"}}]);
//# sourceMappingURL=3866.12f168a1.chunk.js.map