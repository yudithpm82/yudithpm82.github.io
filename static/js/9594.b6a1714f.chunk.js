"use strict";(self.webpackChunkstephanie_solution=self.webpackChunkstephanie_solution||[]).push([[9594,7567],{7567:(a,e,l)=>{l.r(e),l.d(e,{default:()=>r,loadEvidence:()=>c,loadImage:()=>v});var d=l(2791),s=l(2647),i=l(2350),t=l(5232),n=l(184);(0,s.PU)();const o=(0,s.tW)(),r=a=>{var e,l,s,r,v;let{ImgS3Url:m,imgId:u,urlBasic:p,clickHandle:h,width:g}=a;const[,x]=(0,d.useState)(1),[I,b]=(0,d.useState)(""),w=()=>{x((0,i.M5)())};(0,d.useEffect)((()=>{p?b(p):m?y(m):u&&f(u)}),[m,u,p]);const f=async a=>{var e;let l={...null===(e=(0,i.bh)((0,i.hQ)()))||void 0===e?void 0:e.id_img_loc};l.params={imgLocId:a};const d=(0,i.I7)(l),s=await d;console.log(s)},y=async a=>{var e;let l={...null===(e=(0,i.bh)((0,i.hQ)()))||void 0===e?void 0:e.id_img_loc};l.params={imgLocId:a};const d=(0,i.I7)(l);await d};(0,d.useEffect)((()=>{var a;!I||null!==(a=(0,i.bh)("loadedImages"))&&void 0!==a&&a[I]||(setTimeout((()=>{var a,e;null!==(a=(0,i.bh)("loadedImagesMetadata"))&&void 0!==a&&null!==(e=a[I])&&void 0!==e&&e.w2hRel&&w()}),1800),setTimeout((()=>{var a,e;null!==(a=(0,i.bh)("loadedImagesMetadata"))&&void 0!==a&&null!==(e=a[I])&&void 0!==e&&e.w2hRel&&w()}),1200),c([I]))}),[I]);let j=g||250,N=j/1.6;var _,C;null!==(e=(0,i.bh)("loadedImagesMetadata"))&&void 0!==e&&null!==(l=e[I])&&void 0!==l&&l.w2hRel&&(N=j/(null===(_=(0,i.bh)("loadedImagesMetadata"))||void 0===_||null===(C=_[I])||void 0===C?void 0:C.w2hRel));const R=async(a,e)=>{var l=await(0,i.Em)(a,e);window.open(l)};return(0,n.jsx)("div",{className:" ",children:I?null!==(s=(0,i.bh)("loadedImagesMetadata"))&&void 0!==s&&null!==(r=s[I])&&void 0!==r&&r.w2hRel?(0,n.jsx)("div",{className:"_dsplFlx ",children:(0,n.jsx)("div",{className:"prev_document ",onClick:async()=>{if(h)h();else{let e=(0,i.LH)(I);var a=await(0,t.v8)(I);R(a.url,e)}},children:(0,n.jsx)("img",{src:null===(v=(0,i.bh)("loadedImages"))||void 0===v?void 0:v[I],alt:I,style:{width:j,height:N}})})}):(0,n.jsxs)("div",{className:"icon_compr _dsplFlx",style:{marginTop:10},children:[(0,n.jsx)("div",{className:"lbl_saving prev_document ",children:"getting Image ..."}),(0,n.jsx)(o,{stroke:"var(--partial-success)",size:24,strokeW:8})]}):null})},c=async a=>{let e=(0,i.bh)("loadedImages")||{};const l=a.map((async a=>{a&&(e[a]=await v(a),(0,i.lK)(a,e[a]))}));await Promise.all(l);return(0,i.Rz)("loadedImages",e),!0},v=async a=>{let e=(0,i.LH)(a);var l=await(0,t.v8)(a);return(null===l||void 0===l?void 0:l.url)&&await(0,i.Em)(null===l||void 0===l?void 0:l.url,e)}},9594:(a,e,l)=>{l.r(e),l.d(e,{default:()=>h,loadEvidence:()=>I,printGreenCardFrame:()=>x});var d=l(2791),s=l(2647),i=l(2350),t=l(5232),n=l(4529),o=l(1439),r=l(1112),c=l(7567),v=l(4327),m=l(184);const u=(0,s.PU)(),p=((0,s.tW)(),"LPR_form"),h=a=>{var e,l;let{clientItm:s}=a;const[,n]=(0,d.useState)(1),[c,v]=(0,d.useState)(!1),[h,b]=(0,d.useState)(!1),w=()=>{n((0,i.M5)())};(0,d.useEffect)((()=>{c||(f(),v(1),(0,i.Rz)(p,{lprClass:null===s||void 0===s?void 0:s.lprClass,lprExpirationDate:null===s||void 0===s?void 0:s.lprExpirationDate,residentSince:null===s||void 0===s?void 0:s.residentSince,lprIssuePlace:null===s||void 0===s?void 0:s.lprIssuePlace}))}));const f=async()=>{let a=(0,i.bh)("loadKeysEv_last")||0;if(Date.now()>a){(0,i.Rz)("loadKeysEv_last",Date.now()+990);await I();w()}},y=async(a,e,l)=>{(0,t.Rh)(a,e,(d=>{(0,t.F2)(d,a,(()=>(async(a,e)=>{var l,d;let s=null===(l=(0,i.bh)((0,i.Ks)()))||void 0===l?void 0:l.clientNotaryId,n={...null===(d=(0,i.bh)((0,i.hQ)()))||void 0===d?void 0:d.upd_notary};n.params={clientNotaryId:s},n.data2update=a;const o=(0,i.I7)(n),r=await o;if(r&&!r.error){let a=(0,i.bh)("loadedImages")||{};a[e]=null,(0,i.Rz)("loadedImages",a),await(0,t.uB)(s),w()}})({[l]:e},l)))}))},j=(a,e)=>{const l=a.target.files[0],d=new FileReader;let s=(0,i.M5)()+"_"+l.name;y(l,s,e),d.addEventListener("load",(()=>{(0,i.Rz)("preview_src",d.result)}),!1),l&&d.readAsDataURL(l)},N=async()=>{let a=s.paroleImage,e=(0,i.LH)(a);var l=await(0,t.Id)(a,(0,i.bh)((0,i.Ks)()).clientNotaryId);_(l,e)},_=async(a,e)=>{var l=await(0,i.Em)(a,e);window.open(l)};return null!==s&&void 0!==s&&s.hasLPR?(0,m.jsxs)("div",{className:" ",children:[(0,m.jsxs)("div",{className:"_dsplFlx ",children:[(0,m.jsx)("div",{className:"flexSpace"}),(0,m.jsx)("div",{className:"iMTYiw card",style:{marginTop:"8px"},children:"Permanent Resident"}),(0,m.jsx)("div",{className:"icon_image ",onClick:()=>b(!h),style:{padding:25},children:(0,m.jsx)(u,{name:"outline_edit",color:"var(--partial-success)"})}),(0,m.jsx)("div",{className:"flexSpace"})]}),(0,m.jsxs)("div",{className:"_dsplFlx card",style:{padding:30},children:[(0,m.jsxs)("div",{className:" ",children:[(0,m.jsx)(r.LabelEditInput,{title:"Class:",frmNm:p,keyfld:"lprClass",updObs:w,edit:h}),(0,m.jsx)(r.LabelEditDateInput,{title:"Resident Since:",frmNm:p,keyfld:"residentSince",updObs:w,edit:h}),(0,m.jsx)(r.LabelEditDateInput,{title:"Expiration Date:",frmNm:p,keyfld:"lprExpirationDate",updObs:w,edit:h}),(0,m.jsx)(r.LabelEditInput,{title:"Issue Place:",frmNm:p,keyfld:"lprIssuePlace",updObs:w,edit:h}),(0,m.jsx)("div",{className:"_dsplFlx   spaceAround flxWrp",style:{padding:30},children:(0,m.jsx)(o.N,{color:"#007bfc",label:"Save",clickHandler:async()=>{var a,e;let l=(0,i.bh)(p),d=null===(a=(0,i.bh)((0,i.Ks)()))||void 0===a?void 0:a.clientNotaryId,s={...null===(e=(0,i.bh)((0,i.hQ)()))||void 0===e?void 0:e.upd_notary};s.params={clientNotaryId:d},s.data2update=l;const t=(0,i.I7)(s),o=await t;o&&!o.error&&n((0,i.M5)())}})})]}),(0,m.jsx)("div",{className:"flexSpace"}),(0,m.jsxs)("div",{className:"_dsplFlx   spaceAround flxWrp",style:{width:560},children:[(0,m.jsx)(g,{imgUrl:null===(e=(0,i.bh)((0,i.Ks)()))||void 0===e?void 0:e.greenCardFrontImage,fld:"greenCardFrontImage",importCSV:j,openImage:N,label:"Upload Green Card front"}),(0,m.jsx)("div",{className:"flexSpace"}),(0,m.jsx)(g,{imgUrl:null===(l=(0,i.bh)((0,i.Ks)()))||void 0===l?void 0:l.greenCardBackImage,fld:"greenCardBackImage",label:"Upload Green Card back",importCSV:j,openImage:N})]}),(0,m.jsx)("div",{className:"flexSpace"}),(0,m.jsx)("div",{className:"icon_image ",onClick:()=>(async()=>{let a=await x();a&&window.open(a)})(),style:{padding:10},children:(0,m.jsx)(u,{name:"printer",color:"var(--danger-hover)"})})]}),(0,m.jsx)("div",{style:{padding:90}})]}):(0,m.jsxs)("div",{className:"_dsplFlx ",children:[(0,m.jsx)("div",{className:"flexSpace"}),(0,m.jsx)("div",{className:"iMTYiw card",style:{marginTop:"8px"},children:"No Data Found"}),(0,m.jsx)("div",{className:"flexSpace"})]})},g=a=>{var e,l;let{imgUrl:s,openImage:t,label:n,importCSV:r,fld:c}=a;const[,u]=(0,d.useState)(1),p=()=>{u((0,i.M5)())};(0,d.useEffect)((()=>{var a;null!==(a=(0,i.bh)("loadedImages"))&&void 0!==a&&a[s]||(setTimeout((()=>{var a,e;null!==(a=(0,i.bh)("loadedImagesMetadata"))&&void 0!==a&&null!==(e=a[s])&&void 0!==e&&e.w2hRel&&p()}),1800),setTimeout((()=>{var a,e;null!==(a=(0,i.bh)("loadedImagesMetadata"))&&void 0!==a&&null!==(e=a[s])&&void 0!==e&&e.w2hRel&&p()}),1200),I([s]))}),[s]);let h=156.25;var g,x;null!==(e=(0,i.bh)("loadedImagesMetadata"))&&void 0!==e&&null!==(l=e[s])&&void 0!==l&&l.w2hRel&&(h=250/(null===(g=(0,i.bh)("loadedImagesMetadata"))||void 0===g||null===(x=g[s])||void 0===x?void 0:x.w2hRel));return(0,m.jsxs)("div",{className:" ",children:[(0,m.jsx)(o.Z,{label:n,onChange:a=>r(a,c),width:250,color:"#f4f4f4"}),s?(0,m.jsx)(v.xu,{openImage:t,urlBasic:s}):null]})},x=async()=>{var a,e,l,d,s,t;let o=(0,i.LH)(null===(a=(0,i.bh)((0,i.Ks)()))||void 0===a?void 0:a.greenCardFrontImage),r=null===(e=(0,i.bh)("loadedImages"))||void 0===e?void 0:e[null===(l=(0,i.bh)((0,i.Ks)()))||void 0===l?void 0:l.greenCardFrontImage],c=(0,i.LH)(null===(d=(0,i.bh)((0,i.Ks)()))||void 0===d?void 0:d.greenCardBackImage),v=null===(s=(0,i.bh)("loadedImages"))||void 0===s?void 0:s[null===(t=(0,i.bh)((0,i.Ks)()))||void 0===t?void 0:t.greenCardBackImage];if(r&&v){return await(0,n.sR)(r,o,v,c)}return null},I=async a=>{let e=(0,i.bh)("loadedImages")||{};const l=a.map((async a=>{a&&(e[a]=await(0,c.loadImage)(a),(0,i.lK)(a,e[a]))}));await Promise.all(l);return(0,i.Rz)("loadedImages",e),!0}}}]);
//# sourceMappingURL=9594.b6a1714f.chunk.js.map