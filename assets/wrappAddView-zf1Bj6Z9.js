const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddBarCodeView-j9FhbBt-.js","assets/index-CvYaQ-s6.js","assets/index-DUq9wHKT.css","assets/Toast-Cr22bH7f.js","assets/Util-D_-lrQft.js","assets/Toast-DLpFKn-Q.css","assets/DialogHRM-oeegtrC_.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-BQY5JgUu.js","assets/SVG-DJK66ZUv.js","assets/ButonHrm-BSeWNUGQ.css","assets/AddManualyView-BFsu7p_n.js","assets/PassportAnalizingView-DIECtGAe.js","assets/handelImagesServices-DUVPx-oo.js","assets/PDFButton-CSS0jQgP.js","assets/ShowQRPrintLabel-1R_Ti2XR.js","assets/fontkit.es-Dm0cGHgD.js","assets/InitPrintServices-C0pVP2ci.js","assets/ButonHrm-PmxI45J5.js","assets/LoadingColorSpinner-D4w8qvcq.js","assets/LoadingColorSpinner-DPNLfwBi.css"])))=>i.map(i=>d[i]);
import{a as I,g as D,i as _,e as u,h as U,f as B,s as O,t as $,l as f,_ as h,y as P,G as R,j as k}from"./index-CvYaQ-s6.js";/* empty css                 */import V from"./SVG-DJK66ZUv.js";import{a as C,g as y,B as q,b as w,q as F,O as T}from"./Util-D_-lrQft.js";import{OpenToast as j}from"./Toast-Cr22bH7f.js";import{OpenModal as S}from"./DialogHRM-oeegtrC_.js";function z({multiple:e=!1,accept:n=""}){const o=document.createElement("input");return o.type="file",o.accept=n,o.multiple=e,o}function H(e){const n=[];if(!e)return n;for(const o in e){const l=+o;if(isNaN(+l))continue;const t=e[l];if(!t)continue;const d={source:URL.createObjectURL(t),name:t.name,size:t.size,file:t};n.push(d)}return n}function M(e){const[n,o]=I([]);let l=()=>{};const t=async r=>{r.preventDefault(),r.stopPropagation();const a=r.currentTarget;let i=[];a.files&&(i=H(a.files)),a.removeEventListener("change",t),a.remove(),o(i);try{await l(i)}catch(g){console.error(g)}};return{files:n,selectFiles:r=>{r&&(l=r);const a=z(e||{});a.addEventListener("change",t),a.click()},removeFile:r=>{o(a=>a.filter(i=>i.name!==r))},clearFiles:()=>{o([])}}}var N=$('<div class=" jaqJnq_hrm1"><div class="gHAsFI_hrm1 dqn9fN jUrKkb upl"><h5></h5><div id=fileupload>');function x(e){const[n,o]=I(!1);let l={};if(e?.color){let{r:s,g:c,b:r}=Q(e.color),a="rgba("+[s,c,r].join(",")+", 0.17 )",i="rgba("+[s,c,r].join(",")+", 0.21 )",g="rgba("+[s,c,r].join(",")+", 0.42 )";l={"--btn_bg_hrm2":a,"--btn_bg_hover_hrm2":i,"--btn_text_hrm2":e?.color,"--btn_border_hrm2":n()?e?.color:"transparent","--border-radius-8":"8px"},n()&&(l={"--btn_bg_hrm2":a,"--btn_bg_hover_hrm2":g,"--btn_text_hrm2":e?.color,"--btn_border_hrm2":e?.color,"--border-radius-8":"8px"})}const{files:t,selectFiles:d}=M({accept:"image/*"});return(()=>{var s=N(),c=s.firstChild,r=c.firstChild,a=r.nextSibling;return _(c,u(U,{get when(){return e?.icon},get children(){return u(V,{get name(){return e?.icon}})}}),r),_(r,()=>e.label),a.$$click=()=>{d(([{source:i,name:g,size:b,file:m}])=>{e?.handleClick?.({source:i,name:g,size:b,file:m})})},B(i=>O(s,l,i)),s})()}const Q=e=>{e=e.replace("#",""),e.length!==6&&(e=G(e));const n=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16);return{r:n,g:o,b:l}};function G(e){return e.length===4&&(e=e.replace("#","")),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e}D(["click"]);var K=$('<div class="centerBx spaceAround flxWrp"><div style=margin:3px></div><div style=margin:3px>'),J=$("<div> ");const W=f(()=>h(()=>import("./AddBarCodeView-j9FhbBt-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),X=f(()=>h(()=>import("./AddManualyView-BFsu7p_n.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),Y=f(()=>h(()=>import("./PassportAnalizingView-DIECtGAe.js"),__vite__mapDeps([12,1,2,13,4,8,14,15,16,17,3,5,6,7]))),A=f(()=>h(()=>import("./ButonHrm-PmxI45J5.js"),__vite__mapDeps([18,1,2,9,4,10]))),Z=f(()=>h(()=>import("./LoadingColorSpinner-D4w8qvcq.js"),__vite__mapDeps([19,1,2,20]))),de=e=>{const n=(t,d,s)=>{let c={};c.id=y(),c.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},c.content=u(Y,{item:s,fl:t,b64:d}),S(c)},o=()=>{let t={};t.id=y(),t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=u(X,{}),S(t)},l=()=>{let t={};t.id=y(),t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=u(W,{}),S(t)};return(()=>{var t=K(),d=t.firstChild,s=d.nextSibling;return _(t,u(A,{icon:"keyboard",color:"#c8193c",label:"Manual",handleClick:o}),d),_(t,u(ee,{action:n}),s),_(t,u(A,{icon:"qr_code",color:"#c8193c",label:"Desde BarCode",handleClick:l}),null),t})()},ee=e=>{const[n,o]=I(null),[l,t]=I(!1);P(),R();const d=async(r,a)=>{let i=await te(r.type,a);if(await re(i,r)){let b=r.name.split(".").pop(),m=q(r.name),p=m+"."+b,v={...w(F())?.add_img_loc};v.form={imgLocId:m,fileName:a,fileN:p,originSource:k?.profile?.businessId,linked:"$$"};let E=await ne(v);E&&e.action&&e.action(a,m,E),t(!1)}},s=async()=>{let r=n().file.name.split(".").pop(),a=q(n().file.name),i={params:{imgLocId:a.trim()}},g={...w(F())?.id_img_loc};i={...i,...g};const m=await C(i);if(m&&m?.imgLocId===a){let p={params:{":search0":a.trim()}},v={...w(F())?.search_notary};p={...p,...v};const L=await C(p);L&&T(L).length>1?j({text:"Cliente encontrado con esa imagen",timeout:4500}):e.action&&e.action(m.fileName,a,m),t(!1)}else{let p=y()+"_"+a+"."+r;d(n().file,p)}},c=r=>{o(r),t(!0),s()};return u(U,{get when(){return!l()},get fallback(){return(()=>{var r=J();return r.firstChild,_(r,u(Z,{stroke:"rgb(200 25 60 / 1)",size:32}),null),r})()},get children(){return u(x,{accept:"image/*",color:"#c8193c",icon:"image_outline",label:"Desde Imagen",handleClick:c})}})},te=async(e,n)=>{let o={query:"SignedUrlUpload",params:{userId:k?.profile?.businessId,fileName:n,mimeType:e}};const t=await C(o);return t&&!t.error?t.uploadURL:null},re=async(e,n)=>(await fetch(e,{method:"PUT",headers:{"Content-Type":n.type},body:n}))?.status===200?!0:null,ne=async(e,n,o)=>{const t=await C(e);if(t&&!t.error)return t};export{de as default,te as getSignedUploadUrlAsync,re as uploadSignedUrlBlob};
