const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddManualyView-DHH2eyiq.js","assets/index-Dc6i2H8V.js","assets/index-DUq9wHKT.css","assets/Toast-BPKh8z6y.js","assets/Util-D_-lrQft.js","assets/Toast-DLpFKn-Q.css","assets/DialogHRM-B6BlsYs1.js","assets/DialogHRM-V9_lZntj.css","assets/globalSignal-DmyvaVzg.js","assets/SVG-CrNT27Bj.js","assets/ButonHrm-BSeWNUGQ.css","assets/PassportAnalizingView-Q38mJPy1.js","assets/handelImagesServices-B3M8zZ2Y.js","assets/PDFButton-aCkTueX8.js","assets/ShowQRPrintLabel-p_XPQQZd.js","assets/fontkit.es-DziRaY1A.js","assets/InitPrintServices-BFo_qZV8.js","assets/ButonHrm-1wwT4hw1.js","assets/LoadingColorSpinner-By6xkkWX.js","assets/LoadingColorSpinner-DPNLfwBi.css"])))=>i.map(i=>d[i]);
import{a as h,g as B,i as p,e as u,h as k,f as D,s as O,t as S,l as v,_ as I,y as P,G as j,j as A}from"./index-Dc6i2H8V.js";/* empty css                 */import R from"./SVG-CrNT27Bj.js";import{a as y,g as E,B as $,b as F,q as w,O as T}from"./Util-D_-lrQft.js";import{OpenToast as V}from"./Toast-BPKh8z6y.js";import{OpenModal as q}from"./DialogHRM-B6BlsYs1.js";function z({multiple:e=!1,accept:n=""}){const l=document.createElement("input");return l.type="file",l.accept=n,l.multiple=e,l}function H(e){const n=[];if(!e)return n;for(const l in e){const o=+l;if(isNaN(+o))continue;const t=e[o];if(!t)continue;const m={source:URL.createObjectURL(t),name:t.name,size:t.size,file:t};n.push(m)}return n}function M(e){const[n,l]=h([]);let o=()=>{};const t=async r=>{r.preventDefault(),r.stopPropagation();const a=r.currentTarget;let i=[];a.files&&(i=H(a.files)),a.removeEventListener("change",t),a.remove(),l(i);try{await o(i)}catch(g){console.error(g)}};return{files:n,selectFiles:r=>{r&&(o=r);const a=z(e||{});a.addEventListener("change",t),a.click()},removeFile:r=>{l(a=>a.filter(i=>i.name!==r))},clearFiles:()=>{l([])}}}var N=S('<div class=" jaqJnq_hrm1"><div class="gHAsFI_hrm1 dqn9fN jUrKkb upl"><h5></h5><div id=fileupload>');function G(e){const[n,l]=h(!1);let o={};if(e?.color){let{r:c,g:s,b:r}=K(e.color),a="rgba("+[c,s,r].join(",")+", 0.17 )",i="rgba("+[c,s,r].join(",")+", 0.21 )",g="rgba("+[c,s,r].join(",")+", 0.42 )";o={"--btn_bg_hrm2":a,"--btn_bg_hover_hrm2":i,"--btn_text_hrm2":e?.color,"--btn_border_hrm2":n()?e?.color:"transparent","--border-radius-8":"8px"},n()&&(o={"--btn_bg_hrm2":a,"--btn_bg_hover_hrm2":g,"--btn_text_hrm2":e?.color,"--btn_border_hrm2":e?.color,"--border-radius-8":"8px"})}const{files:t,selectFiles:m}=M({accept:"image/*"});return(()=>{var c=N(),s=c.firstChild,r=s.firstChild,a=r.nextSibling;return p(s,u(k,{get when(){return e?.icon},get children(){return u(R,{get name(){return e?.icon}})}}),r),p(r,()=>e.label),a.$$click=()=>{m(([{source:i,name:g,size:_,file:d}])=>{e?.handleClick?.({source:i,name:g,size:_,file:d})})},D(i=>O(c,o,i)),c})()}const K=e=>{e=e.replace("#",""),e.length!==6&&(e=Q(e));const n=parseInt(e.slice(0,2),16),l=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16);return{r:n,g:l,b:o}};function Q(e){return e.length===4&&(e=e.replace("#","")),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e}B(["click"]);var J=S('<div class="centerBx spaceAround flxWrp">'),W=S("<div> ");const X=v(()=>I(()=>import("./AddManualyView-DHH2eyiq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),Y=v(()=>I(()=>import("./PassportAnalizingView-Q38mJPy1.js"),__vite__mapDeps([11,1,2,12,4,8,13,14,15,16,3,5,6,7]))),U=v(()=>I(()=>import("./ButonHrm-1wwT4hw1.js"),__vite__mapDeps([17,1,2,9,4,10]))),Z=v(()=>I(()=>import("./LoadingColorSpinner-By6xkkWX.js"),__vite__mapDeps([18,1,2,19]))),ce=e=>{const n=()=>{},l=(t,m,c)=>{let s={};s.id=E(),s.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},s.content=u(Y,{item:c,fl:t,b64:m}),q(s)},o=()=>{let t={};t.id=E(),t.props={minHeight:"1vh",overlay:!0,height:"93vh",zIndex:450},t.content=u(X,{}),q(t)};return(()=>{var t=J();return p(t,u(U,{icon:"keyboard",color:"rgb(200 25 60 / 1)",label:"Manual",handleClick:o}),null),p(t,u(x,{action:l}),null),p(t,u(U,{icon:"qr_code",color:"rgb(200 25 60 / 1)",label:"Desde BarCode",handleClick:n}),null),t})()},x=e=>{const[n,l]=h(null),[o,t]=h(!1);P(),j();const m=async(r,a)=>{let i=await ee(r.type,a);if(await te(i,r)){let _=r.name.split(".").pop(),d=$(r.name),f=d+"."+_,b={...F(w())?.add_img_loc};b.form={imgLocId:d,fileName:a,fileN:f,originSource:A?.profile?.businessId,linked:"$$"};let C=await re(b);C&&e.action&&e.action(a,d,C),t(!1)}},c=async()=>{let r=n().file.name.split(".").pop(),a=$(n().file.name),i={params:{imgLocId:a.trim()}},g={...F(w())?.id_img_loc};i={...i,...g};const d=await y(i);if(d&&d?.imgLocId===a){let f={params:{":search0":a.trim()}},b={...F(w())?.search_notary};f={...f,...b};const L=await y(f);L&&T(L).length>1?V({text:"Cliente encontrado con esa imagen",timeout:4500}):e.action&&e.action(d.fileName,a,d),t(!1)}else{let f=E()+"_"+a+"."+r;m(n().file,f)}},s=r=>{l(r),t(!0),c()};return u(k,{get when(){return!o()},get fallback(){return(()=>{var r=W();return r.firstChild,p(r,u(Z,{stroke:"rgb(200 25 60 / 1)",size:32}),null),r})()},get children(){return u(G,{accept:"image/*",color:"rgb(200 25 60 / 1)",icon:"image_outline",label:"Desde Imagen",handleClick:s})}})},ee=async(e,n)=>{let l={query:"SignedUrlUpload",params:{userId:A?.profile?.businessId,fileName:n,mimeType:e}};const t=await y(l);return t&&!t.error?t.uploadURL:null},te=async(e,n)=>(await fetch(e,{method:"PUT",headers:{"Content-Type":n.type},body:n}))?.status===200?!0:null,re=async(e,n,l)=>{const t=await y(e);if(t&&!t.error)return t};export{ce as default,ee as getSignedUploadUrlAsync,te as uploadSignedUrlBlob};
